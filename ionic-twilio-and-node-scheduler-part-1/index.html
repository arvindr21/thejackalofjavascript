<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="alexaVerifyID" content="tHZTfJpU56tqERN4vjth74jHqBM"/>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="./../xmlrpc.php">
<!-- <link href='http://fonts.googleapis.com/css?family=Exo+2' rel='stylesheet' type='text/css'> -->
<link rel="shortcut icon" href="./../wp-content/uploads/2014/02/favicon.ico" type="image/x-icon">
<meta name="keywords" content="Javascript, HTML5, CSS3, ES6, Ecmascript, Hybrid Apps, Mobile Web Development, Desktop Apps, Apps, Arvind R, Arvind Ravulavaru, The Jackal of Javascript">
<link rel="icon" href="./../wp-content/uploads/2014/02/favicon.ico" type="image/x-icon">
<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'> -->
<link rel="stylesheet" type="text/css" href="./../wp-content/cache/wpfc-minified/61cc3c87f2aa625d55d3026ecc452e96/1511014149index.css" media="all"/>
<!-- Performance scores of this site is tuned by WP Performance Score Booster plugin v1.5 - http://wordpress.org/plugins/wp-performance-score-booster -->
<!-- Jetpack Site Verification Tags -->
<meta name="google-site-verification" content="1QBi99oBZzn4xisTyRUgPd4BXjQ-6Tu09iK6V_bviIY" />
<meta name="msvalidate.01" content="33E048D3C4E943B6450230EA909E12C6" />
<meta name="p:domain_verify" content="662a829c1b5ccc13015f1cc5d00ec7e4" />
<!-- This site is optimized with the Yoast SEO plugin v3.1 - https://yoast.com/wordpress/plugins/seo/ -->
<title>Ionic, Twilio and Node Scheduler - A Reminder App - Part I [Server] | The Jackal of Javascript</title>
<meta name="description" content="Ionic, Twilio and Node Scheduler - A Reminder App - Part I In this post, we will take a look at building a Reminder app. With this mobile hybrid app, a use"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="./index.html" />
<link rel="publisher" href="https://plus.google.com/ArvindRavulavaru"/>
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Ionic, Twilio and Node Scheduler - A Reminder App - Part I [Server] | The Jackal of Javascript" />
<meta property="og:description" content="Ionic, Twilio and Node Scheduler - A Reminder App - Part I In this post, we will take a look at building a Reminder app. With this mobile hybrid app, a use" />
<meta property="og:url" content="./ionic-twilio-and-node-scheduler-part-1/" />
<meta property="og:site_name" content="The Jackal of Javascript" />
<meta property="article:publisher" content="https://www.facebook.com/arvindravulavaru" />
<meta property="article:section" content="Android" />
<meta property="article:published_time" content="2014-09-30T01:23:43+05:30" />
<meta property="article:modified_time" content="2014-10-19T11:16:00+05:30" />
<meta property="og:updated_time" content="2014-10-19T11:16:00+05:30" />
<meta property="og:image" content="./wp-content/uploads/2014/09/Screenshot_2014-09-29-23-51-47-168x300.png" />
<meta property="og:image" content="./wp-content/uploads/2014/09/Screenshot_2014-09-29-23-53-15-168x300.png" />
<meta property="og:image" content="./wp-content/uploads/2014/09/Screenshot_2014-09-29-23-54-00-168x300.png" />
<meta property="og:image" content="./wp-content/uploads/2014/09/arch_remide_me_app-332x300.png" />
<meta property="og:image" content="./wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.24.26-pm-451x118.png" />
<meta property="og:image" content="./wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.29.55-pm1-451x185.png" />
<meta property="og:image" content="./wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.31.56-pm-451x188.png" />
<meta property="og:image" content="./wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.36.23-pm-451x167.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="Ionic, Twilio and Node Scheduler - A Reminder App - Part I In this post, we will take a look at building a Reminder app. With this mobile hybrid app, a use" />
<meta name="twitter:title" content="Ionic, Twilio and Node Scheduler - A Reminder App - Part I [Server] | The Jackal of Javascript" />
<meta name="twitter:site" content="@arvindr21" />
<meta name="twitter:image" content="./wp-content/uploads/2014/09/Screenshot_2014-09-29-23-51-47-168x300.png" />
<meta name="twitter:creator" content="@arvindr21" />
<!-- / Yoast SEO plugin. -->
<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":".\/wp-includes\/js\/wp-emoji-release.min.js"}};
!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
display: inline !important;
border: none !important;
box-shadow: none !important;
height: 1em !important;
width: 1em !important;
margin: 0 .07em !important;
vertical-align: -0.1em !important;
background: none !important;
padding: 0 !important;
}
</style>
<!-- <link rel='stylesheet' id='savrix-style.css-css'  href='./wp-content/plugins/savrix-android-market/savrix-style-only-play.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='validate-engine-css-css'  href='./wp-content/plugins/wysija-newsletters/css/validationEngine.jquery.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='crayon-css'  href='./wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='crayon-theme-arduino-ide-css'  href='./wp-content/plugins/crayon-syntax-highlighter/themes/arduino-ide/arduino-ide.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='crayon-font-droid-sans-mono-css'  href='./wp-content/plugins/crayon-syntax-highlighter/fonts/droid-sans-mono.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='orgseries-default-css-css'  href='./wp-content/plugins/organize-series/orgSeries.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='responsive-lightbox-prettyphoto-css'  href='./wp-content/plugins/responsive-lightbox/assets/prettyphoto/css/prettyPhoto.css' type='text/css' media='all' /> -->
<link rel="stylesheet" type="text/css" href="./../wp-content/cache/wpfc-minified/9f9f3b5f286a1b327e6bb0fdb1185c24/1511014149index.css" media="all"/>
<link rel='stylesheet' id='font-awesome-css'  href='//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css' type='text/css' media='screen' />
<!-- <link rel='stylesheet' id='ssbaFont-css'  href='//fonts.googleapis.com/css?family=Indie+Flower&#038;ver=4.2.16' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='wpfront-notification-bar-css'  href='./wp-content/plugins/wpfront-notification-bar/css/wpfront-notification-bar.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='sorbet-style-css'  href='./wp-content/themes/sorbet/style.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='sorbet-source-sans-pro-css'  href='http://fonts.googleapis.com/css?family=Source+Sans+Pro%3A300%2C400%2C700%2C300italic%2C400italic%2C700italic&#038;subset=latin%2Clatin-ext&#038;ver=4.2.16' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='sorbet-pt-serif-css'  href='http://fonts.googleapis.com/css?family=PT+Serif%3A400%2C700%2C400italic%2C700italic&#038;subset=latin%2Clatin-ext&#038;ver=4.2.16' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='sorbet-genericons-css'  href='./wp-content/themes/sorbet/genericons/genericons.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='easy_table_style-css'  href='./wp-content/plugins/easy-table/themes/default/style.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='upprev-css-css'  href='./wp-content/plugins/upprev/styles/upprev.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='jetpack_css-css'  href='./wp-content/plugins/jetpack/css/jetpack.css' type='text/css' media='all' /> -->
<link rel="stylesheet" type="text/css" href="./../wp-content/cache/wpfc-minified/3af13bcd925b3eaa358c8ad5070bb07b/1511014148index.css" media="all"/>
<!-- This site uses the Google Analytics by Yoast plugin v5.4.6 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');
__gaTracker('create', 'UA-47881846-1', 'auto');
__gaTracker('set', 'forceSSL', true);
__gaTracker('require', 'displayfeatures');
__gaTracker('send','pageview');
</script>
<!-- / Google Analytics by Yoast -->
<script type="text/javascript">
var iworks_upprev = { animation: 'flyout', position: 'right', offset_percent: 75, offset_element: '#comments', css_width: 360, css_side: 5, compare: 'simple', url_new_window: 0, ga_track_views: 1, ga_track_clicks: 1, ga_opt_noninteraction: 1, title: 'Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]' };
</script>
<script src='./../wp-content/cache/wpfc-minified/1f21a7a8ca343ebb57ffeb4ab24afbd9/1511014152index.js' type="text/javascript"></script>
<!-- <script type='text/javascript' src='./wp-includes/js/jquery/jquery.js'></script> -->
<!-- <script type='text/javascript' src='./wp-includes/js/jquery/jquery-migrate.min.js'></script> -->
<!-- <script type='text/javascript' src='./wp-content/plugins/jetpack/modules/related-posts/related-posts.js'></script> -->
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":".\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script src='./../wp-content/cache/wpfc-minified/052c748258385b6c23fc6642e73a4285/1511014152index.js' type="text/javascript"></script>
<!-- <script type='text/javascript' src='./wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js'></script> -->
<!-- <script type='text/javascript' src='./wp-content/plugins/responsive-lightbox/assets/prettyphoto/js/jquery.prettyPhoto.js'></script> -->
<script type='text/javascript'>
/* <![CDATA[ */
var rlArgs = {"script":"prettyphoto","selector":"lightbox","customEvents":"","activeGalleries":"1","animationSpeed":"normal","slideshow":"0","slideshowDelay":"5000","slideshowAutoplay":"0","opacity":"0.75","showTitle":"1","allowResize":"1","allowExpand":"1","width":"1080","height":"720","separator":"\/","theme":"pp_default","horizontalPadding":"20","hideFlash":"0","wmode":"opaque","videoAutoplay":"0","modal":"0","deeplinking":"0","overlayGallery":"1","keyboardShortcuts":"1","social":"0"};
/* ]]> */
</script>
<script src='./../wp-content/cache/wpfc-minified/d57c91500961bea5aea0e849cf08f7e7/1511014151index.js' type="text/javascript"></script>
<!-- <script type='text/javascript' src='./wp-content/plugins/responsive-lightbox/js/front.js'></script> -->
<!-- <script type='text/javascript' src='./wp-content/plugins/wpfront-notification-bar/jquery-plugins/jquery.c.js'></script> -->
<!-- <script type='text/javascript' src='./wp-content/plugins/wpfront-notification-bar/js/wpfront-notification-bar.js'></script> -->
<!-- <script type='text/javascript' src='./wp-content/plugins/upprev/scripts/upprev.js'></script> -->
<script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js'></script>
<meta name="generator" content="WordPress 4.2.16" />
<style>
.scroll-back-to-top-wrapper {
position: fixed;
opacity: 0;
visibility: hidden;
overflow: hidden;
text-align: center;
z-index: 99999999;
background-color: #777777;
color: #eeeeee;
width: 50px;
height: 48px;
line-height: 48px;
right: 30px;
bottom: 30px;
padding-top: 2px;
border-top-left-radius: 10px;
border-top-right-radius: 10px;
border-bottom-right-radius: 10px;
border-bottom-left-radius: 10px;
-webkit-transition: all 0.5s ease-in-out;
-moz-transition: all 0.5s ease-in-out;
-ms-transition: all 0.5s ease-in-out;
-o-transition: all 0.5s ease-in-out;
transition: all 0.5s ease-in-out;
}
.scroll-back-to-top-wrapper:hover {
background-color: #888888;
color: #eeeeee;
}
.scroll-back-to-top-wrapper.show {
visibility:visible;
cursor:pointer;
opacity: 1.0;
}
.scroll-back-to-top-wrapper i.fa {
line-height: inherit;
}
.scroll-back-to-top-wrapper .fa-lg {
vertical-align: 0;
}
</style><style type="text/css">	.ssba {
}
.ssba img
{
width: 35px !important;
padding: 6px;
border:  0;
box-shadow: none !important;
display: inline !important;
vertical-align: middle;
}
.ssba, .ssba a
{
text-decoration:none;
border:0;
background: none;
font-family: Indie Flower;
font-size: 	20px;
}.ssba_sharecount:after, .ssba_sharecount:before {
right: 100%;
border: solid transparent;
content: " ";
height: 0;
width: 0;
position: absolute;
pointer-events: none;
}
.ssba_sharecount:after {
border-color: rgba(224, 221, 221, 0);
border-right-color: #f5f5f5;
border-width: 5px;
top: 50%;
margin-top: -5px;
}
.ssba_sharecount:before {
border-color: rgba(85, 94, 88, 0);
border-right-color: #e0dddd;
border-width: 6px;
top: 50%;
margin-top: -6px;
}
.ssba_sharecount {
font: 11px Arial, Helvetica, sans-serif;
padding: 5px;
-khtml-border-radius: 6px;
-o-border-radius: 6px;
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
border-radius: 6px;
position: relative;
border: 1px solid #e0dddd;color: #555e58;
background: #ffffff;
}
.ssba_sharecount:after {
border-right-color: #ffffff;
}</style><style id="popup-maker-themes"  type="text/css">/* Popup Theme 2995: Default Theme */
.popmake-overlay.theme-2995, .popmake-overlay.theme-default-theme { background-color: rgba( 255, 255, 255, 1 ) } 
.popmake.theme-2995, .popmake.theme-default-theme { padding: 18px; border-radius: 0px; border: 1px none #000000; box-shadow: 1px 1px 3px 0px rgba( 2, 2, 2, 0.23 ); background-color: rgba( 249, 249, 249, 1 ) } 
.popmake.theme-2995 .popmake-title, .popmake.theme-default-theme .popmake-title { color: #000000; text-align: left; text-shadow: 0px 0px 0px rgba( 2, 2, 2, 0.23 ); font-family: inherit; font-weight: inherit; font-size: 32px; font-style: normal; line-height: 36px } 
.popmake.theme-2995 .popmake-content, .popmake.theme-default-theme .popmake-content { color: #8c8c8c; font-family: inherit; font-weight: inherit; font-style: normal } 
.popmake.theme-2995 > .popmake-close, .popmake.theme-default-theme > .popmake-close { height: 20px; width: 20px; left: auto; right: 0px; bottom: auto; top: 0px; padding: 8px; color: #ffffff; font-family: inherit; font-weight: inherit; font-size: 12px; font-style: normal; line-height: 14px; border: 1px none #ffffff; border-radius: 0px; box-shadow: 0px 0px 0px 0px rgba( 2, 2, 2, 0.23 ); text-shadow: 0px 0px 0px rgba( 0, 0, 0, 0.23 ); background-color: rgba( 0, 183, 205, 1 ) } 
</style>
<link rel='dns-prefetch' href='//i0.wp.com'>
<link rel='dns-prefetch' href='//i1.wp.com'>
<link rel='dns-prefetch' href='//i2.wp.com'>
<link rel='dns-prefetch' href='//widgets.wp.com'>
<link rel='dns-prefetch' href='//s0.wp.com'>
<link rel='dns-prefetch' href='//0.gravatar.com'>
<link rel='dns-prefetch' href='//1.gravatar.com'>
<link rel='dns-prefetch' href='//2.gravatar.com'>
<style type="text/css">
#upprev_box{bottom:5px;width:360px;right:5px;display:block;right:-415px;display:block;}
</style>
</head>
<body class="single single-post postid-2115 single-format-standard right-sidebar">
<div id="page" class="hfeed site">
<header id="masthead" class="site-header" role="banner">
<div class="site-header-wrapper">
<div class="site-branding">
<h1 class="site-title"><a href="./../index.html" rel="home">The Jackal of Javascript</a></h1>
<h2 class="site-description">Knowing is different &amp; Doing is different</h2>
</div>
<div class="toggles">
<div id="menu-toggle" class="toggle active" title="Menu"><span class="screen-reader-text">Menu</span></div>
<div id="search-toggle" class="toggle" title="Search"><span class="screen-reader-text">Search</span></div>
</div>
</div>
</header><!-- #masthead -->
<div id="menu-toggle-nav" class="panel">
<nav id="site-navigation" class="main-navigation" role="navigation">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<div class="menu-main-container"><ul id="menu-main" class="menu"><li id="menu-item-2579" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-2579"><a href="./../index.html">Home</a></li>
<li id="menu-item-2595" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2595"><a href="./../portfolio/index.html">About  me</a></li>
<li id="menu-item-2580" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2580"><a href="./../history-of-the-web/index.html">History of the Web</a></li>
<li id="menu-item-2726" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2726"><a href="./../javascript-101/index.html">Javascript 101</a></li>
<li id="menu-item-2581" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2581"><a href="./../contact-request/index.html">Request</a></li>
</ul></div>		</nav><!-- #site-navigation -->
</div>
<div id="search-toggle-nav" class="panel">
<div class="search-wrapper">
<form role="search" method="get" class="search-form" action="./../index.html">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s">
</label>
<input type="submit" class="search-submit" value="Search">
</form>
</div>
</div>
<div id="content" class="site-content">
<div id="primary" class="content-area">
<main id="main" class="site-main" role="main">
<article id="post-2115" class="post-2115 post type-post status-publish format-standard hentry category-android category-angularjs category-architecture category-disk-db category-expressjs category-frameworks category-ionic category-javascript category-mobile category-node category-phonegap category-setup category-third-party-products category-tutorial category-twilio series-a-reminder-app">
<header class="entry-header">
<h1 class="entry-title">Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]</h1>	</header><!-- .entry-header -->
<div class="entry-content">
<div class="seriesmeta" style="background:#4F5256; padding:5px;margin-bottom:5px;font-size:15px;color:white;padding-left: 20px;border-radius:3px;">This post is part 1 of 2 in the series <a href="./../series/a-reminder-app/index.html" class="series-145" title="Ionic, Twilio and Node Scheduler – A Reminder App">Ionic, Twilio and Node Scheduler – A Reminder App</a></div><!-- Simple Share Buttons Adder (6.1.5) simplesharebuttons.com --><div class="ssba ssba-wrap"><div style="text-align:left"><a href="http://twitter.com/share?url=./ionic-twilio-and-node-scheduler-part-1/&amp;text=Ionic%2C+Twilio+and+Node+Scheduler+%E2%80%93+A+Reminder+App+%E2%80%93+Part+I+%5BServer%5D+From+The+Jackal+of+Javascript+by+%40arvindr21" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/share?url=./ionic-twilio-and-node-scheduler-part-1/&amp;text=Ionic%2C+Twilio+and+Node+Scheduler+%E2%80%93+A+Reminder+App+%E2%80%93+Part+I+%5BServer%5D+From+The+Jackal+of+Javascript+by+%40arvindr21', '');" data-site="" class="ssba_twitter_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png?w=646" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter" data-recalc-dims="1" /><noscript><img src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png?w=646" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter" data-recalc-dims="1" /></noscript></a><a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=./ionic-twilio-and-node-scheduler-part-1/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.linkedin.com/shareArticle?mini=true&amp;url=./ionic-twilio-and-node-scheduler-part-1/', '');" data-site="linkedin" class="ssba_linkedin_share ssba_share_link"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png?w=646" title="LinkedIn" class="ssba ssba-img" alt="Share on LinkedIn" data-recalc-dims="1" /><noscript><img src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png?w=646" title="LinkedIn" class="ssba ssba-img" alt="Share on LinkedIn" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">9</span><a href="https://plus.google.com/share?url=./ionic-twilio-and-node-scheduler-part-1/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://plus.google.com/share?url=./ionic-twilio-and-node-scheduler-part-1/', '');" data-site="" class="ssba_google_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/google.png?w=646" title="Google+" class="ssba ssba-img" alt="Share on Google+" data-recalc-dims="1" /><noscript><img src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/google.png?w=646" title="Google+" class="ssba ssba-img" alt="Share on Google+" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">0</span><a href="http://reddit.com/submit?url=./ionic-twilio-and-node-scheduler-part-1/&amp;title=Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://reddit.com/submit?url=./ionic-twilio-and-node-scheduler-part-1/&amp;title=Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]', '');" data-site="reddit" class="ssba_reddit_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/reddit.png?w=646" title="Reddit" class="ssba ssba-img" alt="Share on Reddit" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/reddit.png?w=646" title="Reddit" class="ssba ssba-img" alt="Share on Reddit" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">0</span><a href="https://bufferapp.com/add?url=./ionic-twilio-and-node-scheduler-part-1/&amp;text=From The Jackal of Javascript Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://bufferapp.com/add?url=./ionic-twilio-and-node-scheduler-part-1/&amp;text=From The Jackal of Javascript Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]', '');" data-site="buffer" class="ssba_buffer_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/buffer.png?w=646" title="Buffer" class="ssba ssba-img" alt="Buffer this page" data-recalc-dims="1" /><noscript><img src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/buffer.png?w=646" title="Buffer" class="ssba ssba-img" alt="Buffer this page" data-recalc-dims="1" /></noscript></a><a href="https://flattr.com/submit/auto?user_id=arvindr21&amp;title=Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]&amp;url=https://flattr.com/profile/arvindr21" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://flattr.com/submit/auto?user_id=arvindr21&amp;title=Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]&amp;url=https://flattr.com/profile/arvindr21', '');" data-site="flattr" class="ssba_flattr_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/flattr.png?w=646" title="Flattr" class="ssba ssba-img" alt="Flattr the author" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/flattr.png?w=646" title="Flattr" class="ssba ssba-img" alt="Flattr the author" data-recalc-dims="1" /></noscript></a><a data-site="email" class="ssba_email_share" href="./../cdn-cgi/l/email-protection/index.html#625d111700080701165f2b0d0c0b014e4236150b0e0b0d42030c06422c0d06074231010a0706170e071042475054415a5053535942234230070f0b0c0607104223121242475054415a505353594232031016422b42393107101407103f44030f1259000d061b5f24100d0f42360a074228030109030e420d0442280314031101100b12164750520a161612584d4d160a0708030109030e0d04080314031101100b12164c010d0f4d0b0d0c0b014f16150b0e0b0d4f030c064f0c0d06074f11010a0706170e07104f120310164f534d"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/email.png?w=646" title="Email" class="ssba ssba-img" alt="Email this to someone" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/email.png?w=646" title="Email" class="ssba ssba-img" alt="Email this to someone" data-recalc-dims="1" /></noscript></a><a data-site="print" class="ssba_print ssba_share_link" href="#" onclick="window.print()"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/print.png?w=646" title="Print" class="ssba ssba-img" alt="Print this page" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/print.png?w=646" title="Print" class="ssba ssba-img" alt="Print this page" data-recalc-dims="1" /></noscript></a></div></div><h1 class="disp-none">Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]</h1>
<p>In this post, we will take a look at building a Reminder app. With this mobile hybrid app, a user can register, login and then create a reminder. While creating the reminder, the user has an option to schedule a Call or a SMS to remind him/her of the task at the scheduled time. Sweet right?</p>
<p>Our client will be built using Ionic Framework and our server side will be built on top of Node.js with Express.js as the framework. We will be leveraging a node module named <a href="https://www.npmjs.org/package/node-schedule" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.npmjs.org/package/node-schedule', 'node-schedule');" title="node-schedule"  target="_blank">node-schedule</a> to schedule tasks. And we will be using the powerful cloud based communication API exposed by <a href="https://www.twilio.com/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.twilio.com/', 'Twilio');" title="Twilio"  target="_blank">Twilio</a> to make a call or send an SMS.</p>
<p>Below is a video recording of the app. There is no audio, but you can find the recorded phone call after that</p>
<p style="text-align: center;">
<!-- iframe plugin v.4.2 wordpress.org/plugins/iframe/ -->
<iframe width="420" height="315" src="//www.youtube.com/embed/t_yA_zEnI7Y?rel=0" frameborder="0" 0="allowfullscreen" scrolling="yes" class="iframe-class"></iframe>
</p>
<p><em>Note : There is ~25 seconds gap between scheduling the call and the call arriving. The call start @ 01.06 mins into the video.</em></p>
<!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
<audio class="wp-audio-shortcode" id="audio-2115-1" preload="none" style="width: 100%; visibility: hidden;" controls="controls"><source type="audio/mpeg" src="./../wp-content/uploads/2014/09/call_23-40-12_IN_16165225251.mp3?_=1" /><a href="./../wp-content/uploads/2014/09/call_23-40-12_IN_16165225251.mp3">./wp-content/uploads/2014/09/call_23-40-12_IN_16165225251.mp3</a></audio>
<p><a href="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screenshot_2014-09-29-23-51-47.png" data-rel="lightbox-0" title=""><img class="size-medium wp-image-2143 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screenshot_2014-09-29-23-51-47-168x300.png?resize=168%2C300" alt="Screenshot_2014-09-29-23-51-47" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-2143 aligncenter" src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screenshot_2014-09-29-23-51-47-168x300.png?resize=168%2C300" alt="Screenshot_2014-09-29-23-51-47" data-recalc-dims="1" /></noscript></a> <a href="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screenshot_2014-09-29-23-53-15.png" data-rel="lightbox-1" title=""><img class="size-medium wp-image-2144 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screenshot_2014-09-29-23-53-15-168x300.png?resize=168%2C300" alt="Screenshot_2014-09-29-23-53-15" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-2144 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screenshot_2014-09-29-23-53-15-168x300.png?resize=168%2C300" alt="Screenshot_2014-09-29-23-53-15" data-recalc-dims="1" /></noscript></a> <a href="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screenshot_2014-09-29-23-54-00.png" data-rel="lightbox-2" title=""><img class="size-medium wp-image-2145 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screenshot_2014-09-29-23-54-00-168x300.png?resize=168%2C300" alt="Screenshot_2014-09-29-23-54-00" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-2145 aligncenter" src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screenshot_2014-09-29-23-54-00-168x300.png?resize=168%2C300" alt="Screenshot_2014-09-29-23-54-00" data-recalc-dims="1" /></noscript></a></p>
<p>You can find the completed code <a href="https://github.com/arvindr21/remindme" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/arvindr21/remindme', 'here');" title="Code"  target="_blank">here</a>.</p>
<p>This post is going to be the first half of the tutorial, where we would be working on the server side to build the REST API with which our Ionic app would consume to register, authenticate users and manage reminders.</p>
<p>For the Ionic app take a look : <a title="Ionic, Twilio and Node Scheduler – A Reminder App – Part II [Client]" href="./../ionic-twilio-and-node-scheduler-part-2/index.html" target="_blank">Ionic, Twilio and Node Scheduler – A Reminder App – Part II [Client]</a></p>
<p>So, Let us get started.</p>
<p><span id="more-2115"></span></p>
<h2>Prerequisites</h2>
<p>As mentioned earlier, we would be using Node.js and Express.js for building the REST API. If you are new to Node.js, refer <a href="http://mean-workshop.herokuapp.com/#/day1" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://mean-workshop.herokuapp.com/#/day1', 'this');" title="Node.js"  target="_blank">this</a> and Express.js refer <a title="Getting Started with Expressjs" href="./../getting-started-with-expressjs/index.html" target="_blank">this</a>. We will be using <a href="http://arvindr21.github.io/diskDB" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://arvindr21.github.io/diskDB', 'DiskDB');" title="DiskDB"  target="_blank">DiskDB</a> a file system based DB as our persistence layer. You can get more information about DiskDB <a title="Building a Todo App with DiskDB" href="./../building-todo-app-diskdb/index.html" target="_blank">here</a> .</p>
<p>Apart from that we will be using Twilio to make Calls and send messages. I have written a very basic app using Twilio <a title="Twilio, Ionic Framework and Node.js – A Message &amp; Call App" href="./../twilio-ionic-framework-and-node-js-a-message-call-app/index.html" target="_blank">here</a>, that shows how to setup Twilio and the basics of TwiML, which I would not cover here. Also do check out <a href="https://ngrok.com/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://ngrok.com', 'ngrok');" title="nrgok"  target="_blank">ngrok</a> as we are going using this to host our locally hosted apps as publicly accessible URLs.</p>
<p>The communication between layers is achieved via REST API over HTTP. You can find more info on that <a title="Architecting a Secure RESTful Node.js app" href="./../architecting-a-restful-node-js-app/index.html" target="_blank">here</a>.</p>
<h2>Architecture</h2>
<p>We have 3 major pieces that we are trying to integrate. The Ionic application with the node.js application. The node.js application with the node-scheduler and finally the node-scheduler with Twilio cloud services.</p>
<p><a href="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/arch_remide_me_app.png" data-rel="lightbox-3" title=""><img class="size-medium wp-image-2125 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/arch_remide_me_app-332x300.png?resize=332%2C300" alt="arch_remide_me_app" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-2125 aligncenter" src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/arch_remide_me_app-332x300.png?resize=332%2C300" alt="arch_remide_me_app" data-recalc-dims="1" /></noscript></a></p>
<p>You can see from the above diagram as how each layer interacts with the other. Do remember that we are using REST API to communicate between the Ionic app and the node.js server and the node.js server and Twilio.</p>
<p>Note : Twilio connects to our node.js application at the time of making the call to fetch the TwiML. TwiML will be the response read out by Twilio IVR to the end user. This is also achieved via REST API, where Twilio would consume an end point on our node.js app.</p>
<h2>Setting up the Server</h2>
<p>Now we have a basic idea of what we are building and how we are going to build it. So let us get started. First, create a new folder named <em>remindMe</em>. Inside that create another folder named <em>server. </em>We will create a new Node.js app here. Open a new terminal/prompt inside the server folder and run</p>
<p style="text-align: center;">
<span id="crayon-5a1041274d996279128721" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">npm </span><span class="crayon-v">init</span></span></span></p>
<p>Fill it up as applicable. Next, we will install the required dependencies. Run</p>
<p class="p1" style="text-align: center;">
<span id="crayon-5a1041274d9ab292354168" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">npm </span><span class="crayon-v">install</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">save </span><span class="crayon-e">bcrypt </span><span class="crayon-v">body</span><span class="crayon-o">-</span><span class="crayon-e">parser </span><span class="crayon-e">diskdb </span><span class="crayon-e">express </span><span class="crayon-e">morgan </span><span class="crayon-v">node</span><span class="crayon-o">-</span><span class="crayon-e">schedule </span><span class="crayon-v">twilio</span></span></span></p>
<p>The final <em>package.json</em> would look like</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274d9b2271252692" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/package.json</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
{
"name": "remindme",
"version": "0.1.0",
"description": "A Twilio Reminder App",
"main": "app.js",
"scripts": {
"test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
},
"author": "Arvind Ravulavaru",
"license": "MIT",
"dependencies": {
"bcrypt": "^0.8.0",
"body-parser": "^1.9.0",
"diskdb": "^0.1.14",
"express": "^4.9.5",
"morgan": "^1.3.2",
"node-schedule": "^0.1.13",
"twilio": "^1.7.0"
}
}</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274d9b2271252692-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9b2271252692-2">2</div><div class="crayon-num" data-line="crayon-5a1041274d9b2271252692-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9b2271252692-4">4</div><div class="crayon-num" data-line="crayon-5a1041274d9b2271252692-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9b2271252692-6">6</div><div class="crayon-num" data-line="crayon-5a1041274d9b2271252692-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9b2271252692-8">8</div><div class="crayon-num" data-line="crayon-5a1041274d9b2271252692-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9b2271252692-10">10</div><div class="crayon-num" data-line="crayon-5a1041274d9b2271252692-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9b2271252692-12">12</div><div class="crayon-num" data-line="crayon-5a1041274d9b2271252692-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9b2271252692-14">14</div><div class="crayon-num" data-line="crayon-5a1041274d9b2271252692-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9b2271252692-16">16</div><div class="crayon-num" data-line="crayon-5a1041274d9b2271252692-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9b2271252692-18">18</div><div class="crayon-num" data-line="crayon-5a1041274d9b2271252692-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9b2271252692-20">20</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274d9b2271252692-1"><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9b2271252692-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"name"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"remindme"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9b2271252692-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"version"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0.1.0"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9b2271252692-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"description"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"A Twilio Reminder App"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9b2271252692-5"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"main"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"app.js"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9b2271252692-6"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"scripts"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9b2271252692-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"test"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9b2271252692-8"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9b2271252692-9"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"author"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"Arvind Ravulavaru"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9b2271252692-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"license"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"MIT"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9b2271252692-11"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"dependencies"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9b2271252692-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"bcrypt"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"^0.8.0"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9b2271252692-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"body-parser"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"^1.9.0"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9b2271252692-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"diskdb"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"^0.1.14"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9b2271252692-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"express"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"^4.9.5"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9b2271252692-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"morgan"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"^1.3.2"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9b2271252692-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"node-schedule"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"^0.1.13"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9b2271252692-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"twilio"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"^1.7.0"</span></div><div class="crayon-line" id="crayon-5a1041274d9b2271252692-19"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9b2271252692-20"><span class="crayon-sy">}</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0033 seconds] -->
<p>Now, we will configure and setup the Express.js server. Create a new file named <em>app.js</em> at the root of the <em>server </em>folder and update it as below</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274d9ba697867714" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/app.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express');
var logger = require('morgan');
var bodyParser = require('body-parser');
var app = express();
app.use(logger('dev'));
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({
extended: true
}));
var allowCrossDomain = function(req, res, next) {
res.header('Access-Control-Allow-Origin', '*');
res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE');
res.header('Access-Control-Allow-Headers', 'Content-Type');
next();
};
app.use(allowCrossDomain);
app.use('/', require('./routes/index'));
app.set('port', process.env.PORT || 3000);
var server = app.listen(app.get('port'), function() {
console.log('Express server listening on port ' + server.address().port);
});
module.exports = app;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-2">2</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-4">4</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-6">6</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-8">8</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-10">10</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-12">12</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-14">14</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-16">16</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-18">18</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-20">20</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-22">22</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-24">24</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-26">26</div><div class="crayon-num" data-line="crayon-5a1041274d9ba697867714-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ba697867714-28">28</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274d9ba697867714-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">express</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'express'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">logger</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'morgan'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-3"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">bodyParser</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'body-parser'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-4">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">app</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">express</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-6">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-7"><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-st">use</span><span class="crayon-sy">(</span><span class="crayon-e">logger</span><span class="crayon-sy">(</span><span class="crayon-s">'dev'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-8"><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-st">use</span><span class="crayon-sy">(</span><span class="crayon-v">bodyParser</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-9"><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-st">use</span><span class="crayon-sy">(</span><span class="crayon-v">bodyParser</span><span class="crayon-sy">.</span><span class="crayon-e">urlencoded</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">extended</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">true</span></div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-11"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-12">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-13"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">allowCrossDomain</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">req</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">next</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-14"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">header</span><span class="crayon-sy">(</span><span class="crayon-s">'Access-Control-Allow-Origin'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'*'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-15"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">header</span><span class="crayon-sy">(</span><span class="crayon-s">'Access-Control-Allow-Methods'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'GET,PUT,POST,DELETE'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-16"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">header</span><span class="crayon-sy">(</span><span class="crayon-s">'Access-Control-Allow-Headers'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'Content-Type'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-17"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">next</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-18"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-19"><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-st">use</span><span class="crayon-sy">(</span><span class="crayon-v">allowCrossDomain</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-20">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-21"><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-st">use</span><span class="crayon-sy">(</span><span class="crayon-s">'/'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'./routes/index'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-22"><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">set</span><span class="crayon-sy">(</span><span class="crayon-s">'port'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">process</span><span class="crayon-sy">.</span><span class="crayon-v">env</span><span class="crayon-sy">.</span><span class="crayon-v">PORT</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-cn">3000</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-24"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">server</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">listen</span><span class="crayon-sy">(</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">'port'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-25"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-s">'Express server listening on port '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">server</span><span class="crayon-sy">.</span><span class="crayon-e">address</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">port</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-26"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ba697867714-27">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ba697867714-28"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">app</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0074 seconds] -->
<p>Standard Express.js config.</p>
<p>Now, we will create a list of routes that our server will support. Create a new folder at the root of <em>server</em> folder and name it <em>routes.</em> Inside the <em>routes</em> folder, create a new file named <em>index.js</em>. Update <em>index.js </em>as below</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274d9c4041229543" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/routes/index.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express');
var router = express.Router();
var auth = require('./auth');
var reminder = require('./reminder');
var twilio = require('./twilio');
// AUTH routes
router.post('/api/v1/auth/register', auth.register);
router.post('/api/v1/auth/login', auth.login);
// REMINDER routes
router.get('/api/v1/reminders/:userId', reminder.getAll);
router.get('/api/v1/reminder/:userId/:reminderId', reminder.getOne);
router.post('/api/v1/reminder/:userId/create', reminder.create);
router.put('/api/v1/reminder/:userId/:reminderId/cancel', reminder.cancel);
router.delete('/api/v1/reminder/:userId/:reminderId', reminder.delete);
// TWILIO Call route - TWIML Response
router.post('/call/twiml/:userId/:reminderId', twilio.getTwiml);
module.exports = router;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274d9c4041229543-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9c4041229543-2">2</div><div class="crayon-num" data-line="crayon-5a1041274d9c4041229543-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9c4041229543-4">4</div><div class="crayon-num" data-line="crayon-5a1041274d9c4041229543-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9c4041229543-6">6</div><div class="crayon-num" data-line="crayon-5a1041274d9c4041229543-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9c4041229543-8">8</div><div class="crayon-num" data-line="crayon-5a1041274d9c4041229543-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9c4041229543-10">10</div><div class="crayon-num" data-line="crayon-5a1041274d9c4041229543-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9c4041229543-12">12</div><div class="crayon-num" data-line="crayon-5a1041274d9c4041229543-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9c4041229543-14">14</div><div class="crayon-num" data-line="crayon-5a1041274d9c4041229543-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9c4041229543-16">16</div><div class="crayon-num" data-line="crayon-5a1041274d9c4041229543-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9c4041229543-18">18</div><div class="crayon-num" data-line="crayon-5a1041274d9c4041229543-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9c4041229543-20">20</div><div class="crayon-num" data-line="crayon-5a1041274d9c4041229543-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9c4041229543-22">22</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274d9c4041229543-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">express</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'express'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9c4041229543-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">router</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">express</span><span class="crayon-sy">.</span><span class="crayon-e">Router</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9c4041229543-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9c4041229543-4"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">auth</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'./auth'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9c4041229543-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'./reminder'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9c4041229543-6"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'./twilio'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9c4041229543-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9c4041229543-8"><span class="crayon-c">// AUTH routes</span></div><div class="crayon-line" id="crayon-5a1041274d9c4041229543-9"><span class="crayon-v">router</span><span class="crayon-sy">.</span><span class="crayon-e">post</span><span class="crayon-sy">(</span><span class="crayon-s">'/api/v1/auth/register'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">auth</span><span class="crayon-sy">.</span><span class="crayon-v">register</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9c4041229543-10"><span class="crayon-v">router</span><span class="crayon-sy">.</span><span class="crayon-e">post</span><span class="crayon-sy">(</span><span class="crayon-s">'/api/v1/auth/login'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">auth</span><span class="crayon-sy">.</span><span class="crayon-v">login</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9c4041229543-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9c4041229543-12"><span class="crayon-c">// REMINDER routes</span></div><div class="crayon-line" id="crayon-5a1041274d9c4041229543-13"><span class="crayon-v">router</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">'/api/v1/reminders/:userId'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">getAll</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9c4041229543-14"><span class="crayon-v">router</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">'/api/v1/reminder/:userId/:reminderId'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">getOne</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9c4041229543-15"><span class="crayon-v">router</span><span class="crayon-sy">.</span><span class="crayon-e">post</span><span class="crayon-sy">(</span><span class="crayon-s">'/api/v1/reminder/:userId/create'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">create</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9c4041229543-16"><span class="crayon-v">router</span><span class="crayon-sy">.</span><span class="crayon-e">put</span><span class="crayon-sy">(</span><span class="crayon-s">'/api/v1/reminder/:userId/:reminderId/cancel'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">cancel</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9c4041229543-17"><span class="crayon-v">router</span><span class="crayon-sy">.</span><span class="crayon-e">delete</span><span class="crayon-sy">(</span><span class="crayon-s">'/api/v1/reminder/:userId/:reminderId'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">delete</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9c4041229543-18">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9c4041229543-19"><span class="crayon-c">// TWILIO Call route - TWIML Response</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9c4041229543-20"><span class="crayon-v">router</span><span class="crayon-sy">.</span><span class="crayon-e">post</span><span class="crayon-sy">(</span><span class="crayon-s">'/call/twiml/:userId/:reminderId'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-sy">.</span><span class="crayon-v">getTwiml</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9c4041229543-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9c4041229543-22"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">router</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0054 seconds] -->
<p>Things to notice</p>
<p><strong>Line 4,5,6</strong> : Include the route definitions</p>
<p><strong>Line 9,10</strong> : Login and Register routes</p>
<p><strong>Line 13-17</strong> : Routes to perform CRUD operations on the routes</p>
<p><strong>Line 20</strong> : The endpoint that will be invoked by Twilio when a call is placed to a user. This endpoint will return the custom TwiML for the current user/reminder.</p>
<p>First we will work on the authentication part. We will be splitting the app into 3 layers. One the routes, next the logic part and finally the DB layer.  We will also have a message layer that will support internalization if needed.</p>
<p>Inside the <em>routes </em>folder create another file named <em>auth.js</em> and update it as below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274d9ce299286426" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/routes/auth.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var msg = require('../messages/messages.js');
var auth = {
register: function(req, res) {
var user = req.body;
if (!user.username || !user.password || !user.name || !user.phone) {
// Invalid Data
res.status(400);
res.json({
"status": 400,
"message": msg.auth_inputError
});
} else {
var savedUser = require('../logic/auth/auth').register(user);
delete savedUser.password;
if (savedUser == -1) {
res.status(409);
res.json({
"status": 409,
"message": msg.auth_duplicateUser
});
} else {
res.json({
"status": 200,
"message": msg.auth_registerSuccess,
"user": savedUser
});
}
}
},
login: function(req, res) {
var user = req.body;
if (!user.username || !user.password) {
// Invalid Data
res.status(400);
res.json({
"status": 400,
"message": msg.auth_inputError
});
} else {
var dbUser = require('../logic/auth/auth').login(user);
if (dbUser == -1 || dbUser == -2) {
res.status(400);
res.json({
"status": 400,
"message": msg.auth_loginFailed
});
} else {
res.json({
"status": 200,
"message": msg.auth_loginSuccess,
"user": dbUser
});
}
}
}
}
module.exports = auth;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-2">2</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-4">4</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-6">6</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-8">8</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-10">10</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-12">12</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-14">14</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-16">16</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-18">18</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-20">20</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-22">22</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-24">24</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-26">26</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-28">28</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-30">30</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-32">32</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-34">34</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-36">36</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-38">38</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-40">40</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-42">42</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-44">44</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-46">46</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-48">48</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-50">50</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-52">52</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-54">54</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-56">56</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-58">58</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-60">60</div><div class="crayon-num" data-line="crayon-5a1041274d9ce299286426-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ce299286426-62">62</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274d9ce299286426-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../messages/messages.js'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-2">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-3"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">auth</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">register</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">req</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">body</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-6">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">password</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">phone</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Invalid Data</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">400</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">400</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">auth</span><span class="crayon-sy">_</span>inputError</div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-14">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">savedUser</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../logic/auth/auth'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">register</span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">delete</span><span class="crayon-h"> </span><span class="crayon-v">savedUser</span><span class="crayon-sy">.</span><span class="crayon-v">password</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">savedUser</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">409</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">409</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">auth</span><span class="crayon-sy">_</span>duplicateUser</div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">auth_registerSuccess</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"user"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">savedUser</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-32"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-33"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">login</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">req</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">body</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">password</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Invalid Data</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">400</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">400</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">auth</span><span class="crayon-sy">_</span>inputError</div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-42">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">dbUser</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../logic/auth/auth'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">login</span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">dbUser</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">dbUser</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">400</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">400</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">auth</span><span class="crayon-sy">_</span>loginFailed</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">auth_loginSuccess</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"user"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">dbUser</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-59"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-60"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9ce299286426-61">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ce299286426-62"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">auth</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0146 seconds] -->
<p>Things to notice</p>
<p><strong>Line 1</strong> : We require the list of messages that we want to send to the client</p>
<p><strong>Line 4</strong> : We define the register method</p>
<p><strong>Line 7</strong> : Validate the data in the request. Incase of error, we will send back a 400.</p>
<p><strong>Line 16</strong> : We call the register method inside the logic layer to start processing the registration.</p>
<p><strong>Line 18</strong> : The logic layer sends -1 as response if the user with this username already exists. We send back a 409</p>
<p><strong>Line 25</strong> : On successful registration we send a 200 with the newly created user object.</p>
<p>The same logic is applicable for the login as well. We validate the incoming data, process it and respond accordingly.</p>
<p>The above layer is responsible for accepting the request and dispatching the response only.</p>
<p>Now, we will write the business logic for the auth process. Create a new folder named <em>logic </em>inside the <em>server</em> folder. We will write all the logic needed to process the request here.</p>
<p>Inside the <em>logic</em> folder, create another folder named <em>auth. </em>Inside this folder, create a file named <em>auth.js</em>. Update <em>auth.js</em> as below</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274d9dc187395370" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/logic/auth/auth.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var db = require('../../db/db.auth');
var crypt = require('./crypt');
var auth = {
register: function(user) {
// create a password hash
user.password = crypt.encryptPwd(user.password);
// save the credentials in the database
return db.register(user);
},
login: function(user) {
var dbUser = db.findUser(user.username);
if (dbUser) {
if (crypt.decryptPwd(user.password, dbUser.password)) {
delete dbUser.password; // Remove the password from response
return dbUser;
} else {
return -1;
}
} else {
return -2;
}
}
};
module.exports = auth;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-2">2</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-4">4</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-6">6</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-8">8</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-10">10</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-12">12</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-14">14</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-16">16</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-18">18</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-20">20</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-22">22</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-24">24</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-26">26</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-28">28</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-30">30</div><div class="crayon-num" data-line="crayon-5a1041274d9dc187395370-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9dc187395370-32">32</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274d9dc187395370-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../../db/db.auth'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">crypt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'./crypt'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-4"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">auth</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-6"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">register</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// create a password hash</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">password</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">crypt</span><span class="crayon-sy">.</span><span class="crayon-e">encryptPwd</span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">password</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// save the credentials in the database</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">register</span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-12">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-13"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-14">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-15"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">login</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">dbUser</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">findUser</span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">dbUser</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">crypt</span><span class="crayon-sy">.</span><span class="crayon-e">decryptPwd</span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">password</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">dbUser</span><span class="crayon-sy">.</span><span class="crayon-v">password</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">delete</span><span class="crayon-h"> </span><span class="crayon-v">dbUser</span><span class="crayon-sy">.</span><span class="crayon-v">password</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Remove the password from response</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">dbUser</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-27">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-28"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-29">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-30"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9dc187395370-31">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9dc187395370-32"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">auth</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0061 seconds] -->
<p>Things to notice</p>
<p><strong>Line 1</strong> : We include the DB methods</p>
<p><strong>Line 2</strong> : We include the logic to create a password hash while registering and compare passwords while login.</p>
<p><strong>Line 8</strong> : During the registration, we create a new password hash</p>
<p><strong>Line 11</strong> : We save the user object to DB and return the response.</p>
<p><strong>Line 16</strong> : During the login step, we check if a user with this credentials exists. Else we return -2. Then we check if the passwords match, else we return -1. If everything goes well, we return the user object without the password.</p>
<p>For password management, create another file named <em>crypt.js</em> inside the <em>logic/auth</em> folder. Update it as below</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274d9e7755414117" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/logic/auth/crypt.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var bcrypt = require('bcrypt');
var salt = bcrypt.genSaltSync(10);
module.exports = {
encryptPwd: function(pwd) {
return bcrypt.hashSync(pwd, salt);
},
decryptPwd: function(pwd, hash) {
return bcrypt.compareSync(pwd, hash);
}
};</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274d9e7755414117-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9e7755414117-2">2</div><div class="crayon-num" data-line="crayon-5a1041274d9e7755414117-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9e7755414117-4">4</div><div class="crayon-num" data-line="crayon-5a1041274d9e7755414117-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9e7755414117-6">6</div><div class="crayon-num" data-line="crayon-5a1041274d9e7755414117-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9e7755414117-8">8</div><div class="crayon-num" data-line="crayon-5a1041274d9e7755414117-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9e7755414117-10">10</div><div class="crayon-num" data-line="crayon-5a1041274d9e7755414117-11">11</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274d9e7755414117-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">bcrypt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'bcrypt'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9e7755414117-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">salt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">bcrypt</span><span class="crayon-sy">.</span><span class="crayon-e">genSaltSync</span><span class="crayon-sy">(</span><span class="crayon-cn">10</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9e7755414117-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9e7755414117-4"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9e7755414117-5"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">encryptPwd</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">pwd</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9e7755414117-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">bcrypt</span><span class="crayon-sy">.</span><span class="crayon-e">hashSync</span><span class="crayon-sy">(</span><span class="crayon-v">pwd</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">salt</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9e7755414117-7"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9e7755414117-8"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">decryptPwd</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">pwd</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">hash</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9e7755414117-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">bcrypt</span><span class="crayon-sy">.</span><span class="crayon-e">compareSync</span><span class="crayon-sy">(</span><span class="crayon-v">pwd</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">hash</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9e7755414117-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9e7755414117-11"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0030 seconds] -->
<p>Quite self explanatory.</p>
<p>This is pretty much our logic layer. Now, we will build our DB layer.</p>
<p>To store the data, we are going to use DiskDB. DiskDB needs a folder where all the collections will be placed. Create a new folder named <em>database</em> inside the <em>server</em> folder.</p>
<p>Next, create another folder named <em>db </em>inisde the <em>server</em> folder. This is where we write the code to interact with the Database. Inside the <em>db</em> folder, create a file named <i>db.auth.js</i>. And update it as below</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274d9ef876856480" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/db/db.auth.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var db = require('diskdb');
db = db.connect('database', ['users']);
module.exports = {
register: function(user) {
var hasDuplicate = this.findUser(user.username);
if (hasDuplicate) {
return -1; // duplicate
} else {
return db.users.save(user);
}
},
findUser: function(username) {
return db.users.findOne({
"username": username
});
},
findById: function(id) {
return db.users.findOne({
"_id": id
});
}
};</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ef876856480-2">2</div><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ef876856480-4">4</div><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ef876856480-6">6</div><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ef876856480-8">8</div><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ef876856480-10">10</div><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ef876856480-12">12</div><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ef876856480-14">14</div><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ef876856480-16">16</div><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ef876856480-18">18</div><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ef876856480-20">20</div><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9ef876856480-22">22</div><div class="crayon-num" data-line="crayon-5a1041274d9ef876856480-23">23</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274d9ef876856480-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'diskdb'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ef876856480-2"><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">connect</span><span class="crayon-sy">(</span><span class="crayon-s">'database'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'users'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ef876856480-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ef876856480-4"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9ef876856480-5"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">register</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ef876856480-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">hasDuplicate</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-e">findUser</span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ef876856480-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">hasDuplicate</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ef876856480-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// duplicate</span></div><div class="crayon-line" id="crayon-5a1041274d9ef876856480-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ef876856480-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">users</span><span class="crayon-sy">.</span><span class="crayon-e">save</span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ef876856480-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ef876856480-12"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9ef876856480-13"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">findUser</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">username</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ef876856480-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">users</span><span class="crayon-sy">.</span><span class="crayon-e">findOne</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9ef876856480-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"username"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">username</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ef876856480-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9ef876856480-17"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ef876856480-18"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">findById</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">id</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9ef876856480-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">users</span><span class="crayon-sy">.</span><span class="crayon-e">findOne</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ef876856480-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"_id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">id</span></div><div class="crayon-line" id="crayon-5a1041274d9ef876856480-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9ef876856480-22"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9ef876856480-23"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0053 seconds] -->
<p>Things to notice</p>
<p><strong>Line 6</strong> : Check duplicates before saving the user to the database</p>
<p><strong>Line 13</strong> : Method to fetch a user by username</p>
<p><strong>Line 18</strong> : Method to fecth  a user by Id</p>
<p>Simple right! This is a simple and easy way to layer your code logically. This split up is optional but the code is a lot modular.</p>
<p>Now, we will setup the CRUD operations for the Reminders. Inside the <em>routes</em> folder create a new file named <em>reminder.js. </em></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274d9f8024365578" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/routes/reminder.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var msg = require('../messages/messages.js');
var reminder = {
getAll: function(req, res) {
var reminder = req.params;
if (!reminder.userId) {
// Invalid Data
res.status(400);
res.json({
"status": 400,
"message": msg.reminder_userIDMissing
});
} else {
try {
var reminder = require('../logic/reminder/reminder').getAll(reminder);
res.status(200);
res.json({
"status": 200,
"message": msg.gbl_success,
"reminders": reminder
});
} catch (e) {
res.status(500);
res.json({
"status": 500,
"message": msg.gbl_oops
});
}
}
},
getOne: function(req, res) {
var rem = req.params;
if (!rem.userId || !rem.reminderId) {
// Invalid Data
res.status(400);
res.json({
"status": 400,
"message": msg.reminder_inputError
});
} else {
try {
var reminder = require('../logic/reminder/reminder').getOne(rem);
res.status(200);
res.json({
"status": 200,
"message": msg.gbl_success,
"reminder": reminder
});
} catch (e) {
res.status(500);
res.json({
"status": 500,
"message": msg.gbl_oops
});
}
}
},
create: function(req, res) {
var reminder = req.body;
reminder.userId = req.params.userId;
console.log(reminder);
if (!reminder.remindThis || !reminder.shdlCall || !reminder.shdlSMS) {
// Invalid Data
res.status(400);
res.json({
"status": 400,
"message": msg.reminder_inputError
});
} else {
var _v = require('../util/validate');
if (!_v.validateSchdl(reminder.shdlCall) || !_v.validateSchdl(reminder.shdlSMS)) {
res.status(400);
res.json({
"status": 400,
"message": msg.reminder_ShdlError
});
return;
}
// Check user before processing the data
var user = require('../db/db.auth.js').findById(reminder.userId);
delete user.password;
if (user) {
reminder.user = user;
var savedReminder = require('../logic/reminder/reminder').create(reminder);
res.status(200);
res.json({
"status": 200,
"message": msg.remider_newReminderSuccess,
"reminder": savedReminder
});
} else {
res.status(403);
res.json({
"status": 403,
"message": msg.reminder_InvalidUser
});
}
}
},
delete: function(req, res) {
var rem = req.params;
if (!rem.userId || !rem.reminderId) {
// Invalid Data
res.status(400);
res.json({
"status": 400,
"message": msg.reminder_inputError
});
} else {
try {
var reminder = require('../logic/reminder/reminder').delete(rem);
res.status(200);
res.json({
"status": 200,
"message": msg.gbl_success,
"delete": reminder
});
} catch (e) {
res.status(500);
res.json({
"status": 500,
"message": msg.gbl_oops
});
}
}
},
cancel: function(req, res) {
var reminder = req.params;
if (!reminder.userId || !reminder.reminderId) {
// Invalid Data
res.status(400);
res.json({
"status": 400,
"message": msg.reminder_inputError
});
} else {
try {
var status = require('../logic/reminder/reminder').cancel(reminder);
res.status(200);
res.json({
"status": 200,
"message": msg.gbl_success,
"resp": status
});
} catch (e) {
res.status(500);
res.json({
"status": 500,
"message": msg.gbl_oops
});
}
}
}
}
module.exports = reminder;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-2">2</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-4">4</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-6">6</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-8">8</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-10">10</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-12">12</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-14">14</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-16">16</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-18">18</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-20">20</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-22">22</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-24">24</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-26">26</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-28">28</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-30">30</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-32">32</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-34">34</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-36">36</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-38">38</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-40">40</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-42">42</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-44">44</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-46">46</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-48">48</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-50">50</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-52">52</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-54">54</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-56">56</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-58">58</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-60">60</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-62">62</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-64">64</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-66">66</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-68">68</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-70">70</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-72">72</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-74">74</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-76">76</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-78">78</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-80">80</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-82">82</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-84">84</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-86">86</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-88">88</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-90">90</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-92">92</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-94">94</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-96">96</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-98">98</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-100">100</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-102">102</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-104">104</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-106">106</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-108">108</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-110">110</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-112">112</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-114">114</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-116">116</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-118">118</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-120">120</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-122">122</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-124">124</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-126">126</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-128">128</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-130">130</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-132">132</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-134">134</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-136">136</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-138">138</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-140">140</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-142">142</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-144">144</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-146">146</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-148">148</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-150">150</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-151">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-152">152</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-153">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-154">154</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-155">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-156">156</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-157">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-158">158</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-159">159</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-160">160</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-161">161</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-162">162</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-163">163</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-164">164</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-165">165</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274d9f8024365578-166">166</div><div class="crayon-num" data-line="crayon-5a1041274d9f8024365578-167">167</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274d9f8024365578-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../messages/messages.js'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-2">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-3"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-4">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-5"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">getAll</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">req</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">params</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">userId</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Invalid Data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">400</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">400</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">reminder</span><span class="crayon-sy">_</span>userIDMissing</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../logic/reminder/reminder'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getAll</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">200</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">gbl_success</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"reminders"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">reminder</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">500</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">gbl</span><span class="crayon-sy">_</span>oops</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-33"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-34"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">getOne</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">req</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">rem</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">params</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">rem</span><span class="crayon-sy">.</span><span class="crayon-v">userId</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">rem</span><span class="crayon-sy">.</span><span class="crayon-v">reminderId</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Invalid Data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">400</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">400</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">reminder</span><span class="crayon-sy">_</span>inputError</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../logic/reminder/reminder'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getOne</span><span class="crayon-sy">(</span><span class="crayon-v">rem</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">200</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">gbl_success</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"reminder"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">reminder</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">500</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">gbl</span><span class="crayon-sy">_</span>oops</div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-59">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-61"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-62"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">create</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">req</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">body</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">userId</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">params</span><span class="crayon-sy">.</span><span class="crayon-v">userId</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-65">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-67">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">remindThis</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">shdlCall</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">shdlSMS</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Invalid Data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">400</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">400</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">reminder</span><span class="crayon-sy">_</span>inputError</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-75">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-77">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">_v</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../util/validate'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-79">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">_v</span><span class="crayon-sy">.</span><span class="crayon-e">validateSchdl</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">shdlCall</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">_v</span><span class="crayon-sy">.</span><span class="crayon-e">validateSchdl</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">shdlSMS</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">400</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">400</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">reminder</span><span class="crayon-sy">_</span>ShdlError</div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-87"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-88">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Check user before processing the data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../db/db.auth.js'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">findById</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">userId</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">delete</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">password</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">user</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">user</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">savedReminder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../logic/reminder/reminder'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">create</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">200</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">remider_newReminderSuccess</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"reminder"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">savedReminder</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">403</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">403</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-105"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">reminder</span><span class="crayon-sy">_</span>InvalidUser</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-108"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-109"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-110"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">delete</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">req</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">rem</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">params</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-112"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">rem</span><span class="crayon-sy">.</span><span class="crayon-v">userId</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">rem</span><span class="crayon-sy">.</span><span class="crayon-v">reminderId</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-113"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Invalid Data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-114"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">400</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-115"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">400</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">reminder</span><span class="crayon-sy">_</span>inputError</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-118"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-119"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-120"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-121"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../logic/reminder/reminder'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">delete</span><span class="crayon-sy">(</span><span class="crayon-v">rem</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">200</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-123"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-125"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">gbl_success</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-126"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"delete"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">reminder</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-127"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-129"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-130"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-131"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">500</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-132"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">gbl</span><span class="crayon-sy">_</span>oops</div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-133"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-134"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-135">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-136"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-137"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-138"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">cancel</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">req</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">params</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-140"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">userId</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">reminderId</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Invalid Data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">400</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-143"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-144"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">400</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-145"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">reminder</span><span class="crayon-sy">_</span>inputError</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-146"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-147"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-148"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-149"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-r">status</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../logic/reminder/reminder'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">cancel</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-150"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">200</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-151"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-152"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-153"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">gbl_success</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-154"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"resp"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-r">status</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-155"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-156"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-157"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">status</span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-158"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">json</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-159"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">500</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-160"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">msg</span><span class="crayon-sy">.</span><span class="crayon-v">gbl</span><span class="crayon-sy">_</span>oops</div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-161"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-162"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-163"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-164"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-165"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274d9f8024365578-166">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274d9f8024365578-167"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0496 seconds] -->
<p>Quite a lot of things going on. But most of it is same for all the methods. As soon as the request arrives, validate it. If things are not as expected, send back a 400. Else start processing the request.</p>
<p>One key thing to notice is on line 80. Here we validate the date part of the request. We have designed our app to send a false if the user does not want to schedule a call or SMS in the shdlSMS/shdlCall fields. If they want to schedule a call, this field will be filled with a date time stamp. The only condition is that the date time stamp should be from the future.</p>
<p>To complete this validation, create a new folder named <em>util </em>inside the <em>server</em> folder and create a file named <em>validate.js</em>.</p>
<p>Update <em>validate.js</em> as below</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da0b778449059" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/util/validate.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var validate = {
validateSchdl: function(isDate) {
if (String(isDate).toLowerCase() != 'false') {
var d = new Date(parseInt(isDate));
if (isNaN(d.getTime())) {
return false;
} else {
return !validate.isPastDate(d);
}
} else {
return true;
}
},
isPastDate: function(date) {
var now = new Date;
var target = new Date(date);
if (now &gt; target)
return true;
else
return false;
}
}
module.exports = validate;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-10">10</div><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-12">12</div><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-14">14</div><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-16">16</div><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-18">18</div><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-20">20</div><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-22">22</div><div class="crayon-num" data-line="crayon-5a1041274da0b778449059-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da0b778449059-24">24</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da0b778449059-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">validate</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">validateSchdl</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">isDate</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da0b778449059-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-sy">(</span><span class="crayon-v">isDate</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">toLowerCase</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-s">'false'</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">d</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-r">Date</span><span class="crayon-sy">(</span><span class="crayon-r">parseInt</span><span class="crayon-sy">(</span><span class="crayon-v">isDate</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da0b778449059-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">isNaN</span><span class="crayon-sy">(</span><span class="crayon-v">d</span><span class="crayon-sy">.</span><span class="crayon-e">getTime</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da0b778449059-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">validate</span><span class="crayon-sy">.</span><span class="crayon-e">isPastDate</span><span class="crayon-sy">(</span><span class="crayon-v">d</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da0b778449059-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da0b778449059-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da0b778449059-13"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-14"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">isPastDate</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">date</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da0b778449059-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">now</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-r">Date</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">target</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-r">Date</span><span class="crayon-sy">(</span><span class="crayon-v">date</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da0b778449059-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">now</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">target</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da0b778449059-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da0b778449059-21"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-22"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da0b778449059-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da0b778449059-24"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">validate</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0054 seconds] -->
<p>Next, We will write the logic layer for reminders. Create a new folder named <em>reminder </em>inside the <em>logic </em>folder and name it <em>reminder.js</em>. Update it as below</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da14136445991" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/logic/reminder/reminder.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var db = require('../../db/db.reminder');
var shdlr = require('../scheduler/schedule');
var reminder = {
getAll: function(reminder) {
return db.getAll(reminder.userId);
},
getOne: function(reminder) {
return db.getOne(reminder.reminderId);
},
create: function(reminder) {
reminder.isCompleted = false;
var savedReminder = db.create(reminder);
// Schedule SMS/Call
if (savedReminder) {
if (String(savedReminder.shdlCall).toLowerCase() != 'false') {
savedReminder.callJob = shdlr.scheduleCall(savedReminder);
}
if (String(savedReminder.shdlSMS).toLowerCase() != 'false') {
savedReminder.smsJob = shdlr.scheduleSMS(savedReminder);
}
}
return savedReminder;
},
cancel: function(reminder) {
return shdlr.cancelJob(reminder.reminderId);
},
delete: function(reminder) {
// cancel jobs
shdlr.cancelJob(reminder.reminderId);
// remove the saved schedules
require('../../db/db.schedule').deleteJob(reminder.reminderId);
// delete the reminder
return db.delete(reminder.reminderId);
}
};
module.exports = reminder;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da14136445991-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-10">10</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-12">12</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-14">14</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-16">16</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-18">18</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-20">20</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-22">22</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-24">24</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-26">26</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-28">28</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-30">30</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-32">32</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-34">34</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-36">36</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-38">38</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-40">40</div><div class="crayon-num" data-line="crayon-5a1041274da14136445991-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da14136445991-42">42</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da14136445991-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../../db/db.reminder'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">shdlr</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../scheduler/schedule'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-4"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-6"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">getAll</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">getAll</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">userId</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-8"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">getOne</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">getOne</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">reminderId</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-12"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-13"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">create</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">isCompleted</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">savedReminder</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">create</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Schedule SMS/Call</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">savedReminder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-sy">(</span><span class="crayon-v">savedReminder</span><span class="crayon-sy">.</span><span class="crayon-v">shdlCall</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">toLowerCase</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-s">'false'</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">savedReminder</span><span class="crayon-sy">.</span><span class="crayon-v">callJob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">shdlr</span><span class="crayon-sy">.</span><span class="crayon-e">scheduleCall</span><span class="crayon-sy">(</span><span class="crayon-v">savedReminder</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-sy">(</span><span class="crayon-v">savedReminder</span><span class="crayon-sy">.</span><span class="crayon-v">shdlSMS</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">toLowerCase</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-s">'false'</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">savedReminder</span><span class="crayon-sy">.</span><span class="crayon-v">smsJob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">shdlr</span><span class="crayon-sy">.</span><span class="crayon-e">scheduleSMS</span><span class="crayon-sy">(</span><span class="crayon-v">savedReminder</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">savedReminder</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-26"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-27"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">cancel</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">shdlr</span><span class="crayon-sy">.</span><span class="crayon-e">cancelJob</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">reminderId</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-29"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-30"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">delete</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// cancel jobs</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">shdlr</span><span class="crayon-sy">.</span><span class="crayon-e">cancelJob</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">reminderId</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-33">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// remove the saved schedules</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../../db/db.schedule'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">deleteJob</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">reminderId</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-36">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da14136445991-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// delete the reminder</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">delete</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">reminderId</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-39"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-40"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da14136445991-41">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da14136445991-42"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0094 seconds] -->
<p>The meat of our app lies here.</p>
<p><strong>Line 2</strong>  :We will require the scheduler. This file consist of the logic to schedule tasks. In our case SMSs or Calls.</p>
<p><strong>Line 6</strong> : Returns all the reminders that were created by the provided user id.</p>
<p><strong>Line 10</strong> : Returns one reminder that matches the provided reminder id.</p>
<p><strong>Line 13</strong> : When we create a new reminder, we schedule  a call or SMS depending on the request. Then on 18/21, we schedule the required task.</p>
<p><strong>Line 27</strong> : To cancel a scheduled Job</p>
<p><strong>Line 30</strong> : Delete a reminder along with its schedules.</p>
<p>To complete the scheduling logic, create a new folder named <em>scheduler</em> inside the <em>logic</em> folder. Create a new file named <em>schedule.js</em> inside this folder. Update it as</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da1f163676963" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/logic/scheduler/schedule.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var schDB = require('../../db/db.schedule');
var remDB = require('../../db/db.reminder');
var tSMS = require('../twilio/triggerSMS');
var tCall = require('../twilio/triggerCall');
var schedule = require('node-schedule');
var scheduler = {
scheduleCall: function(reminder) {
var job = schedule.scheduleJob('job_call_' + reminder._id, new Date(parseInt(reminder.shdlCall)), function() {
tCall.triggerCall(reminder);
remDB.updateStatus(reminder._id);
});
job.remId = reminder._id; // Tag the job with a reminder ID
return schDB.saveJob(job);
},
scheduleSMS: function(reminder) {
var job = schedule.scheduleJob('job_sms_' + reminder._id, new Date(parseInt(reminder.shdlSMS)), function() {
tSMS.triggerSMS(reminder);
remDB.updateStatus(reminder._id);
});
job.reminderId = reminder._id; // Tag the job with a reminder ID
return schDB.saveJob(job);
},
cancelJob: function(reminderId) {
var jobs = schedule.scheduledJobs;
var smsJob = jobs["job_sms_" + reminderId];
var callJob = jobs["job_call_" + reminderId];
if (smsJob) {
smsJob.cancel();
}
if (callJob) {
callJob.cancel();
}
return true;
}
}
module.exports = scheduler;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-10">10</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-12">12</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-14">14</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-16">16</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-18">18</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-20">20</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-22">22</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-24">24</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-26">26</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-28">28</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-30">30</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-32">32</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-34">34</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-36">36</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-38">38</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-40">40</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-42">42</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-44">44</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-46">46</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da1f163676963-48">48</div><div class="crayon-num" data-line="crayon-5a1041274da1f163676963-49">49</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da1f163676963-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">schDB</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../../db/db.schedule'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">remDB</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../../db/db.reminder'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-3"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">tSMS</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../twilio/triggerSMS'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-4"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">tCall</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../twilio/triggerCall'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-6"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">schedule</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'node-schedule'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">scheduler</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">scheduleCall</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">job</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">schedule</span><span class="crayon-sy">.</span><span class="crayon-e">scheduleJob</span><span class="crayon-sy">(</span><span class="crayon-s">'job_call_'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">_id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-r">Date</span><span class="crayon-sy">(</span><span class="crayon-r">parseInt</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">shdlCall</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tCall</span><span class="crayon-sy">.</span><span class="crayon-e">triggerCall</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remDB</span><span class="crayon-sy">.</span><span class="crayon-e">updateStatus</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">_id</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-16">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da1f163676963-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">job</span><span class="crayon-sy">.</span><span class="crayon-v">remId</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">_id</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Tag the job with a reminder ID</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">schDB</span><span class="crayon-sy">.</span><span class="crayon-e">saveJob</span><span class="crayon-sy">(</span><span class="crayon-v">job</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-20"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-22"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">scheduleSMS</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">job</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">schedule</span><span class="crayon-sy">.</span><span class="crayon-e">scheduleJob</span><span class="crayon-sy">(</span><span class="crayon-s">'job_sms_'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">_id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-r">Date</span><span class="crayon-sy">(</span><span class="crayon-r">parseInt</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">shdlSMS</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tSMS</span><span class="crayon-sy">.</span><span class="crayon-e">triggerSMS</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remDB</span><span class="crayon-sy">.</span><span class="crayon-e">updateStatus</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">_id</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-28">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da1f163676963-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">job</span><span class="crayon-sy">.</span><span class="crayon-v">reminderId</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">_id</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Tag the job with a reminder ID</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">schDB</span><span class="crayon-sy">.</span><span class="crayon-e">saveJob</span><span class="crayon-sy">(</span><span class="crayon-v">job</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-31"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-32">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da1f163676963-33"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">cancelJob</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">reminderId</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">jobs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">schedule</span><span class="crayon-sy">.</span><span class="crayon-v">scheduledJobs</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-35">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">smsJob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">jobs</span><span class="crayon-sy">[</span><span class="crayon-s">"job_sms_"</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">reminderId</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">callJob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">jobs</span><span class="crayon-sy">[</span><span class="crayon-s">"job_call_"</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">reminderId</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-38">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da1f163676963-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">smsJob</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">smsJob</span><span class="crayon-sy">.</span><span class="crayon-e">cancel</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">callJob</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">callJob</span><span class="crayon-sy">.</span><span class="crayon-e">cancel</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-46"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da1f163676963-47"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da1f163676963-48">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da1f163676963-49"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">scheduler</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0110 seconds] -->
<p>Things to notice</p>
<p><strong>Line 3 </strong>: Logic to issue an SMS using Twilio Node API</p>
<p><strong>Line 4</strong> : Logic to issue a call using Twilio Node API</p>
<p><strong>Line 12/24</strong> : Schedule a new job. The first argument is the name of the job, the second is the time at which the job needs to be triggered and finally the third would be the function to be invoked. This is where we trigger the call/SMS and update that the task is completed.</p>
<p><strong>Line 34</strong> : Will fetch a list of pending jobs and cancel them</p>
<p>To complete our logic layer, we will write the logic to trigger a call and SMS using the Twilio Node API.</p>
<p>Create a new folder named <em>twilio</em> inside the <em>logic</em> folder. Create a new file named <em>client.js</em>. This file will hold the Twilio API and Key, which you can get from your Twilio dashboard.</p>
<p>Update it as below</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da2b112374505" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/logic/twilio/client.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
module.exports = require('twilio')('SID', 'TOKEN');</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da2b112374505-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da2b112374505-1"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'twilio'</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-s">'SID'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'TOKEN'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0007 seconds] -->
<p>Create another file named <em>triggerSMS.js</em> inside the <em>twilio</em> folder and update it as below</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da32292821551" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/logic/twilio/triggerSMS.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var client = require('./client');
var sms = {
triggerSMS: function(reminder) {
return client.sendMessage({
to: reminder.user.phone,
from: '+16165225251',
body: '[Reminder] : ' + reminder.remindThis
}, function(error, response) {
console.log(error || response);
});
}
}
module.exports = sms;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da32292821551-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da32292821551-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da32292821551-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da32292821551-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da32292821551-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da32292821551-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da32292821551-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da32292821551-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da32292821551-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da32292821551-10">10</div><div class="crayon-num" data-line="crayon-5a1041274da32292821551-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da32292821551-12">12</div><div class="crayon-num" data-line="crayon-5a1041274da32292821551-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da32292821551-14">14</div><div class="crayon-num" data-line="crayon-5a1041274da32292821551-15">15</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da32292821551-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">client</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'./client'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da32292821551-2">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da32292821551-3"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">sms</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da32292821551-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">triggerSMS</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da32292821551-5"><span class="crayon-h">&nbsp;&nbsp;	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-e">sendMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da32292821551-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">to</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">phone</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da32292821551-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">from</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'+16165225251'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da32292821551-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">body</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'[Reminder] : '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-i">remindThis</span></div><div class="crayon-line" id="crayon-5a1041274da32292821551-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">error</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da32292821551-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">error</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da32292821551-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da32292821551-12"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da32292821551-13"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da32292821551-14">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da32292821551-15"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">sms</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0033 seconds] -->
<p>Things to notice</p>
<p><strong>Line 6</strong> : To the recipients number</p>
<p><strong>Line 7</strong> : Your twilio number</p>
<p><strong>Line 8</strong> : The text to be sent as SMS</p>
<p>Next, the logic to trigger a call. Inside the same folder, create another file name <em>triggerCall.js, </em>update it as below</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da3a243270074" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/logic/twilio/triggerCall.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var client = require('./client');
var call = {
triggerCall: function(reminder) {
return client.makeCall({
to: reminder.user.phone,
from: '+16165225251',
url: 'http://4487093a.ngrok.com/call/twiml/' + reminder.user._id + '/' + reminder._id
}, function(error, response) {
console.log(error || response);
});
}
}
module.exports = call;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da3a243270074-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da3a243270074-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da3a243270074-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da3a243270074-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da3a243270074-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da3a243270074-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da3a243270074-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da3a243270074-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da3a243270074-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da3a243270074-10">10</div><div class="crayon-num" data-line="crayon-5a1041274da3a243270074-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da3a243270074-12">12</div><div class="crayon-num" data-line="crayon-5a1041274da3a243270074-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da3a243270074-14">14</div><div class="crayon-num" data-line="crayon-5a1041274da3a243270074-15">15</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da3a243270074-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">client</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'./client'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da3a243270074-2">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da3a243270074-3"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">call</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da3a243270074-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">triggerCall</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da3a243270074-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-e">makeCall</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da3a243270074-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">to</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">phone</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da3a243270074-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">from</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'+16165225251'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da3a243270074-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">url</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'http://4487093a.ngrok.com/call/twiml/'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-v">user</span><span class="crayon-sy">.</span><span class="crayon-v">_id</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">reminder</span><span class="crayon-sy">.</span><span class="crayon-i">_id</span></div><div class="crayon-line" id="crayon-5a1041274da3a243270074-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">error</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da3a243270074-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">error</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da3a243270074-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da3a243270074-12"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da3a243270074-13"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da3a243270074-14">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da3a243270074-15"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">call</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0037 seconds] -->
<p><strong>Line 6</strong> : To whom the call needs to be made</p>
<p><strong>Line 7</strong> : Your Twilio number</p>
<p><strong>Line 8</strong> : The URL, which consist of the TwiML for this call. To customize the app and make it user friendly, we will dispatch a customized message when the call is made. Twilio will call the URL provided here to get a TwiML to be used during the call.</p>
<p>This URL should be a public one. For testing purposes, we are going to expose our server as a static address using <a href="https://ngrok.com/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://ngrok.com/', 'ngrok');" title="ngrok"  target="_blank">ngrok</a>.</p>
<p>You will need to update this URL after starting the server. More on that soon.</p>
<p>We will write the logic for saving the reminders and schedules to DB now. Create a file named <em>db.reminder.js</em> inside the <em>db </em>folder and update it as below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da43784224862" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/db/db.reminder.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var db = require('diskdb');
db = db.connect('database', ['reminders']);
module.exports = {
getAll: function(usrId) {
return db.reminders.find({
"userId": usrId
});
},
getOne: function(remId) {
return db.reminders.findOne({
"_id": remId
});
},
create: function(reminder) {
return db.reminders.save(reminder);
},
updateStatus: function(remid) {
return db.reminders.update({
"_id": remid
}, {
"isCompleted": true
});
},
delete: function(remId) {
return db.reminders.remove({
"_id": remId
});
}
};</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da43784224862-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-10">10</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-12">12</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-14">14</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-16">16</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-18">18</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-20">20</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-22">22</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-24">24</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-26">26</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-28">28</div><div class="crayon-num" data-line="crayon-5a1041274da43784224862-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da43784224862-30">30</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da43784224862-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'diskdb'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-2"><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">connect</span><span class="crayon-sy">(</span><span class="crayon-s">'database'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'reminders'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-4"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-5"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">getAll</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">usrId</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">reminders</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"userId"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">usrId</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-9"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">getOne</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">remId</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">reminders</span><span class="crayon-sy">.</span><span class="crayon-e">findOne</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"_id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">remId</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-14"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-15"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">create</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">reminders</span><span class="crayon-sy">.</span><span class="crayon-e">save</span><span class="crayon-sy">(</span><span class="crayon-v">reminder</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-17"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-18"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">updateStatus</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">remid</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">reminders</span><span class="crayon-sy">.</span><span class="crayon-e">update</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"_id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">remid</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"isCompleted"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">true</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-24"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-25"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">delete</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">remId</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">reminders</span><span class="crayon-sy">.</span><span class="crayon-e">remove</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"_id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">remId</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da43784224862-29"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da43784224862-30"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0061 seconds] -->
<p>Standard DB methods.</p>
<p>Next, create another file named <em>db.schedule.js</em> inside the same folder and update it as</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da4b752809376" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/db/db.schedule.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var db = require('diskdb');
db = db.connect('database', ['schedules']);
module.exports = {
saveJob: function(job) {
return db.schedules.save(job);
},
deleteJob: function(remId) {
return db.schedules.remove({
"remId": remId
})
}
};</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da4b752809376-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da4b752809376-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da4b752809376-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da4b752809376-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da4b752809376-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da4b752809376-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da4b752809376-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da4b752809376-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da4b752809376-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da4b752809376-10">10</div><div class="crayon-num" data-line="crayon-5a1041274da4b752809376-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da4b752809376-12">12</div><div class="crayon-num" data-line="crayon-5a1041274da4b752809376-13">13</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da4b752809376-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'diskdb'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da4b752809376-2"><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">connect</span><span class="crayon-sy">(</span><span class="crayon-s">'database'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'schedules'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da4b752809376-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da4b752809376-4"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da4b752809376-5"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">saveJob</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">job</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da4b752809376-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">schedules</span><span class="crayon-sy">.</span><span class="crayon-e">save</span><span class="crayon-sy">(</span><span class="crayon-v">job</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da4b752809376-7"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da4b752809376-8"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">deleteJob</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">remId</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da4b752809376-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">schedules</span><span class="crayon-sy">.</span><span class="crayon-e">remove</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da4b752809376-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"remId"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">remId</span></div><div class="crayon-line" id="crayon-5a1041274da4b752809376-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da4b752809376-12"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da4b752809376-13"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0029 seconds] -->
<p>Here we save and delete schedules.</p>
<p>Finally to complete our server side code, we will fill in the logic for generating the TwiML. Create a new file named <em>twilio.js</em> inside the routes folder and update it as</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da52349845696" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/routes/twilio.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var twl = require('../logic/twilio/generateTwiml');
var twilio = {
getTwiml: function(req, res) {
res.writeHead(200, {
'Content-Type': 'text/xml'
});
res.end(twl.getTwiml(req.params.userId, req.params.reminderId));
}
}
module.exports = twilio;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da52349845696-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da52349845696-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da52349845696-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da52349845696-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da52349845696-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da52349845696-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da52349845696-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da52349845696-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da52349845696-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da52349845696-10">10</div><div class="crayon-num" data-line="crayon-5a1041274da52349845696-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da52349845696-12">12</div><div class="crayon-num" data-line="crayon-5a1041274da52349845696-13">13</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da52349845696-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">twl</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../logic/twilio/generateTwiml'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da52349845696-2">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da52349845696-3"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da52349845696-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">getTwiml</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">req</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da52349845696-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">writeHead</span><span class="crayon-sy">(</span><span class="crayon-cn">200</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da52349845696-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Content-Type'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'text/xml'</span></div><div class="crayon-line" id="crayon-5a1041274da52349845696-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da52349845696-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-st">end</span><span class="crayon-sy">(</span><span class="crayon-v">twl</span><span class="crayon-sy">.</span><span class="crayon-e">getTwiml</span><span class="crayon-sy">(</span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">params</span><span class="crayon-sy">.</span><span class="crayon-v">userId</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">params</span><span class="crayon-sy">.</span><span class="crayon-v">reminderId</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da52349845696-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da52349845696-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da52349845696-11"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da52349845696-12">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da52349845696-13"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0027 seconds] -->
<p>This is the endpoint that gets triggered when Twilio makes a call. We dispatch a TwiML based on the input params.</p>
<p>To complete the logic, create a new file named <em>generateTwiml.js</em> inside the <em>logic/twilio</em> folder and update it as</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da5a679763256" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/logic/twilio/generateTwiml.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var db = require('../../db/db.reminder');
var client = require('./client');
var twilio = require('twilio');
var twl = {
getTwiml: function(userid, reminderid) {
// we are going to use userid for authorization, if needed. 
var rem = db.getOne(reminderid);
var twiml = new twilio.TwimlResponse();
var options = {
voice: 'woman',
language: 'en-us'
};
if (rem) {
twiml.say('This is a reminder for : ', options)
.pause({
length: 1
})
.say(rem.remindThis)
.pause({
length: 1
}).say('Thank you for using our service.', options);
} else {
twiml.say('Oops something went wrong!', options);
}
return twiml.toString();
}
}
module.exports = twl;</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-10">10</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-12">12</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-14">14</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-16">16</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-18">18</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-20">20</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-22">22</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-24">24</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-26">26</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-28">28</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-30">30</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-32">32</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da5a679763256-34">34</div><div class="crayon-num" data-line="crayon-5a1041274da5a679763256-35">35</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da5a679763256-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'../../db/db.reminder'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">client</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'./client'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-3"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'twilio'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-4">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da5a679763256-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">twl</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-6"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">getTwiml</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">userid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">reminderid</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// we are going to use userid for authorization, if needed. </span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">rem</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">getOne</span><span class="crayon-sy">(</span><span class="crayon-v">reminderid</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">twiml</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-sy">.</span><span class="crayon-e">TwimlResponse</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-12">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da5a679763256-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">options</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">voice</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'woman'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">language</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'en-us'</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">rem</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">twiml</span><span class="crayon-sy">.</span><span class="crayon-e">say</span><span class="crayon-sy">(</span><span class="crayon-s">'This is a reminder for : '</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">options</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">pause</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">length</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">say</span><span class="crayon-sy">(</span><span class="crayon-v">rem</span><span class="crayon-sy">.</span><span class="crayon-v">remindThis</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-e">pause</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">length</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">say</span><span class="crayon-sy">(</span><span class="crayon-s">'Thank you for using our service.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">options</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">twiml</span><span class="crayon-sy">.</span><span class="crayon-e">say</span><span class="crayon-sy">(</span><span class="crayon-s">'Oops something went wrong!'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">options</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-30">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da5a679763256-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">twiml</span><span class="crayon-sy">.</span><span class="crayon-e">toString</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-32"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da5a679763256-33"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da5a679763256-34">&nbsp;</div><div class="crayon-line" id="crayon-5a1041274da5a679763256-35"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">twl</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0064 seconds] -->
<p><strong>Line 7</strong> : Get the reminder details from DB</p>
<p><strong>Line  15-22</strong> : Build the response</p>
<p><strong>Line 27</strong> : Dispatch it</p>
<p>To complete the server side, we will update the externalized messages. Create a new folder named <i>messages</i> at the root of <em>server</em> folder. Create a new file named <em>messages.js</em> inside it and update it as</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da62636867982" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">server/messages/messages.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
module.exports = {
auth_inputError: "Not all required inputs are present in the request",
auth_duplicateUser: "A user with this username already exits",
auth_registerSuccess: "New account has been successfully registered",
auth_loginFailed: "Invalid username or password",
auth_loginSuccess: "User has been successfully authenticated",
reminder_userIDMissing: "Userid is required",
reminder_inputError: "Not all required inputs are present in the request",
reminder_InvalidUser : "The provided userId does not exist in the app",
remider_newReminderSuccess : "A new reminder has been successfully saved and scheduled",
reminder_ShdlError : "The shdlCall or and shdlSMS should be a timestamp (like : 1411820580000) and should be in the future",
gbl_oops: "Oops something went wrong",
gbl_success: "success"
};</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da62636867982-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da62636867982-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da62636867982-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da62636867982-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da62636867982-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da62636867982-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da62636867982-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da62636867982-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da62636867982-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da62636867982-10">10</div><div class="crayon-num" data-line="crayon-5a1041274da62636867982-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da62636867982-12">12</div><div class="crayon-num" data-line="crayon-5a1041274da62636867982-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da62636867982-14">14</div><div class="crayon-num" data-line="crayon-5a1041274da62636867982-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da62636867982-16">16</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da62636867982-1"><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">exports</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da62636867982-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">auth_inputError</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"Not all required inputs are present in the request"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da62636867982-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">auth_duplicateUser</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"A user with this username already exits"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da62636867982-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">auth_registerSuccess</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"New account has been successfully registered"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da62636867982-5"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">auth_loginFailed</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"Invalid username or password"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da62636867982-6"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">auth_loginSuccess</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"User has been successfully authenticated"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da62636867982-7"><span class="crayon-h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da62636867982-8"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">reminder_userIDMissing</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"Userid is required"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da62636867982-9"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">reminder_inputError</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"Not all required inputs are present in the request"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da62636867982-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">reminder_InvalidUser</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"The provided userId does not exist in the app"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da62636867982-11"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">remider_newReminderSuccess</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"A new reminder has been successfully saved and scheduled"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da62636867982-12"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">reminder_ShdlError</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"The shdlCall or and shdlSMS should be a timestamp (like : 1411820580000) and should be in the future"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da62636867982-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da62636867982-14"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">gbl_oops</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"Oops something went wrong"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da62636867982-15"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">gbl_success</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"success"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da62636867982-16"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0030 seconds] -->
<p>That is it! Now you can run</p>
<p style="text-align: center;">
<span id="crayon-5a1041274da6a329000964" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">nodemon </span><span class="crayon-v">app</span></span></span> .js or 
<span id="crayon-5a1041274da70078625300" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">node </span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-v">js</span></span></span></p>
<p>from the <em>server </em>folder. To make our app publically accessible, we will start the ngrok server on port 3000. This will spit out a public URL like</p>
<p><a href="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.24.26-pm.png" data-rel="lightbox-4" title=""><img class="size-medium wp-image-2127 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.24.26-pm-451x118.png?resize=451%2C118" alt="Screen Shot 2014-09-28 at 10.24.26 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-2127 aligncenter" src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.24.26-pm-451x118.png?resize=451%2C118" alt="Screen Shot 2014-09-28 at 10.24.26 pm" data-recalc-dims="1" /></noscript></a></p>
<p>which you would need to update on line 8 <em>server/logic/twilio/triggerCall.js</em>.</p>
<h2>Testing the REST API</h2>
<p>To test the server, you can use CURL or Postman or any REST client. I will use a chrome extension named Advanced Rest client.</p>
<p>First, we will register a new account for that we will send a request like</p>
<p><a href="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.29.55-pm1.png" data-rel="lightbox-5" title=""><img class="size-medium wp-image-2129 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.29.55-pm1-451x185.png?resize=451%2C185" alt="Screen Shot 2014-09-28 at 10.29.55 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-2129 aligncenter" src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.29.55-pm1-451x185.png?resize=451%2C185" alt="Screen Shot 2014-09-28 at 10.29.55 pm" data-recalc-dims="1" /></noscript></a>And you should receive a response like</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da78301835266" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">response</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
{
"status": 200,
"message": "New account has been successfully registered",
"user": {
"username": "a@a.com",
"name": "arvind",
"phone": "+91XXXXXXXXXX",
"_id": "1fa2fae0f7a34f8da68fa252f43561e8"
}
}</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da78301835266-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da78301835266-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da78301835266-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da78301835266-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da78301835266-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da78301835266-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da78301835266-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da78301835266-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da78301835266-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da78301835266-10">10</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da78301835266-1"><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da78301835266-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da78301835266-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"New account has been successfully registered"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da78301835266-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"user"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da78301835266-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"username"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"<a href="./../cdn-cgi/l/email-protection/index.html" class="__cf_email__" data-cfemail="f293b293dc919d9f">[email&#160;protected]</a>"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da78301835266-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"name"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"arvind"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da78301835266-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"phone"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"+91XXXXXXXXXX"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da78301835266-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"_id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"1fa2fae0f7a34f8da68fa252f43561e8"</span></div><div class="crayon-line" id="crayon-5a1041274da78301835266-9"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da78301835266-10"><span class="crayon-sy">}</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0014 seconds] -->
<p>Sweet. Now let us try login.</p>
<p><a href="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.31.56-pm.png" data-rel="lightbox-6" title=""><img class="size-medium wp-image-2130 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.31.56-pm-451x188.png?resize=451%2C188" alt="Screen Shot 2014-09-28 at 10.31.56 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-2130 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.31.56-pm-451x188.png?resize=451%2C188" alt="Screen Shot 2014-09-28 at 10.31.56 pm" data-recalc-dims="1" /></noscript></a></p>
<p>And the response</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da80726553904" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">response</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
{
"status": 200,
"message": "User has been successfully authenticated",
"user": {
"username": "a@a.com",
"name": "arvind",
"phone": "+91XXXXXXXXXX",
"_id": "1fa2fae0f7a34f8da68fa252f43561e8"
}
}</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da80726553904-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da80726553904-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da80726553904-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da80726553904-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da80726553904-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da80726553904-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da80726553904-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da80726553904-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da80726553904-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da80726553904-10">10</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da80726553904-1"><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da80726553904-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da80726553904-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"User has been successfully authenticated"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da80726553904-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"user"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da80726553904-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"username"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"<a href="./../cdn-cgi/l/email-protection/index.html" class="__cf_email__" data-cfemail="b8d9f8d996dbd7d5">[email&#160;protected]</a>"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da80726553904-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"name"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"arvind"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da80726553904-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"phone"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"+91XXXXXXXXXX"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da80726553904-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"_id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"1fa2fae0f7a34f8da68fa252f43561e8"</span></div><div class="crayon-line" id="crayon-5a1041274da80726553904-9"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da80726553904-10"><span class="crayon-sy">}</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0016 seconds] -->
<p>Let us try and create a new reminder with a new SMS scheduled<a href="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.36.23-pm.png" data-rel="lightbox-7" title=""><img class="size-medium wp-image-2132 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.36.23-pm-451x167.png?resize=451%2C167" alt="Screen Shot 2014-09-28 at 10.36.23 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-2132 aligncenter" src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-28-at-10.36.23-pm-451x167.png?resize=451%2C167" alt="Screen Shot 2014-09-28 at 10.36.23 pm" data-recalc-dims="1" /></noscript></a><span style="font-size: 18px;"><strong>Quick tip</strong> : To get the timestamp of the required time in chrome, run </span></p>
<p style="text-align: center;">
<span id="crayon-5a1041274da87722509349" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">copy</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Date</span><span class="crayon-sy">(</span><span class="crayon-cn">2014</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">08</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">28</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">22</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">36</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getTime</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></span></span></p>
<p>in the console. The arguments are year, month (<em>starting at index 0</em>), date, hours and minutes. Now you can paste the copied datetimestamp.</p>
<p>Your response would look like</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274da8d247187279" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">response</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
{
"status": 200,
"message": "A new reminder has been successfully saved and scheduled",
"reminder": {
"remindThis": "Doctor's Appointment",
"shdlCall": "false",
"shdlSMS": "1411924140000",
"userId": "1fa2fae0f7a34f8da68fa252f43561e8",
"user": {
"username": "a@a.com",
"name": "arvind",
"phone": "+918886279998",
"_id": "1fa2fae0f7a34f8da68fa252f43561e8"
},
"isCompleted": false,
"_id": "daa14dc0385a488c82899100c8cab254",
"smsJob": {
"name": "job_sms_daa14dc0385a488c82899100c8cab254",
"_events": {},
"reminderId": "daa14dc0385a488c82899100c8cab254",
"_id": "d29f2199b25a465e9def864237575497"
}
}
}</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-2">2</div><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-4">4</div><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-6">6</div><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-8">8</div><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-10">10</div><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-12">12</div><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-14">14</div><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-16">16</div><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-18">18</div><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-20">20</div><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-22">22</div><div class="crayon-num" data-line="crayon-5a1041274da8d247187279-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274da8d247187279-24">24</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274da8d247187279-1"><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"status"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da8d247187279-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"message"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"A new reminder has been successfully saved and scheduled"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"reminder"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a1041274da8d247187279-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"remindThis"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"Doctor's Appointment"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"shdlCall"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"false"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da8d247187279-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"shdlSMS"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"1411924140000"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"userId"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"1fa2fae0f7a34f8da68fa252f43561e8"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da8d247187279-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"user"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"username"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"<a href="./../cdn-cgi/l/email-protection/index.html" class="__cf_email__" data-cfemail="f495b495da979b99">[email&#160;protected]</a>"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da8d247187279-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"name"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"arvind"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"phone"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"+918886279998"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da8d247187279-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"_id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"1fa2fae0f7a34f8da68fa252f43561e8"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da8d247187279-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"isCompleted"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"_id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"daa14dc0385a488c82899100c8cab254"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da8d247187279-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"smsJob"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"name"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"job_sms_daa14dc0385a488c82899100c8cab254"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da8d247187279-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"_events"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"reminderId"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"daa14dc0385a488c82899100c8cab254"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a1041274da8d247187279-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"_id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"d29f2199b25a465e9def864237575497"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a1041274da8d247187279-23"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274da8d247187279-24"><span class="crayon-sy">}</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0034 seconds] -->
<p>And at the scheduled time, you should receive a SMS. You can test out the call too.</p>
<p>In the same fashion you can test out the other REST endpoints too. The data is stored under the <em>database</em> folder if you want to take a peek.</p>
<p>Now, we are going to build a Mobile Hybrid app based on this REST API. You can navigate to that tutorial from here : <a title="Ionic, Twilio and Node Scheduler – A Reminder App – Part II [Client]" href="./../ionic-twilio-and-node-scheduler-part-2/index.html" target="_blank">Ionic, Twilio and Node Scheduler – A Reminder App – Part II [Client]</a></p>
<hr />
<p>Thanks for reading! Do comment.<br />
@arvindr21</p>
<fieldset><legend>Series Navigation</legend><span class="series-nav-left"></span><span class="series-nav-right"><a href="./../ionic-twilio-and-node-scheduler-part-2/index.html" title="Ionic, Twilio and Node Scheduler – A Reminder App – Part II [Client] &gt;&gt;">Ionic, Twilio and Node Scheduler – A Reminder App – Part II [Client] &gt;&gt;</a></span></fieldset><!-- Simple Share Buttons Adder (6.1.5) simplesharebuttons.com --><div class="ssba ssba-wrap"><div style="text-align:left"><a href="http://twitter.com/share?url=./ionic-twilio-and-node-scheduler-part-1/&amp;text=Ionic%2C+Twilio+and+Node+Scheduler+%E2%80%93+A+Reminder+App+%E2%80%93+Part+I+%5BServer%5D+From+The+Jackal+of+Javascript+by+%40arvindr21" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/share?url=./ionic-twilio-and-node-scheduler-part-1/&amp;text=Ionic%2C+Twilio+and+Node+Scheduler+%E2%80%93+A+Reminder+App+%E2%80%93+Part+I+%5BServer%5D+From+The+Jackal+of+Javascript+by+%40arvindr21', '');" data-site="" class="ssba_twitter_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png?w=646" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter" data-recalc-dims="1" /><noscript><img src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png?w=646" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter" data-recalc-dims="1" /></noscript></a><a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=./ionic-twilio-and-node-scheduler-part-1/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.linkedin.com/shareArticle?mini=true&amp;url=./ionic-twilio-and-node-scheduler-part-1/', '');" data-site="linkedin" class="ssba_linkedin_share ssba_share_link"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png?w=646" title="LinkedIn" class="ssba ssba-img" alt="Share on LinkedIn" data-recalc-dims="1" /><noscript><img src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png?w=646" title="LinkedIn" class="ssba ssba-img" alt="Share on LinkedIn" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">9</span><a href="https://plus.google.com/share?url=./ionic-twilio-and-node-scheduler-part-1/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://plus.google.com/share?url=./ionic-twilio-and-node-scheduler-part-1/', '');" data-site="" class="ssba_google_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/google.png?w=646" title="Google+" class="ssba ssba-img" alt="Share on Google+" data-recalc-dims="1" /><noscript><img src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/google.png?w=646" title="Google+" class="ssba ssba-img" alt="Share on Google+" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">0</span><a href="http://reddit.com/submit?url=./ionic-twilio-and-node-scheduler-part-1/&amp;title=Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://reddit.com/submit?url=./ionic-twilio-and-node-scheduler-part-1/&amp;title=Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]', '');" data-site="reddit" class="ssba_reddit_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/reddit.png?w=646" title="Reddit" class="ssba ssba-img" alt="Share on Reddit" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/reddit.png?w=646" title="Reddit" class="ssba ssba-img" alt="Share on Reddit" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">0</span><a href="https://bufferapp.com/add?url=./ionic-twilio-and-node-scheduler-part-1/&amp;text=From The Jackal of Javascript Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://bufferapp.com/add?url=./ionic-twilio-and-node-scheduler-part-1/&amp;text=From The Jackal of Javascript Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]', '');" data-site="buffer" class="ssba_buffer_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/buffer.png?w=646" title="Buffer" class="ssba ssba-img" alt="Buffer this page" data-recalc-dims="1" /><noscript><img src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/buffer.png?w=646" title="Buffer" class="ssba ssba-img" alt="Buffer this page" data-recalc-dims="1" /></noscript></a><a href="https://flattr.com/submit/auto?user_id=arvindr21&amp;title=Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]&amp;url=https://flattr.com/profile/arvindr21" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://flattr.com/submit/auto?user_id=arvindr21&amp;title=Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]&amp;url=https://flattr.com/profile/arvindr21', '');" data-site="flattr" class="ssba_flattr_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/flattr.png?w=646" title="Flattr" class="ssba ssba-img" alt="Flattr the author" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/flattr.png?w=646" title="Flattr" class="ssba ssba-img" alt="Flattr the author" data-recalc-dims="1" /></noscript></a><a data-site="email" class="ssba_email_share" href="./../cdn-cgi/l/email-protection/index.html#754a0600171f101601483c1a1b1c16595521021c191c1a55141b11553b1a11105526161d10110019100755504743564d4744444e5534552710181c1b1110075534050555504743564d4744444e5525140701553c552e26100703100728531418054e171a110c4833071a1855211d10553f14161e1419551a13553f1403140616071c05015047451d0101054f5a5a011d101f14161e14191a131f1403140616071c05015b161a185a1c1a1b1c165801021c191c1a58141b11581b1a11105806161d101100191007580514070158445a"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/email.png?w=646" title="Email" class="ssba ssba-img" alt="Email this to someone" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/email.png?w=646" title="Email" class="ssba ssba-img" alt="Email this to someone" data-recalc-dims="1" /></noscript></a><a data-site="print" class="ssba_print ssba_share_link" href="#" onclick="window.print()"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/print.png?w=646" title="Print" class="ssba ssba-img" alt="Print this page" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/print.png?w=646" title="Print" class="ssba ssba-img" alt="Print this page" data-recalc-dims="1" /></noscript></a></div></div><div class='sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded' id='like-post-wrapper-70838519-2115-5a1041280fc15' data-src='//widgets.wp.com/likes/#blog_id=70838519&amp;post_id=2115&amp;origin=thejackalofjavascript.com&amp;obj_id=70838519-2115-5a1041280fc15' data-name='like-post-frame-70838519-2115-5a1041280fc15'><h3 class='sd-title'>Like this:</h3><div class='likes-widget-placeholder post-likes-widget-placeholder' style='height:55px'><span class='button'><span>Like</span></span> <span class="loading">Loading...</span></div><span class='sd-text-color'></span><a class='sd-link-color'></a></div>
<div id='jp-relatedposts' class='jp-relatedposts' >
<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</div>
<div class="entry-content">
</div><!-- .entry-content -->
<footer class="entry-meta">
<span class="post-date"><a href="./index.html" title="1:23 am" rel="bookmark"><time class="entry-date" datetime="2014-09-30T01:23:43+00:00">September 30, 2014</time></a></span><span class="byline"><span class="author vcard"><a class="url fn n" href="./../author/arvind-ravulavaru/index.html" title="View all posts by Arvind Ravulavaru" rel="author">Arvind Ravulavaru</a></span></span>					</footer><!-- .entry-meta -->
</article><!-- #post-## -->
<nav class="navigation post-navigation" role="navigation">
<h1 class="screen-reader-text">Post navigation</h1>
<div class="nav-links">
<div class="nav-previous"><a href="./../ionic-twilio-and-node-scheduler-part-2/index.html" rel="prev"><span class="meta-nav screen-reader-text">&larr;</span></a></div><div class="nav-next"><a href="./../getting-started-raspberry-pi-node-js/index.html" rel="next"><span class="meta-nav screen-reader-text">&rarr;</span></a></div>		</div><!-- .nav-links -->
</nav><!-- .navigation -->
<div id="disqus_thread">
<div id="dsq-content">
<ul id="dsq-comments">
<li class="comment even thread-even depth-1" id="dsq-comment-3270">
<div id="dsq-comment-header-3270" class="dsq-comment-header">
<cite id="dsq-cite-3270">
<span id="dsq-author-user-3270">Titiat Kwaku Eyram</span>
</cite>
</div>
<div id="dsq-comment-body-3270" class="dsq-comment-body">
<div id="dsq-comment-message-3270" class="dsq-comment-message"><p>{<br />
&#8220;status&#8221;: 400<br />
&#8220;message&#8221;: &#8220;Not all required inputs are present in the request&#8221;<br />
}</p>
<p>I keep getting this feedback when i am registering. What do i do?</p>
</div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="dsq-comment-3356">
<div id="dsq-comment-header-3356" class="dsq-comment-header">
<cite id="dsq-cite-3356">
<span id="dsq-author-user-3356">Kevin Berrio</span>
</cite>
</div>
<div id="dsq-comment-body-3356" class="dsq-comment-body">
<div id="dsq-comment-message-3356" class="dsq-comment-message"><p>You&#8217;re passing text probably instead of a JSON file.</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-3262">
<div id="dsq-comment-header-3262" class="dsq-comment-header">
<cite id="dsq-cite-3262">
<span id="dsq-author-user-3262">David Leal</span>
</cite>
</div>
<div id="dsq-comment-body-3262" class="dsq-comment-body">
<div id="dsq-comment-message-3262" class="dsq-comment-message"><p>Thanks, this has been really helpful to understand the Twilio workflow in node. I&#8217;m not a node master and I would love if you have an example to receive calls. Thanks.</p>
</div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="dsq-comment-3263">
<div id="dsq-comment-header-3263" class="dsq-comment-header">
<cite id="dsq-cite-3263">
./                <span id="dsq-author-user-3263">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-3263" class="dsq-comment-body">
<div id="dsq-comment-message-3263" class="dsq-comment-message"><p>I have done a post on Calls using Peerjs, you can take a look at it here : <a href="./../node-webkit-webrtc-and-angularjs-a-video-chat-client/index.html" rel="nofollow">./node-webkit-webrtc-and-angularjs-a-video-chat-client/</a></p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="dsq-comment-2529">
<div id="dsq-comment-header-2529" class="dsq-comment-header">
<cite id="dsq-cite-2529">
http://www.ingenieroperales.com/                <span id="dsq-author-user-2529">jesus israel perales martinez</span>
</cite>
</div>
<div id="dsq-comment-body-2529" class="dsq-comment-body">
<div id="dsq-comment-message-2529" class="dsq-comment-message"><p>Wooww!! , Thanks, I needed an example of node-schedule</p>
</div>
</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-1273">
<div id="dsq-comment-header-1273" class="dsq-comment-header">
<cite id="dsq-cite-1273">
<span id="dsq-author-user-1273">markbarton</span>
</cite>
</div>
<div id="dsq-comment-body-1273" class="dsq-comment-body">
<div id="dsq-comment-message-1273" class="dsq-comment-message"><p>Will the server lose the scheduling if its stoppped and restarted?  I assume so.</p>
<p>What do you think is best &#8211; just load in the active jobs from the database when the server starts up?</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-2" id="dsq-comment-1286">
<div id="dsq-comment-header-1286" class="dsq-comment-header">
<cite id="dsq-cite-1286">
./                <span id="dsq-author-user-1286">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-1286" class="dsq-comment-body">
<div id="dsq-comment-message-1286" class="dsq-comment-message"><p>Hello markbarton. </p>
<p>If I am not wrong, even though you restart the server, you can fetch the scheduled jobs using</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a1041274f554937974438" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var jobs = schedule.scheduledJobs;
</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a1041274f554937974438-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a1041274f554937974438-2">2</div><div class="crayon-num" data-line="crayon-5a1041274f554937974438-3">3</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a1041274f554937974438-1">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a1041274f554937974438-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">jobs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">schedule</span><span class="crayon-sy">.</span><span class="crayon-v">scheduledJobs</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a1041274f554937974438-3">&nbsp;</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<p>This is the same logic used to cancel jobs in the above example.</p>
<p>Thanks.</p>
</div>
</div>
<ul class="children">
<li class="comment odd alt depth-3" id="dsq-comment-2910">
<div id="dsq-comment-header-2910" class="dsq-comment-header">
<cite id="dsq-cite-2910">
<span id="dsq-author-user-2910">Yujun Wu</span>
</cite>
</div>
<div id="dsq-comment-body-2910" class="dsq-comment-body">
<div id="dsq-comment-message-2910" class="dsq-comment-message"><p>Hi Arvind, looks like scheduledJobs is stored in the memory (<a href="https://github.com/tejasmanohar/node-schedule/blob/master/lib/schedule.js#L444" onclick="__gaTracker('send', 'event', 'outbound-comment', 'https://github.com/tejasmanohar/node-schedule/blob/master/lib/schedule.js#L444', 'https://github.com/tejasmanohar/node-schedule/blob/master/lib/schedule.js#L444');" rel="nofollow">https://github.com/tejasmanohar/node-schedule/blob/master/lib/schedule.js#L444</a>). It would be lost when the server restart.  It is not persistent, isn&#8217;t it?</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="dsq-comment-1134">
<div id="dsq-comment-header-1134" class="dsq-comment-header">
<cite id="dsq-cite-1134">
<span id="dsq-author-user-1134">Oron Ben Zvi</span>
</cite>
</div>
<div id="dsq-comment-body-1134" class="dsq-comment-body">
<div id="dsq-comment-message-1134" class="dsq-comment-message"><p>This DiskDB is using only &#8220;Sync&#8221; methods to write and read from the harddisk, doesn&#8217;t it ruins all node performance? making your entire code blocking, instead of non-blocking.</p>
</div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="dsq-comment-1158">
<div id="dsq-comment-header-1158" class="dsq-comment-header">
<cite id="dsq-cite-1158">
./                <span id="dsq-author-user-1158">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-1158" class="dsq-comment-body">
<div id="dsq-comment-message-1158" class="dsq-comment-message"><p>Hello Oron, Yes it does. I have used DiskDB in this example to keep things simple. You can always use MongoDB in place of it. There is already a plan to make DiskDB async. </p>
<p>Thanks.</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-3" id="dsq-comment-1161">
<div id="dsq-comment-header-1161" class="dsq-comment-header">
<cite id="dsq-cite-1161">
<span id="dsq-author-user-1161">Oron Ben Zvi</span>
</cite>
</div>
<div id="dsq-comment-body-1161" class="dsq-comment-body">
<div id="dsq-comment-message-1161" class="dsq-comment-message"><p>Hey Arvind, thanks for your response. I just noticed that diskdb is your own module. would you like me to pull request, add &#8220;Sync&#8221; suffix to the sync methods and add async ones?</p>
</div>
</div>
<ul class="children">
<li class="comment odd alt depth-4" id="dsq-comment-1162">
<div id="dsq-comment-header-1162" class="dsq-comment-header">
<cite id="dsq-cite-1162">
./                <span id="dsq-author-user-1162">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-1162" class="dsq-comment-body">
<div id="dsq-comment-message-1162" class="dsq-comment-message"><p>Hello Oron, </p>
<p>Sure. pls be my guest. Thanks for coming forward with the contribution. </p>
<p>Thanks.</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-5" id="dsq-comment-1164">
<div id="dsq-comment-header-1164" class="dsq-comment-header">
<cite id="dsq-cite-1164">
./                <span id="dsq-author-user-1164">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-1164" class="dsq-comment-body">
<div id="dsq-comment-message-1164" class="dsq-comment-message"><p>I am sorry** </p>
<p>Please leave the existing methods as is and add an async to the new ones. I want diskDB to be backward compatible. </p>
<p>Thanks!</p>
</div>
</div>
</li><!-- #comment-## -->
<li class="comment odd alt depth-5" id="dsq-comment-1219">
<div id="dsq-comment-header-1219" class="dsq-comment-header">
<cite id="dsq-cite-1219">
<span id="dsq-author-user-1219">Oron Ben Zvi</span>
</cite>
</div>
<div id="dsq-comment-body-1219" class="dsq-comment-body">
<div id="dsq-comment-message-1219" class="dsq-comment-message"><p>Adding Async suffix to methods is the opposite of node convention, so maybe we should think of different names to the async methods if you don&#8217;t want this to be a &#8220;breaking change&#8221; but adding Async suffix is c# not nodejs.</p>
</div>
</div>
</li><!-- #comment-## -->
<li class="comment even depth-5" id="dsq-comment-1220">
<div id="dsq-comment-header-1220" class="dsq-comment-header">
<cite id="dsq-cite-1220">
./                <span id="dsq-author-user-1220">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-1220" class="dsq-comment-body">
<div id="dsq-comment-message-1220" class="dsq-comment-message"><p>Lol. True that. Why don&#8217;t you open an issue on github. Lets hash it out there. </p>
</div>
</div>
</li><!-- #comment-## -->
<li class="comment odd alt depth-5" id="dsq-comment-1221">
<div id="dsq-comment-header-1221" class="dsq-comment-header">
<cite id="dsq-cite-1221">
<span id="dsq-author-user-1221">Oron Ben Zvi</span>
</cite>
</div>
<div id="dsq-comment-body-1221" class="dsq-comment-body">
<div id="dsq-comment-message-1221" class="dsq-comment-message"><p>Sure buddy, I&#8217;ll get back from my vacation next week and we&#8217;ll start working on this.</p>
</div>
</div>
</li><!-- #comment-## -->
<li class="comment even depth-5" id="dsq-comment-1222">
<div id="dsq-comment-header-1222" class="dsq-comment-header">
<cite id="dsq-cite-1222">
./                <span id="dsq-author-user-1222">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-1222" class="dsq-comment-body">
<div id="dsq-comment-message-1222" class="dsq-comment-message"><p>Great. Thanks. </p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul>
</div>
</div>
<script src="./../cdn-cgi/scripts/0e574bed/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">
var disqus_url = './ionic-twilio-and-node-scheduler-part-1/';
var disqus_identifier = '2115 ./?p=2115';
var disqus_container_id = 'disqus_thread';
var disqus_shortname = 'thejackalofjavascriptcom';
var disqus_title = "Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]";
var disqus_config_custom = window.disqus_config;
var disqus_config = function () {
/*
All currently supported events:
onReady: fires when everything is ready,
onNewComment: fires when a new comment is posted,
onIdentify: fires when user is authenticated
*/
this.language = '';
this.callbacks.onReady.push(function () {
// sync comments in the background so we don't block the page
var script = document.createElement('script');
script.async = true;
script.src = '?cf_action=sync_comments&post_id=2115';
var firstScript = document.getElementsByTagName('script')[0];
firstScript.parentNode.insertBefore(script, firstScript);
});
if (disqus_config_custom) {
disqus_config_custom.call(this);
}
};
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript';
dsq.async = true;
dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
</main><!-- #main -->
</div><!-- #primary -->
<div id="secondary" class="widget-area" role="complementary">
<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="./../index.html">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s">
</label>
<input type="submit" class="search-submit" value="Search">
</form>
</aside><aside id="text-2" class="widget widget_text"><h1 class="widget-title">This is me!!</h1>			<div class="textwidget"><style>
.socl-btn
{
padding: 3px;
background: #f45145;
border-radius: 3px;
color: rgba(255, 255, 255, 0.6) !important;
margin-top: 9px;
display: inline-block;
text-align: center;
width:100%;
-webkit-transition: all 0.2s ease-in-out;
-moz-transition: all 0.2s ease-in-out;
-o-transition: all 0.2s ease-in-out;
transition: all 0.2s ease-in-out;
}
.socl-btn:hover{
color:#fff !important;
}
.lkdin{
background-image: url(./../wp-content/uploads/2014/08/l.png);
background-repeat: no-repeat;
background-position: left;
}
.gplus{
background-image: url(./../wp-content/uploads/2014/08/g.png);
background-repeat: no-repeat;
background-position: left;
}
.mongodir{
background-image: url(./../wp-content/uploads/2014/08/m.png);
background-repeat: no-repeat;
background-position: left;
}
.sitept{
background-image: url(./../wp-content/uploads/2014/08/s.png);
background-repeat: no-repeat;
background-position: left;
}
</style>
<img src="./../wp-content/uploads/2014/02/030a49b.jpg" alt="Arvind Ravulavaru" style="width: 81px; margin: 0px auto;display: block;border-radius: 45px;"/>
<br/>
<label>
Hello.. I am Arvind Ravulavaru a Full Stack Consultant based out of Hyderabad, India. This blog is my way of giving back to the Javascript Community!</label>
<br/>
<div style="text-align:center;" ><a  href="./../portfolio/index.html">Know more about me</a></div>
<br/>
<div  style="text-align:center;">
<a href="https://twitter.com/arvindr21" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://twitter.com/arvindr21', 'Follow @arvindr21');" class="twitter-follow-button" data-show-count="false">Follow @arvindr21</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> 
<iframe src="http://ghbtns.com/github-btn.html?user=arvindr21&type=follow"
allowtransparency="true" frameborder="0" scrolling="0" width="132" height="20"></iframe><br/><br/>
<a href="http://in.linkedin.com/in/arvindravulavaru" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://in.linkedin.com/in/arvindravulavaru', 'Linked In');" target="_blank"  class="socl-btn lkdin">Linked In</a>
<a href="https://plus.google.com/+ArvindRavulavaru" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://plus.google.com/+ArvindRavulavaru', 'Google Plus');" target="_blank"  class="socl-btn gplus">Google Plus</a><br/>
<a href="http://blog.mongodirector.com/author/arvindr" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://blog.mongodirector.com/author/arvindr', 'Mongo Director');" target="_blank"  class="socl-btn mongodir">Mongo Director</a> <a href="http://www.sitepoint.com/author/aravulavaru/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.sitepoint.com/author/aravulavaru/', 'Site Point');" target="_blank"  class="socl-btn sitept">Site Point</a> <br/><br/>
<a href="https://paper.li/arvindr21/1409328222#!headlines/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://paper.li/arvindr21/1409328222#!headlines/', 'Chronicles of the Jackal of Javascript');" target="_blank"  class="socl-btn">Chronicles of the Jackal of Javascript</a>
</div></div>
</aside><aside id="text-5" class="widget widget_text">			<div class="textwidget"><style>
.crm-app, .crm-ext
{
padding: 9px;
background: #787878;
border-radius: 45px;
color: #EFEFEE !important;
margin-top: 9px;
display: inline-block;
text-align: center;
}
</style>
<a href="https://chrome.google.com/webstore/detail/the-jackal-of-javascript/oiaebkkgbicadojhdipjajkhjkeencdm" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://chrome.google.com/webstore/detail/the-jackal-of-javascript/oiaebkkgbicadojhdipjajkhjkeencdm', 'Chrome App');" target ="_blank" class="crm-app">Chrome App</a>
<a href="https://chrome.google.com/webstore/detail/the-jackal-of-javascript/dokdjofgoglghfljkpmmkgfpipgcmjme" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://chrome.google.com/webstore/detail/the-jackal-of-javascript/dokdjofgoglghfljkpmmkgfpipgcmjme', 'Chrome Extension');" target ="_blank" class="crm-ext">Chrome Extension</a></div>
</aside><aside id="text-7" class="widget widget_text"><h1 class="widget-title">Workshops</h1>			<div class="textwidget"><ul>
<li><a href="http://mean-workshop.herokuapp.com/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://mean-workshop.herokuapp.com', 'o/ M.E.A.N. Workshop');" target="_blank">\o/ M.E.A.N. Workshop</a>
</li>
</ul></div>
</aside><aside id="text-6" class="widget widget_text"><h1 class="widget-title">Presentations</h1>			<div class="textwidget"><ul>
<li><a href="http://arvindr21.github.io/ng-overview" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/ng-overview', 'Overview of Angularjs');" target="_blank">Overview of Angularjs</a>
</li>
<li><a href="http://arvindr21.github.io/howBrowserWorks" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/howBrowserWorks', 'How Browser Works');" target="_blank">How Browser Works</a>
</li>
<li><a href="http://arvindr21.github.io/WebComponents" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/WebComponents', 'Web Components');" target="_blank">Web Components</a>
</li>
<li><a href="http://arvindr21.github.io/building-n-Scaffolding" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/building-n-Scaffolding', 'Modern UI Build Systems and Scaffolding Tools');" target="_blank">Modern UI Build Systems and Scaffolding Tools</a>
</li>
<li><a href="http://arvindr21.github.io/backbonejs" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/backbonejs', 'Backbonejs');" target="_blank">Backbonejs</a>
</li>
<li><a href="http://arvindr21.github.io/rwd" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/rwd', 'Responsive Web Design');" target="_blank">Responsive Web Design</a>
</li>
</ul></div>
</aside><aside id="text-3" class="widget widget_text"><h1 class="widget-title">Projects</h1>			<div class="textwidget"><ul><li><a href="./../rotten-tomatoes-jquery-rest-client/index.html" target="_blank">Rotten Tomatoes jQuery Rest Client</a>
</li>
<li>
<a href="./../uploading-files-made-fun/index.html" target="_blank">blueimp-file-upload-expressjs</a> - A Node Package
</li>
<li>
<a href="http://arvindr21.github.io/lazyboy/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/lazyboy/', 'lazyboy');" target="_blank">lazyboy</a> - Command line laziness redefined
</li>
<li>
<a href="http://arvindr21.github.io/diskDB/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/diskDB/', 'diskDB');" target="_blank">diskDB</a> - A Light Weight Disk based JSON Database - A Node Package
</li>
<li>
<a href="https://github.com/search?utf8=%E2%9C%93&q=user%3Aarvindr21+slush&type=Repositories&ref=searchresults" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://github.com/search?utf8=%E2%9C%93&amp;q=user%3Aarvindr21+slush&amp;type=Repositories&amp;ref=searchresults', 'My Slush Generators');" target="_blank">My Slush Generators</a>
</li>
<li>
<a href="https://github.com/search?utf8=%E2%9C%93&q=user%3Aarvindr21+yeoman&type=Repositories&ref=searchresults" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://github.com/search?utf8=%E2%9C%93&amp;q=user%3Aarvindr21+yeoman&amp;type=Repositories&amp;ref=searchresults', 'My Yeoman Generators');" target="_blank">My Yeoman Generators</a>
</li>
<li>
<a href="https://github.com/arvindr21/myWebComponents#mywebcomponents" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://github.com/arvindr21/myWebComponents#mywebcomponents', 'My Web Components');" target="_blank">My Web Components</a>
</li>
<li>
<a href="http://bower.io/search/?q=owner:arvindr21" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://bower.io/search/?q=owner:arvindr21', 'My Bower Packages');" target="_blank">My Bower Packages</a>
</li>
</ul></div>
</aside><aside id="latestseries-2" class="widget widget_latestseries"><h1 class="widget-title">Series</h1>			<ul>
<div class="latest-series"><ul><li><a href="./../series/a-reminder-app/index.html" class="series-145" title="Ionic, Twilio and Node Scheduler – A Reminder App">Ionic, Twilio and Node Scheduler – A Reminder App</a></li><li><a href="./../series/node-webkit-apps/index.html" class="series-150" title="Node Webkit Apps">Node Webkit Apps</a></li><li><a href="./../series/rpi/index.html" class="series-148" title="Raspberry Pi">Raspberry Pi</a></li></ul></div>			</ul>
</aside><aside id="text-4" class="widget widget_text"><h1 class="widget-title">Guest Posts</h1>			<div class="textwidget"><ul>
<li><a href="http://www.sitepoint.com/building-chat-app-node-webkit-firebase-angularjs/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.sitepoint.com/building-chat-app-node-webkit-firebase-angularjs/', 'Building a Chat App with node-webkit, Firebase, and AngularJS');" target="_blank">Building a Chat App with node-webkit, Firebase, and AngularJS</a></li>
<li><a href="http://www.sitepoint.com/creating-sentiment-analysis-application-using-node-js/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.sitepoint.com/creating-sentiment-analysis-application-using-node-js/', 'Creating a Sentiment Analysis Application Using Node.js');" target="_blank">Creating a Sentiment Analysis Application Using Node.js</a></li>
<li><a href="http://blog.mongodirector.com/implementing-pagination-with-mongodb-express-js-slush/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://blog.mongodirector.com/implementing-pagination-with-mongodb-express-js-slush/', 'Implementing pagination with MongoDB, Express.js &amp; Slush');" target="_blank">Implementing pagination with MongoDB, Express.js & Slush</a></li>
<li><a href="http://www.sitepoint.com/creating-firebase-powered-end-end-ionic-application/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.sitepoint.com/creating-firebase-powered-end-end-ionic-application/', 'Creating a Firebase Powered End to End Ionic Application');" target="_blank">Creating a Firebase Powered End to End Ionic Application</a></li>
<li><a href="http://blog.mongodirector.com/getting-started-with-mongodb-and-mongoose/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://blog.mongodirector.com/getting-started-with-mongodb-and-mongoose/', 'Getting started with MongoDB and Mongoose');" target="_blank">Getting started with MongoDB and Mongoose</a></li>
<li><a href="http://blog.mongodirector.com/yeoman-mongoose-and-mongodb/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://blog.mongodirector.com/yeoman-mongoose-and-mongodb/', 'Yeoman, Mongoose and MongoDB');" target="_blank">Yeoman, Mongoose and MongoDB</a></li>
</ul></div>
</aside><aside id="views-2" class="widget widget_views"><h1 class="widget-title">Top5 Posts</h1><ul>
<li><a href="./../architecting-a-restful-node-js-app/index.html"  title="Architecting a Secure RESTful Node.js app">Architecting a Secure RESTful Node.js app</a> - 215,318 views</li><li><a href="./../getting-started-with-angular-2-0/index.html"  title="Getting Started with Angular 2.0">Getting Started with Angular 2.0</a> - 177,582 views</li><li><a href="./../developing-a-mean-app-with-angular-2-0/index.html"  title="Developing a MEAN app with Angular 2.0">Developing a MEAN app with Angular 2.0</a> - 149,713 views</li><li><a href="./../getting-started-with-node-webkit-apps/index.html"  title="Node Webkit &ndash; Build Desktop Apps with Node and Web Technologies">Node Webkit &ndash; Build Desktop Apps with Node and Web Technologies</a> - 93,571 views</li><li><a href="./../rpi-live-streaming/index.html"  title="Raspberry Pi, Camera and Node.js &ndash; Live Streaming with Websockets #IoT">Raspberry Pi, Camera and Node.js &ndash; Live Streaming with Websockets #IoT</a> - 91,974 views</li></ul>
</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h1 class="widget-title">Recent Posts</h1>		<ul>
<li>
<a href="./../learning-ionic/index.html">Learning Ionic</a>
</li>
<li>
<a href="./../electron-wordpress-angular-material-an-offline-viewer/index.html">Electron, WordPress &#038; Angular Material &#8211; An Offline Viewer</a>
</li>
<li>
<a href="./../developing-a-mean-app-with-angular-2-0/index.html">Developing a MEAN app with Angular 2.0</a>
</li>
<li>
<a href="./../pushbots-and-cordova/index.html">Pushbots and Cordova &#8211; Easy Push Notifications for your app</a>
</li>
<li>
<a href="./../getting-started-with-client-side-storage/index.html">Getting Started with Client Side Storage</a>
</li>
</ul>
</aside><aside id="categories-2" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
<li class="cat-item cat-item-141"><a href="./../architecture/index.html" >Architecture</a> (8)
</li>
<li class="cat-item cat-item-3"><a href="./../css/index.html" >CSS</a> (9)
<ul class='children'>
<li class="cat-item cat-item-5"><a href="./../css/css3/index.html" >CSS3</a> (6)
</li>
<li class="cat-item cat-item-26"><a href="./../css/less/index.html" >LESS</a> (3)
</li>
<li class="cat-item cat-item-55"><a href="./../css/sass/index.html" >SASS</a> (1)
</li>
</ul>
</li>
<li class="cat-item cat-item-117"><a href="./../database/index.html" >Database</a> (17)
<ul class='children'>
<li class="cat-item cat-item-136"><a href="./../database/disk-db/index.html" >Disk DB</a> (6)
</li>
<li class="cat-item cat-item-131"><a href="./../database/firebase/index.html" >Firebase</a> (4)
</li>
<li class="cat-item cat-item-118"><a href="./../database/mongodb/index.html" >MongoDB</a> (8)
<ul class='children'>
<li class="cat-item cat-item-119"><a href="./../database/mongodb/mongolab/index.html" >MongoLab</a> (3)
</li>
<li class="cat-item cat-item-123"><a href="./../database/mongodb/monk/index.html" >Monk</a> (1)
</li>
</ul>
</li>
</ul>
</li>
<li class="cat-item cat-item-125"><a href="./../deployments/index.html" >Deployments</a> (4)
<ul class='children'>
<li class="cat-item cat-item-126"><a href="./../deployments/heroku/index.html" >Heroku</a> (2)
</li>
</ul>
</li>
<li class="cat-item cat-item-135"><a href="./../desktop-apps/index.html" >Desktop Apps</a> (8)
</li>
<li class="cat-item cat-item-155"><a href="./../dna-analysis/index.html" >DNA Analysis</a> (1)
</li>
<li class="cat-item cat-item-112"><a href="./../es6/index.html" >ECMAScript 6</a> (3)
</li>
<li class="cat-item cat-item-162"><a href="./../electron-atom-shell/index.html" >Electron (atom shell)</a> (1)
</li>
<li class="cat-item cat-item-25"><a href="./../frameworks/index.html" >Frameworks</a> (42)
<ul class='children'>
<li class="cat-item cat-item-160"><a href="./../frameworks/angular-2-0/index.html" >Angular 2.0</a> (2)
</li>
<li class="cat-item cat-item-108"><a href="./../frameworks/angularjs/index.html" >Angularjs</a> (21)
</li>
<li class="cat-item cat-item-132"><a href="./../frameworks/backbonejs/index.html" >Backbonejs</a> (1)
</li>
<li class="cat-item cat-item-105"><a href="./../frameworks/bootstrap/index.html" >Bootstrap</a> (9)
</li>
<li class="cat-item cat-item-159"><a href="./../frameworks/emberjs/index.html" >Emberjs</a> (1)
</li>
<li class="cat-item cat-item-56"><a href="./../frameworks/foundation/index.html" >Foundation</a> (3)
</li>
<li class="cat-item cat-item-110"><a href="./../frameworks/framework7/index.html" >Framework7</a> (1)
</li>
<li class="cat-item cat-item-107"><a href="./../frameworks/ionic/index.html" >Ionic</a> (11)
</li>
<li class="cat-item cat-item-157"><a href="./../frameworks/lumx/index.html" >Lumx</a> (1)
</li>
<li class="cat-item cat-item-138"><a href="./../frameworks/mean/index.html" >MEAN</a> (4)
</li>
<li class="cat-item cat-item-116"><a href="./../frameworks/meteorjs/index.html" >Meteorjs</a> (1)
</li>
<li class="cat-item cat-item-122"><a href="./../frameworks/onsen-ui/index.html" >Onsen UI</a> (2)
</li>
</ul>
</li>
<li class="cat-item cat-item-101"><a href="./../git/index.html" >Git</a> (12)
<ul class='children'>
<li class="cat-item cat-item-102"><a href="./../git/github/index.html" >GitHub</a> (10)
</li>
</ul>
</li>
<li class="cat-item cat-item-2"><a href="./../html/index.html" >HTML</a> (22)
<ul class='children'>
<li class="cat-item cat-item-4"><a href="./../html/html5/index.html" >HTML5</a> (21)
<ul class='children'>
<li class="cat-item cat-item-158"><a href="./../html/html5/webrtc/index.html" >WebRTC</a> (1)
</li>
<li class="cat-item cat-item-106"><a href="./../html/html5/websockets/index.html" >WebSockets</a> (6)
</li>
</ul>
</li>
</ul>
</li>
<li class="cat-item cat-item-137"><a href="./../intels-app-ui/index.html" >Intel&#039;s App UI</a> (1)
</li>
<li class="cat-item cat-item-143"><a href="./../iot/index.html" >IoT</a> (6)
</li>
<li class="cat-item cat-item-1"><a href="./../javascript/index.html" >Javascript</a> (75)
<ul class='children'>
<li class="cat-item cat-item-6"><a href="./../javascript/jquery/index.html" >jQuery</a> (14)
</li>
</ul>
</li>
<li class="cat-item cat-item-151"><a href="./../material-design/index.html" >Material Design</a> (3)
</li>
<li class="cat-item cat-item-99"><a href="./../mobile/index.html" >Mobile</a> (21)
<ul class='children'>
<li class="cat-item cat-item-103"><a href="./../mobile/android/index.html" >Android</a> (15)
</li>
<li class="cat-item cat-item-113"><a href="./../mobile/firefox-os/index.html" >Firefox OS</a> (2)
</li>
<li class="cat-item cat-item-104"><a href="./../mobile/ios/index.html" >iOS</a> (11)
</li>
<li class="cat-item cat-item-100"><a href="./../mobile/phonegap/index.html" >PhoneGap</a> (16)
</li>
</ul>
</li>
<li class="cat-item cat-item-149"><a href="./../mqtt/index.html" >MQTT</a> (1)
</li>
<li class="cat-item cat-item-163"><a href="./../my-books/index.html" >My Books</a> (1)
</li>
<li class="cat-item cat-item-45"><a href="./../node/index.html" >Node</a> (60)
<ul class='children'>
<li class="cat-item cat-item-152"><a href="./../node/cli/index.html" >CLI</a> (3)
</li>
<li class="cat-item cat-item-121"><a href="./../node/expressjs/index.html" >Expressjs</a> (18)
</li>
<li class="cat-item cat-item-156"><a href="./../node/genome/index.html" >Genome</a> (1)
</li>
<li class="cat-item cat-item-62"><a href="./../node/grunt/index.html" >Grunt</a> (8)
</li>
<li class="cat-item cat-item-124"><a href="./../node/koa/index.html" >Koa</a> (1)
</li>
<li class="cat-item cat-item-134"><a href="./../node/node-webkit/index.html" >Node Webkit</a> (7)
</li>
<li class="cat-item cat-item-54"><a href="./../node/npm/index.html" >NPM</a> (15)
</li>
<li class="cat-item cat-item-120"><a href="./../node/restify/index.html" >Restify</a> (3)
</li>
</ul>
</li>
<li class="cat-item cat-item-161"><a href="./../push-notifications/index.html" >Push Notifications</a> (1)
</li>
<li class="cat-item cat-item-59"><a href="./../quick-and-dirty/index.html" >Quick and Dirty</a> (42)
</li>
<li class="cat-item cat-item-142"><a href="./../raspberry-pi/index.html" >Raspberry Pi</a> (9)
</li>
<li class="cat-item cat-item-60"><a href="./../setup/index.html" >Setup</a> (60)
</li>
<li class="cat-item cat-item-61"><a href="./../testing/index.html" >Testing</a> (5)
<ul class='children'>
<li class="cat-item cat-item-129"><a href="./../testing/jasmine/index.html" >Jasmine</a> (1)
</li>
<li class="cat-item cat-item-128"><a href="./../testing/protractor/index.html" >Protractor</a> (1)
</li>
<li class="cat-item cat-item-98"><a href="./../testing/test-automation/index.html" >Test Automation</a> (1)
</li>
<li class="cat-item cat-item-41"><a href="./../testing/tdd/index.html" >Test Driven Developement</a> (2)
</li>
</ul>
</li>
<li class="cat-item cat-item-139"><a href="./../third-party-products/index.html" >Third Party Products</a> (4)
<ul class='children'>
<li class="cat-item cat-item-140"><a href="./../third-party-products/twilio/index.html" >Twilio</a> (4)
</li>
</ul>
</li>
<li class="cat-item cat-item-58"><a href="./../tutorial/index.html" >Tutorial</a> (79)
</li>
<li class="cat-item cat-item-130"><a href="./../performance-analysis/index.html" >UI Performance</a> (1)
</li>
<li class="cat-item cat-item-109"><a href="./../web-components/index.html" >Web Components</a> (3)
</li>
<li class="cat-item cat-item-133"><a href="./../google-web-starter-kit/index.html" >Web Starter Kit</a> (1)
</li>
</ul>
</aside><aside id="archives-2" class="widget widget_archive"><h1 class="widget-title">Archives</h1>		<ul>
<li><a href='./../2015/07/index.html'>July 2015</a></li>
<li><a href='./../2015/05/index.html'>May 2015</a></li>
<li><a href='./../2015/04/index.html'>April 2015</a></li>
<li><a href='./../2015/03/index.html'>March 2015</a></li>
<li><a href='./../2015/02/index.html'>February 2015</a></li>
<li><a href='./../2015/01/index.html'>January 2015</a></li>
<li><a href='./../2014/12/index.html'>December 2014</a></li>
<li><a href='./../2014/11/index.html'>November 2014</a></li>
<li><a href='./../2014/10/index.html'>October 2014</a></li>
<li><a href='./../2014/09/index.html'>September 2014</a></li>
<li><a href='./../2014/08/index.html'>August 2014</a></li>
<li><a href='./../2014/07/index.html'>July 2014</a></li>
<li><a href='./../2014/06/index.html'>June 2014</a></li>
<li><a href='./../2014/05/index.html'>May 2014</a></li>
<li><a href='./../2014/04/index.html'>April 2014</a></li>
<li><a href='./../2014/03/index.html'>March 2014</a></li>
<li><a href='./../2014/02/index.html'>February 2014</a></li>
</ul>
</aside><aside id="wysija-3" class="widget widget_wysija"><h1 class="widget-title">Inform me about new posts</h1><div class="widget_wysija_cont"><div id="msg-form-wysija-3" class="wysija-msg ajax"></div><form id="form-wysija-3" method="post" action="#wysija" class="widget_wysija">
<p class="wysija-paragraph">
<label>Email <span class="wysija-required">*</span></label>
<input type="text" name="wysija[user][email]" class="wysija-input validate[required,custom[email]]" title="Email"  value="" />
<span class="abs-req">
<input type="text" name="wysija[user][abs][email]" class="wysija-input validated[abs][email]" value="" />
</span>
</p>
<input class="wysija-submit wysija-submit-field" type="submit" value="Subscribe!" />
<input type="hidden" name="form_id" value="1" />
<input type="hidden" name="action" value="save" />
<input type="hidden" name="controller" value="subscribers" />
<input type="hidden" value="1" name="wysija-page" />
<input type="hidden" name="wysija[user_list][list_ids]" value="3" />
</form></div></aside>	</div><!-- #secondary -->
	<script>
var _prum = [['id', '544090ababe53d0e3e76d6ce'],
['mark', 'firstbyte', (new Date()).getTime()]];
(function() {
var s = document.getElementsByTagName('script')[0]
, p = document.createElement('script');
p.async = 'async';
p.src = '//rum-static.pingdom.net/prum.min.js';
s.parentNode.insertBefore(p, s);
})();
</script>
</div><!-- #content -->
<footer id="colophon" class="site-footer" role="contentinfo">
<div class="site-info">
All Rights Reserved
<span class="sep"> | </span>
The Jackal of Javascript
</div><!-- .site-info -->
<div class="rnd-circle" style="background: black;width: 10px;height: 10px;border-radius: 50%;"></div>
</footer><!-- #colophon -->
</div><!-- #page -->
<script type='text/javascript'><!--
var seriesdropdown = document.getElementById("orgseries_dropdown");
if (seriesdropdown) {
function onSeriesChange() {
if ( seriesdropdown.options[seriesdropdown.selectedIndex].value != ( 0 || -1 ) ) {
location.href = "./series/"+seriesdropdown.options[seriesdropdown.selectedIndex].value;
}
}
seriesdropdown.onchange = onSeriesChange;
}
--></script>
<script type="text/javascript">
// <![CDATA[
var disqus_shortname = 'thejackalofjavascriptcom';
(function () {
var nodes = document.getElementsByTagName('span');
for (var i = 0, url; i < nodes.length; i++) {
if (nodes[i].className.indexOf('dsq-postid') != -1) {
nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
url = nodes[i].parentNode.href.split('#', 1);
if (url.length == 1) { url = url[0]; }
else { url = url[1]; }
nodes[i].parentNode.href = url + '#disqus_thread';
}
}
var s = document.createElement('script'); 
s.async = true;
s.type = 'text/javascript';
s.src = '//' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
// ]]>
</script>
<div class="scroll-back-to-top-wrapper">
<span class="scroll-back-to-top-inner">
<i class="fa fa-2x fa-arrow-circle-up"></i>
</span>
</div>
<style type="text/css">
#wpfront-notification-bar 
{
background: #242d36;
background: -moz-linear-gradient(top, #242d36 0%, #242d36 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#242d36), color-stop(100%,#242d36));
background: -webkit-linear-gradient(top, #242d36 0%,#242d36 100%);
background: -o-linear-gradient(top, #242d36 0%,#242d36 100%);
background: -ms-linear-gradient(top, #242d36 0%,#242d36 100%);
background: linear-gradient(to bottom, #242d36 0%, #242d36 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#242d36', endColorstr='#242d36',GradientType=0 );
}
#wpfront-notification-bar div.wpfront-message
{
color: #ffffff;
}
#wpfront-notification-bar a.wpfront-button
{
background: #f45145;
background: -moz-linear-gradient(top, #f45145 0%, #f45145 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f45145), color-stop(100%,#f45145));
background: -webkit-linear-gradient(top, #f45145 0%,#f45145 100%);
background: -o-linear-gradient(top, #f45145 0%,#f45145 100%);
background: -ms-linear-gradient(top, #f45145 0%,#f45145 100%);
background: linear-gradient(to bottom, #f45145 0%, #f45145 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f45145', endColorstr='#f45145',GradientType=0 );
color: #ffffff;
}
#wpfront-notification-bar-open-button
{
background-color: #00b7ea;
}
#wpfront-notification-bar  div.wpfront-close 
{
border: 1px solid #555555;
background-color: #555555;
color: #000000;
}
#wpfront-notification-bar  div.wpfront-close:hover 
{
border: 1px solid #aaaaaa;
background-color: #aaaaaa;
}
</style>
<div id="wpfront-notification-bar-spacer"  style="display: none;">
<div id="wpfront-notification-bar-open-button" class="top wpfront-bottom-shadow"></div>
<div id="wpfront-notification-bar" class="wpfront-fixed">
<div class="wpfront-close">X</div>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td>
<div class="wpfront-message">
Learn your way around Ionic framework. Check out Learning Ionic!                     </div>
<div>
<a class="wpfront-button" href="https://www.packtpub.com/application-development/learning-ionic/?utm_source=Jkthejackalofjavascript&utm_medium=referral&utm_campaign=1783552603"  target="_blank" >Buy</a>
</div>
</td>
</tr>
</table>
</div>
</div>
<style type="text/css">
.wpfront-message{line-height:27px; vertical-align:baseline !important;}</style>
<script type="text/javascript">if(typeof wpfront_notification_bar == "function") wpfront_notification_bar({"position":1,"height":0,"fixed_position":"on","animate_delay":0.5,"close_button":true,"button_action_close_bar":false,"auto_close_after":0,"display_after":1,"is_admin_bar_showing":false,"display_open_button":false,"keep_closed":"on","keep_closed_for":1,"position_offset":0,"display_scroll":"on","display_scroll_offset":100});</script><!-- <link rel='stylesheet' id='mediaelement-css'  href='./wp-includes/js/mediaelement/mediaelementplayer.min.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='wp-mediaelement-css'  href='./wp-includes/js/mediaelement/wp-mediaelement.css' type='text/css' media='all' /> -->
<link rel="stylesheet" type="text/css" href="./../wp-content/cache/wpfc-minified/4e66cf57d6eb2f4ec7054b232e28c4d9/1511014698index.css" media="all"/>
<script type='text/javascript' src='./../wp-content/plugins/jetpack/modules/photon/photon.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var scrollBackToTop = {"scrollDuration":"500","fadeDuration":"0.5"};
/* ]]> */
</script>
<script type='text/javascript' src='./../wp-content/plugins/scroll-back-to-top/assets/js/scroll-back-to-top.js'></script>
<script type='text/javascript' src='./../wp-content/plugins/simple-share-buttons-adder/js/ssba.min.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":".\/wp-admin\/admin-ajax.php","post_id":"2115"};
/* ]]> */
</script>
<script type='text/javascript' src='./../wp-content/plugins/wp-postviews/postviews-cache.js'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js'></script>
<script type='text/javascript' src='./../wp-content/themes/sorbet/js/menus.js'></script>
<script type='text/javascript' src='./../wp-content/themes/sorbet/js/skip-link-focus-fix.js'></script>
<script type='text/javascript' src='./../wp-includes/js/comment-reply.min.js'></script>
<script type='text/javascript' src='./../wp-content/plugins/lazy-load/js/jquery.sonar.min.js'></script>
<script type='text/javascript' src='./../wp-content/plugins/lazy-load/js/lazy-load.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var mejsL10n = {"language":"en-US","strings":{"Close":"Close","Fullscreen":"Fullscreen","Download File":"Download File","Download Video":"Download Video","Play\/Pause":"Play\/Pause","Mute Toggle":"Mute Toggle","None":"None","Turn off Fullscreen":"Turn off Fullscreen","Go Fullscreen":"Go Fullscreen","Unmute":"Unmute","Mute":"Mute","Captions\/Subtitles":"Captions\/Subtitles"}};
var _wpmejsSettings = {"pluginPath":"\/wp-includes\/js\/mediaelement\/"};
/* ]]> */
</script>
<script type='text/javascript' src='./../wp-includes/js/mediaelement/mediaelement-and-player.min.js'></script>
<script type='text/javascript' src='./../wp-includes/js/mediaelement/wp-mediaelement.js'></script>
<script type='text/javascript' src='./../wp-content/plugins/jetpack/_inc/postmessage.js'></script>
<script type='text/javascript' src='./../wp-content/plugins/jetpack/_inc/jquery.jetpack-resize.js'></script>
<script type='text/javascript' src='./../wp-content/plugins/jetpack/_inc/jquery.inview.js'></script>
<script type='text/javascript' src='./../wp-content/plugins/jetpack/modules/likes/queuehandler.js'></script>
<script type='text/javascript' src='./../wp-content/plugins/wysija-newsletters/js/validate/languages/jquery.validationEngine-en.js'></script>
<script type='text/javascript' src='./../wp-content/plugins/wysija-newsletters/js/validate/jquery.validationEngine.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var wysijaAJAX = {"action":"wysija_ajax","controller":"subscribers","ajaxurl":".\/wp-admin\/admin-ajax.php","loadingTrans":"Loading...","is_rtl":""};
var wysijaAJAX = {"action":"wysija_ajax","controller":"subscribers","ajaxurl":".\/wp-admin\/admin-ajax.php","loadingTrans":"Loading...","is_rtl":""};
/* ]]> */
</script>
<script type='text/javascript' src='./../wp-content/plugins/wysija-newsletters/js/front-subscribers.js'></script>
<iframe src='http://widgets.wp.com/likes/master.html?ver=20141028#ver=20141028' scrolling='no' id='likes-master' name='likes-master' style='display:none;'></iframe>
<div id='likes-other-gravatars'><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
<script type="text/javascript">
jQuery.noConflict();
(function( $ ) {
$(function() {
// More code using $ as alias to jQuery
$("area[href*=#],a[href*=#]:not([href=#]):not([href^='#tab']):not([href^='#quicktab']):not([href^='#pane'])").click(function() {
if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
var target = $(this.hash);
target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
if (target.length) {
$('html,body').animate({
scrollTop: target.offset().top - 20  
},900 ,'easeOutQuint');
return false;
}
}
});
});
})(jQuery);	
</script>				
<script type='text/javascript' src='http://stats.wp.com/e-201746.js' async defer></script>
<script type='text/javascript'>
_stq = window._stq || [];
_stq.push([ 'view', {v:'ext',j:'1:3.7',blog:'70838519',post:'2115',tz:'5.5',srv:'thejackalofjavascript.com'} ]);
_stq.push([ 'clickTrackerInit', '70838519', '2115' ]);
</script>
<div id="upprev_box"><h6>Read previous post:</h6><div class="upprev_excerpt"><h5><a href="./../ionic-twilio-and-node-scheduler-part-2/index.html" rel="Ionic, Twilio and Node Scheduler &#8211; A Reminder App &#8211; Part I [Server]">Ionic, Twilio and Node Scheduler – A Reminder App – Part II [Client]</a></h5><p>Ionic, Twilio and Node Scheduler – A Reminder App – Part II [Client] This is the second part of the...</p></div><a id="upprev_close" href="#" rel="close">Close</a></div><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47881846-1', 'auto');
ga('send', 'pageview');
</script>
<a style="display:none;" href="http://www.alexa.com/siteinfo/./"><script type="text/javascript" src="http://xslt.alexa.com/site_stats/js/t/a?url=./"></script></a>
</body>
</html><script>if(document.getElementById('to-contents') == null){ } else {var a = document.getElementById('to-contents').getElementsByTagName('a'); for(var i=0; i< a.length;i++){var b = a[i].getAttribute('href').split('#');if(b.length >=2)a[i].setAttribute('href', '#'+b[1]);}}</script>
<script>if(typeof jQuery == 'function'){jQuery('.widgetGuts.shortcode h3').html('Inform Me About New Posts')}</script><!-- WP Fastest Cache file was created in 4.49825382233 seconds, on 18-11-17 14:18:19 -->