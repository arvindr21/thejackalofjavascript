<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="alexaVerifyID" content="tHZTfJpU56tqERN4vjth74jHqBM"/>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="/xmlrpc.php">
<!-- <link href='http://fonts.googleapis.com/css?family=Exo+2' rel='stylesheet' type='text/css'> -->
<link rel="shortcut icon" href="/wp-content/uploads/2014/02/favicon.ico" type="image/x-icon">
<meta name="keywords" content="Javascript, HTML5, CSS3, ES6, Ecmascript, Hybrid Apps, Mobile Web Development, Desktop Apps, Apps, Arvind R, Arvind Ravulavaru, The Jackal of Javascript">
<link rel="icon" href="/wp-content/uploads/2014/02/favicon.ico" type="image/x-icon">
<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'> -->
<link rel="stylesheet" type="text/css" href="/wp-content/cache/wpfc-minified/61cc3c87f2aa625d55d3026ecc452e96/1511014149index.css" media="all"/>
<!-- Performance scores of this site is tuned by WP Performance Score Booster plugin v1.5 - http://wordpress.org/plugins/wp-performance-score-booster -->
<!-- Jetpack Site Verification Tags -->
<meta name="google-site-verification" content="1QBi99oBZzn4xisTyRUgPd4BXjQ-6Tu09iK6V_bviIY" />
<meta name="msvalidate.01" content="33E048D3C4E943B6450230EA909E12C6" />
<meta name="p:domain_verify" content="662a829c1b5ccc13015f1cc5d00ec7e4" />
<!-- This site is optimized with the Yoast SEO plugin v3.1 - https://yoast.com/wordpress/plugins/seo/ -->
<title>MapReduce in MongoDB | The Jackal of Javascript</title>
<meta name="description" content="MapReduce in MongoDB MapReduce in MongoDB tutorial MapReduce in MongoDB Getting started MapReduce in MongoDB Example MapReduce in MongoDB with Node js In t"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/mapreduce-in-mongodb/" />
<link rel="publisher" href="https://plus.google.com/ArvindRavulavaru"/>
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="MapReduce in MongoDB | The Jackal of Javascript" />
<meta property="og:description" content="MapReduce in MongoDB MapReduce in MongoDB tutorial MapReduce in MongoDB Getting started MapReduce in MongoDB Example MapReduce in MongoDB with Node js In t" />
<meta property="og:url" content="/mapreduce-in-mongodb/" />
<meta property="og:site_name" content="The Jackal of Javascript" />
<meta property="article:publisher" content="https://www.facebook.com/arvindravulavaru" />
<meta property="article:section" content="Database" />
<meta property="article:published_time" content="2014-04-23T22:58:21+05:30" />
<meta property="article:modified_time" content="2014-04-23T22:59:55+05:30" />
<meta property="og:updated_time" content="2014-04-23T22:59:55+05:30" />
<meta property="og:image" content="/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.20.43-pm-407x300.png" />
<meta property="og:image" content="/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.43.35-pm-451x63.png" />
<meta property="og:image" content="/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.45.49-pm-451x225.png" />
<meta property="og:image" content="/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-4.27.22-pm-451x45.png" />
<meta property="og:image" content="/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-4.31.19-pm-442x300.png" />
<meta property="og:image" content="/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-9.00.09-pm-451x54.png" />
<meta property="og:image" content="/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-8.34.35-pm-451x168.png" />
<meta property="og:image" content="/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-8.59.23-pm-451x90.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="MapReduce in MongoDB MapReduce in MongoDB tutorial MapReduce in MongoDB Getting started MapReduce in MongoDB Example MapReduce in MongoDB with Node js In t" />
<meta name="twitter:title" content="MapReduce in MongoDB | The Jackal of Javascript" />
<meta name="twitter:site" content="@arvindr21" />
<meta name="twitter:image" content="/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.20.43-pm-407x300.png" />
<meta name="twitter:creator" content="@arvindr21" />
<!-- / Yoast SEO plugin. -->
<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js"}};
!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
display: inline !important;
border: none !important;
box-shadow: none !important;
height: 1em !important;
width: 1em !important;
margin: 0 .07em !important;
vertical-align: -0.1em !important;
background: none !important;
padding: 0 !important;
}
</style>
<!-- <link rel='stylesheet' id='savrix-style.css-css'  href='/wp-content/plugins/savrix-android-market/savrix-style-only-play.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='validate-engine-css-css'  href='/wp-content/plugins/wysija-newsletters/css/validationEngine.jquery.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='crayon-css'  href='/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='crayon-theme-arduino-ide-css'  href='/wp-content/plugins/crayon-syntax-highlighter/themes/arduino-ide/arduino-ide.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='crayon-font-droid-sans-mono-css'  href='/wp-content/plugins/crayon-syntax-highlighter/fonts/droid-sans-mono.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='orgseries-default-css-css'  href='/wp-content/plugins/organize-series/orgSeries.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='responsive-lightbox-prettyphoto-css'  href='/wp-content/plugins/responsive-lightbox/assets/prettyphoto/css/prettyPhoto.css' type='text/css' media='all' /> -->
<link rel="stylesheet" type="text/css" href="/wp-content/cache/wpfc-minified/9f9f3b5f286a1b327e6bb0fdb1185c24/1511014149index.css" media="all"/>
<link rel='stylesheet' id='font-awesome-css'  href='//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css' type='text/css' media='screen' />
<!-- <link rel='stylesheet' id='ssbaFont-css'  href='//fonts.googleapis.com/css?family=Indie+Flower&#038;ver=4.2.16' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='wpfront-notification-bar-css'  href='/wp-content/plugins/wpfront-notification-bar/css/wpfront-notification-bar.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='sorbet-style-css'  href='/wp-content/themes/sorbet/style.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='sorbet-source-sans-pro-css'  href='http://fonts.googleapis.com/css?family=Source+Sans+Pro%3A300%2C400%2C700%2C300italic%2C400italic%2C700italic&#038;subset=latin%2Clatin-ext&#038;ver=4.2.16' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='sorbet-pt-serif-css'  href='http://fonts.googleapis.com/css?family=PT+Serif%3A400%2C700%2C400italic%2C700italic&#038;subset=latin%2Clatin-ext&#038;ver=4.2.16' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='sorbet-genericons-css'  href='/wp-content/themes/sorbet/genericons/genericons.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='easy_table_style-css'  href='/wp-content/plugins/easy-table/themes/default/style.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='upprev-css-css'  href='/wp-content/plugins/upprev/styles/upprev.css' type='text/css' media='all' /> -->
<!-- <link rel='stylesheet' id='jetpack_css-css'  href='/wp-content/plugins/jetpack/css/jetpack.css' type='text/css' media='all' /> -->
<link rel="stylesheet" type="text/css" href="/wp-content/cache/wpfc-minified/3af13bcd925b3eaa358c8ad5070bb07b/1511014148index.css" media="all"/>
<!-- This site uses the Google Analytics by Yoast plugin v5.4.6 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');
__gaTracker('create', 'UA-47881846-1', 'auto');
__gaTracker('set', 'forceSSL', true);
__gaTracker('require', 'displayfeatures');
__gaTracker('send','pageview');
</script>
<!-- / Google Analytics by Yoast -->
<script type="text/javascript">
var iworks_upprev = { animation: 'flyout', position: 'right', offset_percent: 75, offset_element: '#comments', css_width: 360, css_side: 5, compare: 'simple', url_new_window: 0, ga_track_views: 1, ga_track_clicks: 1, ga_opt_noninteraction: 1, title: 'MapReduce in MongoDB' };
</script>
<script src='/wp-content/cache/wpfc-minified/1f21a7a8ca343ebb57ffeb4ab24afbd9/1511014152index.js' type="text/javascript"></script>
<!-- <script type='text/javascript' src='/wp-includes/js/jquery/jquery.js'></script> -->
<!-- <script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js'></script> -->
<!-- <script type='text/javascript' src='/wp-content/plugins/jetpack/modules/related-posts/related-posts.js'></script> -->
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script src='/wp-content/cache/wpfc-minified/052c748258385b6c23fc6642e73a4285/1511014152index.js' type="text/javascript"></script>
<!-- <script type='text/javascript' src='/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js'></script> -->
<!-- <script type='text/javascript' src='/wp-content/plugins/responsive-lightbox/assets/prettyphoto/js/jquery.prettyPhoto.js'></script> -->
<script type='text/javascript'>
/* <![CDATA[ */
var rlArgs = {"script":"prettyphoto","selector":"lightbox","customEvents":"","activeGalleries":"1","animationSpeed":"normal","slideshow":"0","slideshowDelay":"5000","slideshowAutoplay":"0","opacity":"0.75","showTitle":"1","allowResize":"1","allowExpand":"1","width":"1080","height":"720","separator":"\/","theme":"pp_default","horizontalPadding":"20","hideFlash":"0","wmode":"opaque","videoAutoplay":"0","modal":"0","deeplinking":"0","overlayGallery":"1","keyboardShortcuts":"1","social":"0"};
/* ]]> */
</script>
<script src='/wp-content/cache/wpfc-minified/d57c91500961bea5aea0e849cf08f7e7/1511014151index.js' type="text/javascript"></script>
<!-- <script type='text/javascript' src='/wp-content/plugins/responsive-lightbox/js/front.js'></script> -->
<!-- <script type='text/javascript' src='/wp-content/plugins/wpfront-notification-bar/jquery-plugins/jquery.c.js'></script> -->
<!-- <script type='text/javascript' src='/wp-content/plugins/wpfront-notification-bar/js/wpfront-notification-bar.js'></script> -->
<!-- <script type='text/javascript' src='/wp-content/plugins/upprev/scripts/upprev.js'></script> -->
<script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js'></script>
<meta name="generator" content="WordPress 4.2.16" />
<style>
.scroll-back-to-top-wrapper {
position: fixed;
opacity: 0;
visibility: hidden;
overflow: hidden;
text-align: center;
z-index: 99999999;
background-color: #777777;
color: #eeeeee;
width: 50px;
height: 48px;
line-height: 48px;
right: 30px;
bottom: 30px;
padding-top: 2px;
border-top-left-radius: 10px;
border-top-right-radius: 10px;
border-bottom-right-radius: 10px;
border-bottom-left-radius: 10px;
-webkit-transition: all 0.5s ease-in-out;
-moz-transition: all 0.5s ease-in-out;
-ms-transition: all 0.5s ease-in-out;
-o-transition: all 0.5s ease-in-out;
transition: all 0.5s ease-in-out;
}
.scroll-back-to-top-wrapper:hover {
background-color: #888888;
color: #eeeeee;
}
.scroll-back-to-top-wrapper.show {
visibility:visible;
cursor:pointer;
opacity: 1.0;
}
.scroll-back-to-top-wrapper i.fa {
line-height: inherit;
}
.scroll-back-to-top-wrapper .fa-lg {
vertical-align: 0;
}
</style><style type="text/css">	.ssba {
}
.ssba img
{
width: 35px !important;
padding: 6px;
border:  0;
box-shadow: none !important;
display: inline !important;
vertical-align: middle;
}
.ssba, .ssba a
{
text-decoration:none;
border:0;
background: none;
font-family: Indie Flower;
font-size: 	20px;
}.ssba_sharecount:after, .ssba_sharecount:before {
right: 100%;
border: solid transparent;
content: " ";
height: 0;
width: 0;
position: absolute;
pointer-events: none;
}
.ssba_sharecount:after {
border-color: rgba(224, 221, 221, 0);
border-right-color: #f5f5f5;
border-width: 5px;
top: 50%;
margin-top: -5px;
}
.ssba_sharecount:before {
border-color: rgba(85, 94, 88, 0);
border-right-color: #e0dddd;
border-width: 6px;
top: 50%;
margin-top: -6px;
}
.ssba_sharecount {
font: 11px Arial, Helvetica, sans-serif;
padding: 5px;
-khtml-border-radius: 6px;
-o-border-radius: 6px;
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
border-radius: 6px;
position: relative;
border: 1px solid #e0dddd;color: #555e58;
background: #ffffff;
}
.ssba_sharecount:after {
border-right-color: #ffffff;
}</style><style id="popup-maker-themes"  type="text/css">/* Popup Theme 2995: Default Theme */
.popmake-overlay.theme-2995, .popmake-overlay.theme-default-theme { background-color: rgba( 255, 255, 255, 1 ) } 
.popmake.theme-2995, .popmake.theme-default-theme { padding: 18px; border-radius: 0px; border: 1px none #000000; box-shadow: 1px 1px 3px 0px rgba( 2, 2, 2, 0.23 ); background-color: rgba( 249, 249, 249, 1 ) } 
.popmake.theme-2995 .popmake-title, .popmake.theme-default-theme .popmake-title { color: #000000; text-align: left; text-shadow: 0px 0px 0px rgba( 2, 2, 2, 0.23 ); font-family: inherit; font-weight: inherit; font-size: 32px; font-style: normal; line-height: 36px } 
.popmake.theme-2995 .popmake-content, .popmake.theme-default-theme .popmake-content { color: #8c8c8c; font-family: inherit; font-weight: inherit; font-style: normal } 
.popmake.theme-2995 > .popmake-close, .popmake.theme-default-theme > .popmake-close { height: 20px; width: 20px; left: auto; right: 0px; bottom: auto; top: 0px; padding: 8px; color: #ffffff; font-family: inherit; font-weight: inherit; font-size: 12px; font-style: normal; line-height: 14px; border: 1px none #ffffff; border-radius: 0px; box-shadow: 0px 0px 0px 0px rgba( 2, 2, 2, 0.23 ); text-shadow: 0px 0px 0px rgba( 0, 0, 0, 0.23 ); background-color: rgba( 0, 183, 205, 1 ) } 
</style>
<link rel='dns-prefetch' href='//i0.wp.com'>
<link rel='dns-prefetch' href='//i1.wp.com'>
<link rel='dns-prefetch' href='//i2.wp.com'>
<link rel='dns-prefetch' href='//widgets.wp.com'>
<link rel='dns-prefetch' href='//s0.wp.com'>
<link rel='dns-prefetch' href='//0.gravatar.com'>
<link rel='dns-prefetch' href='//1.gravatar.com'>
<link rel='dns-prefetch' href='//2.gravatar.com'>
<style type="text/css">
#upprev_box{bottom:5px;width:360px;right:5px;display:block;right:-415px;display:block;}
</style>
</head>
<body class="single single-post postid-1200 single-format-standard right-sidebar">
<div id="page" class="hfeed site">
<header id="masthead" class="site-header" role="banner">
<div class="site-header-wrapper">
<div class="site-branding">
<h1 class="site-title"><a href="/" rel="home">The Jackal of Javascript</a></h1>
<h2 class="site-description">Knowing is different &amp; Doing is different</h2>
</div>
<div class="toggles">
<div id="menu-toggle" class="toggle active" title="Menu"><span class="screen-reader-text">Menu</span></div>
<div id="search-toggle" class="toggle" title="Search"><span class="screen-reader-text">Search</span></div>
</div>
</div>
</header><!-- #masthead -->
<div id="menu-toggle-nav" class="panel">
<nav id="site-navigation" class="main-navigation" role="navigation">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<div class="menu-main-container"><ul id="menu-main" class="menu"><li id="menu-item-2579" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-2579"><a href="/">Home</a></li>
<li id="menu-item-2595" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2595"><a href="/portfolio/">About  me</a></li>
<li id="menu-item-2580" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2580"><a href="/history-of-the-web/">History of the Web</a></li>
<li id="menu-item-2726" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2726"><a href="/javascript-101/">Javascript 101</a></li>
<li id="menu-item-2581" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2581"><a href="/contact-request/">Request</a></li>
</ul></div>		</nav><!-- #site-navigation -->
</div>
<div id="search-toggle-nav" class="panel">
<div class="search-wrapper">
<form role="search" method="get" class="search-form" action="/">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s">
</label>
<input type="submit" class="search-submit" value="Search">
</form>
</div>
</div>
<div id="content" class="site-content">
<div id="primary" class="content-area">
<main id="main" class="site-main" role="main">
<article id="post-1200" class="post-1200 post type-post status-publish format-standard hentry category-database category-javascript category-mongodb category-node category-npm category-quick-and-dirty category-tutorial">
<header class="entry-header">
<h1 class="entry-title">MapReduce in MongoDB</h1>	</header><!-- .entry-header -->
<div class="entry-content">
<!-- Simple Share Buttons Adder (6.1.5) simplesharebuttons.com --><div class="ssba ssba-wrap"><div style="text-align:left"><a href="http://twitter.com/share?url=/mapreduce-in-mongodb/&amp;text=MapReduce+in+MongoDB+From+The+Jackal+of+Javascript+by+%40arvindr21" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/share?url=/mapreduce-in-mongodb/&amp;text=MapReduce+in+MongoDB+From+The+Jackal+of+Javascript+by+%40arvindr21', '');" data-site="" class="ssba_twitter_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png?w=646" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter" data-recalc-dims="1" /><noscript><img src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png?w=646" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter" data-recalc-dims="1" /></noscript></a><a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=/mapreduce-in-mongodb/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.linkedin.com/shareArticle?mini=true&amp;url=/mapreduce-in-mongodb/', '');" data-site="linkedin" class="ssba_linkedin_share ssba_share_link"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png?w=646" title="LinkedIn" class="ssba ssba-img" alt="Share on LinkedIn" data-recalc-dims="1" /><noscript><img src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png?w=646" title="LinkedIn" class="ssba ssba-img" alt="Share on LinkedIn" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">18</span><a href="https://plus.google.com/share?url=/mapreduce-in-mongodb/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://plus.google.com/share?url=/mapreduce-in-mongodb/', '');" data-site="" class="ssba_google_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/google.png?w=646" title="Google+" class="ssba ssba-img" alt="Share on Google+" data-recalc-dims="1" /><noscript><img src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/google.png?w=646" title="Google+" class="ssba ssba-img" alt="Share on Google+" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">0</span><a href="http://reddit.com/submit?url=/mapreduce-in-mongodb/&amp;title=MapReduce in MongoDB" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://reddit.com/submit?url=/mapreduce-in-mongodb/&amp;title=MapReduce in MongoDB', '');" data-site="reddit" class="ssba_reddit_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/reddit.png?w=646" title="Reddit" class="ssba ssba-img" alt="Share on Reddit" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/reddit.png?w=646" title="Reddit" class="ssba ssba-img" alt="Share on Reddit" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">0</span><a href="https://bufferapp.com/add?url=/mapreduce-in-mongodb/&amp;text=From The Jackal of Javascript MapReduce in MongoDB" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://bufferapp.com/add?url=/mapreduce-in-mongodb/&amp;text=From The Jackal of Javascript MapReduce in MongoDB', '');" data-site="buffer" class="ssba_buffer_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/buffer.png?w=646" title="Buffer" class="ssba ssba-img" alt="Buffer this page" data-recalc-dims="1" /><noscript><img src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/buffer.png?w=646" title="Buffer" class="ssba ssba-img" alt="Buffer this page" data-recalc-dims="1" /></noscript></a><a href="https://flattr.com/submit/auto?user_id=arvindr21&amp;title=MapReduce in MongoDB&amp;url=https://flattr.com/profile/arvindr21" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://flattr.com/submit/auto?user_id=arvindr21&amp;title=MapReduce in MongoDB&amp;url=https://flattr.com/profile/arvindr21', '');" data-site="flattr" class="ssba_flattr_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/flattr.png?w=646" title="Flattr" class="ssba ssba-img" alt="Flattr the author" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/flattr.png?w=646" title="Flattr" class="ssba ssba-img" alt="Flattr the author" data-recalc-dims="1" /></noscript></a><a data-site="email" class="ssba_email_share" href="/cdn-cgi/l/email-protection#f8c78b8d9a929d9b8cc5b59988aa9d9c8d9b9dd89196d8b597969f97bcbade999588c39a979c81c5be8a9795d8ac909dd8b2999b939994d8979ed8b2998e998b9b8a91888cddcac8908c8c88c2d7d78c909d92999b939994979e92998e998b9b8a91888cd69b9795d79599888a9d9c8d9b9dd59196d59597969f979c9ad7"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/email.png?w=646" title="Email" class="ssba ssba-img" alt="Email this to someone" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/email.png?w=646" title="Email" class="ssba ssba-img" alt="Email this to someone" data-recalc-dims="1" /></noscript></a><a data-site="print" class="ssba_print ssba_share_link" href="#" onclick="window.print()"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/print.png?w=646" title="Print" class="ssba ssba-img" alt="Print this page" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/print.png?w=646" title="Print" class="ssba ssba-img" alt="Print this page" data-recalc-dims="1" /></noscript></a></div></div><h1 class="disp-none">MapReduce in MongoDB</h1>
<h2 class="disp-none">MapReduce in MongoDB tutorial</h2>
<h2 class="disp-none">MapReduce in MongoDB Getting started</h2>
<h2 class="disp-none">MapReduce in MongoDB Example</h2>
<h2 class="disp-none">MapReduce in MongoDB with Node js</h2>
<p>In this post, we will take a look at performing MapReduce operations on JSON documents present in MongoDB. We will generate dummy data using <em>dummy-json, </em>a  node package and we will use <em>Mongojs</em> another node package to run MapReduce jobs on that data from our Node application.</p>
<p>For a quick sneak peak, take a look at <a href="http://runnable.com/U1fmE30iHWMIGY_r/mapreduce-in-mongodb" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://runnable.com/U1fmE30iHWMIGY_r/mapreduce-in-mongodb', 'this runnable');" title="Runnable"  target="_blank">this runnable</a> (click on the <em>run</em> button).</p>
<h3>Contents</h3>
<ul id="to-contents" class="ls-none">
<li><a href="/mapreduce-in-mongodb#mongodb">What is MongoDB?</a></li>
<li><a href="/mapreduce-in-mongodb#mapreduce">What is MapReduce?</a></li>
<li><a href="/mapreduce-in-mongodb#setup">Set Up a Project</a>
<ul>
<li><a href="/mapreduce-in-mongodb#mongojs">Mongojs</a></li>
<li><a href="/mapreduce-in-mongodb#dummyjson">Dummy-json</a></li>
</ul>
</li>
<li><a href="/mapreduce-in-mongodb#generatedata">Generate Dummy Data</a></li>
<li><a href="/mapreduce-in-mongodb#makesense">Make sense of the data</a></li>
<li><a href="/mapreduce-in-mongodb#ex1">Example 1 : Get the count of Males and Females</a>
<ul>
<li><a href="/mapreduce-in-mongodb#ex1mapper">Mapper Logic</a></li>
<li><a href="/mapreduce-in-mongodb#ex1reducer">Reducer Logic</a></li>
<li><a href="/mapreduce-in-mongodb#ex1code">Code</a></li>
<li><a href="/mapreduce-in-mongodb#mongoshell">Mongo Shell code</a></li>
</ul>
</li>
<li><a href="/mapreduce-in-mongodb#ex2">Example 2 : Get the Eldest and Youngest Person in each gender</a>
<ul>
<li><a href="/mapreduce-in-mongodb#ex2mapper">Mapper Logic</a></li>
<li><a href="/mapreduce-in-mongodb#ex2reducer">Reducer Logic</a></li>
<li><a href="/mapreduce-in-mongodb#ex2code">Code</a></li>
</ul>
</li>
<li><a href="/mapreduce-in-mongodb#ex3">Example 3 : Count the number of users in each hobby</a>
<ul>
<li><a href="/mapreduce-in-mongodb#ex3mapper">Mapper Logic</a></li>
<li><a href="/mapreduce-in-mongodb#ex3reducer">Reducer Logic</a></li>
<li><a href="/mapreduce-in-mongodb#ex3code">Code</a></li>
</ul>
</li>
</ul>
<p>You can find the complete code <a href="https://github.com/arvindr21/mongoDB-MapReduce" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/arvindr21/mongoDB-MapReduce', 'here');" title="GitHub"  target="_blank">here</a>.</p>
<p><span id="more-1200"></span></p>
<h2 id="mongodb">What is MongoDB?</h2>
<p>MongoDB is a NoSQL database. Unlike MySQL or MSSQL or Oracle DBs, here database have collections instead of tables. We have documents in collections insteads of rows in a table. And best of all, all the documents are stored as JSON. You can know more about MongoDB <a href="http://try.mongodb.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://try.mongodb.org/', 'here');" title="MongoDB"  target="_blank">here</a>.</p>
<p>You can install mongoDB locally from <a href="http://www.mongodb.org/downloads" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.mongodb.org/downloads', 'here');" title="MongoDB Install"  target="_blank">here</a>.</p>
<p>If you have never worked with MongoDB before, you can remember the following commands to navigate around and perform basic operation</p>
<div class="table-responsive"><table  style="width:100%; "  class="easy-table easy-table-default" border="0">
<thead>
<tr><th >Command</th>
<th > Result</th>
</tr>
</thead>
<tbody>
<tr><td >
<span id="crayon-5a10fc1807c36934304875" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">mongod</span></span></span> </td>
<td > will start the MongoDB service</td>
</tr>
<tr><td >
<span id="crayon-5a10fc1807c61595875866" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">mongo</span></span></span> </td>
<td > will step you inside the MongoDB shell (<em>when run in a new terminal while Mongod is running</em>)</td>
</tr>
<tr><td >
<span id="crayon-5a10fc1807c69110087580" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">show </span><span class="crayon-v">dbs</span></span></span> </td>
<td > will show the list of databases</td>
</tr>
<tr><td >
<span id="crayon-5a10fc1807c70508541452" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-st">use</span><span class="crayon-h"> </span><span class="crayon-o">&lt;&lt;</span><span class="crayon-e">database </span><span class="crayon-v">name</span><span class="crayon-o">&gt;&gt;</span></span></span> </td>
<td > will step you inside the database</td>
</tr>
<tr><td >
<span id="crayon-5a10fc1807c77133968317" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">show </span><span class="crayon-v">collections</span></span></span> </td>
<td > will show the list of collections once you are inside the database</td>
</tr>
<tr><td >
<span id="crayon-5a10fc1807c7d265419510" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">collectionName</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> </td>
<td > will show all the documents in that collection</td>
</tr>
<tr><td >
<span id="crayon-5a10fc1807c84811380044" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">collectionName</span><span class="crayon-sy">.</span><span class="crayon-e">findOne</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> </td>
<td > will show the first document</td>
</tr>
<tr><td >
<span id="crayon-5a10fc1807c8a958213645" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">collectionName</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">pretty</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> </td>
<td > will pretty print the JSON data in console</td>
</tr>
<tr><td >
<span id="crayon-5a10fc1807c90109727441" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">collectionName</span><span class="crayon-sy">.</span><span class="crayon-e">insert</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-v">key</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></span></span> </td>
<td > will insert a new record</td>
</tr>
<tr><td >
<span id="crayon-5a10fc1807c97095092281" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">collectionName</span><span class="crayon-sy">.</span><span class="crayon-e">update</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-v">condition</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">$</span><span class="crayon-v">set</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">key</span><span class="crayon-o">:</span><span class="crayon-v">value</span><span class="crayon-sy">}</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">upsert</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></span></span> </td>
<td > will update a record with the given condition &amp; sets the required value. If upsert is true a new document will be created if no documents with matching condition are found</td>
</tr>
<tr><td >
<span id="crayon-5a10fc1807c9d590406142" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">collectionName</span><span class="crayon-sy">.</span><span class="crayon-e">remove</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></span></span> </td>
<td > will remove all the documents in that collection</td>
</tr>
<tr><td >
<span id="crayon-5a10fc1807ca4775465043" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">collectionName</span><span class="crayon-sy">.</span><span class="crayon-e">remove</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-v">key</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></span></span> </td>
<td > will remove the documents matching the condition</td>
</tr>
</tbody></table></div>
<p>You can learn more about MongoDB <a href="http://docs.mongodb.org/manual/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://docs.mongodb.org/manual/', 'here');" title="Manual"  target="_blank">here</a>.</p>
<h2 id="mapreduce">What is MapReduce?</h2>
<p>It is very essential that you get an understanding as how a MapReduce job works. Without this clarity, you may not really achieve the output you are expecting while running these jobs.</p>
<p>From Mongodb.org</p>
<blockquote><p>Map-reduce is a data processing paradigm for condensing large volumes of data into useful aggregated results. For map-reduce operations, MongoDB provides the mapReduce database command.</p></blockquote>
<p>In very simple terms, the mapReduce command takes 2 primary inputs, the mapper function and the reducer function.</p>
<p>A Mapper will start off by reading a collection of data and building a Map with only the required fields we wish to process and group them into one array based on the key. And then this key value pair is fed into a Reducer, which will process the values.</p>
<p>Ex: Let&#8217;s say that we have the following data</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a10fc1807cac540061127" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">sample data from DB</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
[
{
name: foo,
price: 9
},
{
name: foo,
price: 12
},
{
name: bar,
price: 8
},
{
name: baz,
price: 3
},
{
name: baz,
price: 5
}
]</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a10fc1807cac540061127-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cac540061127-2">2</div><div class="crayon-num" data-line="crayon-5a10fc1807cac540061127-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cac540061127-4">4</div><div class="crayon-num" data-line="crayon-5a10fc1807cac540061127-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cac540061127-6">6</div><div class="crayon-num" data-line="crayon-5a10fc1807cac540061127-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cac540061127-8">8</div><div class="crayon-num" data-line="crayon-5a10fc1807cac540061127-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cac540061127-10">10</div><div class="crayon-num" data-line="crayon-5a10fc1807cac540061127-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cac540061127-12">12</div><div class="crayon-num" data-line="crayon-5a10fc1807cac540061127-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cac540061127-14">14</div><div class="crayon-num" data-line="crayon-5a10fc1807cac540061127-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cac540061127-16">16</div><div class="crayon-num" data-line="crayon-5a10fc1807cac540061127-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cac540061127-18">18</div><div class="crayon-num" data-line="crayon-5a10fc1807cac540061127-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cac540061127-20">20</div><div class="crayon-num" data-line="crayon-5a10fc1807cac540061127-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cac540061127-22">22</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a10fc1807cac540061127-1"><span class="crayon-sy">[</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cac540061127-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807cac540061127-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">foo</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cac540061127-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">price</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">9</span></div><div class="crayon-line" id="crayon-5a10fc1807cac540061127-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cac540061127-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807cac540061127-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">foo</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cac540061127-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">price</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">12</span></div><div class="crayon-line" id="crayon-5a10fc1807cac540061127-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cac540061127-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807cac540061127-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">bar</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cac540061127-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">price</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">8</span></div><div class="crayon-line" id="crayon-5a10fc1807cac540061127-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cac540061127-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807cac540061127-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">baz</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cac540061127-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">price</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">3</span></div><div class="crayon-line" id="crayon-5a10fc1807cac540061127-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cac540061127-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807cac540061127-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">baz</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cac540061127-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">price</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">5</span></div><div class="crayon-line" id="crayon-5a10fc1807cac540061127-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cac540061127-22"><span class="crayon-sy">]</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0033 seconds] -->
<p>And we want to count the price for all the items with same name. We will run this data through a Mapper and then a Reducer to achieve the result.</p>
<p>When we ask a Mapper to process the above data without any conditions, it will generate the following result</p>
<div class="table-responsive"><table  style="width:100%; "  class="easy-table easy-table-default" border="0">
<thead>
<tr><th >Key</th>
<th > Value</th>
</tr>
</thead>
<tbody>
<tr><td >foo</td>
<td >[9,12]</td>
</tr>
<tr><td >bar</td>
<td >[8]</td>
</tr>
<tr><td >baz</td>
<td >[3,5]</td>
</tr>
</tbody></table></div>
<p>That is, it has grouped all the data together which have a similar key, in our case a name. Then these results will be sent to the Reducer.</p>
<p>Now, in the reducer, we get the first row from the above table. We will iterate through all the values and add them up. This will be the sum for first row. Next, the reducer will receive the second and it will do the same thing, till all the rows are completed.</p>
<p>The final output would be</p>
<div class="table-responsive"><table  style="width:100%; "  class="easy-table easy-table-default" border="0">
<thead>
<tr><th >Name</th>
<th > Total</th>
</tr>
</thead>
<tbody>
<tr><td >foo</td>
<td > 21</td>
</tr>
<tr><td >bar</td>
<td > 8</td>
</tr>
<tr><td >baz</td>
<td > 8</td>
</tr>
</tbody></table></div>
<p>So now you can understand why a Mapper is called a Mapper (<em>because, it will create a map of data</em>) &amp; why a Reducer is called a Reducer (<em>because it will reduce the data that the mapper has generated to a more simplified form</em>).</p>
<p>If you run a couple of examples, you will get an idea as how this works. You can read more about MongoDB MapReduce <a href="http://docs.mongodb.org/manual/core/map-reduce/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://docs.mongodb.org/manual/core/map-reduce/', 'here');" title="MapReduce"  target="_blank">here</a>.</p>
<h2 id="setup">Set Up a Project</h2>
<p>As you have seen earlier, we can run queries directly in the mongo shell and see the output. But. for these examples, to keep things more <em>tutorial-ish</em>, We will build a node project and then run the commands.</p>
<h3 id="mongojs">Mongojs</h3>
<p>We will be using <em>mongojs</em> (a<em> node package for interacting with MongoDB</em>),to write our MapReduce commands and execute them. You can run the same code in the mongo shell directly and see the same results. You can read more about mongojs <a href="https://github.com/mafintosh/mongojs" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/mafintosh/mongojs', 'here');" title="Mongojs"  target="_blank">here</a>.</p>
<h3 id="dummyjson">Dummy-json</h3>
<p>We will use <em>dummy-json </em>(<em>a Node utility that allows you to generate random JSON data using Handlebars templates</em>) to set up a few thousand sample JSON documents. You can find more information on dummy-json <a href="https://github.com/webroo/dummy-json" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/webroo/dummy-json', 'here');" title="dummy-json"  target="_blank">here</a>. Then we will run MapReduce commands on top of it to generate some meaningful results.</p>
<p>So lets get started.</p>
<p>First you need Node js to be installed. You can find details <a title="Hello Node" href="/hello-node/" target="_blank">here</a>, Next, Create a new folder named <em>mongoDBMapReduce. </em>Then open a terminal/prompt here. Now we will create a <em>package.json</em> to store our project details. Run,</p>
<p style="text-align: center;">
<span id="crayon-5a10fc1807cb9279472402" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">npm </span><span class="crayon-v">init</span></span></span></p>
<p style="text-align: left;">and fill it as (<em>or whatever you like</em>)</p>
<p style="text-align: left;"><a href="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.20.43-pm.png" data-rel="lightbox-0" title=""><img class="size-medium wp-image-1210 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.20.43-pm.png?resize=407%2C300" alt="Screen Shot 2014-04-23 at 3.20.43 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-1210 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.20.43-pm.png?resize=407%2C300" alt="Screen Shot 2014-04-23 at 3.20.43 pm" data-recalc-dims="1" /></noscript></a></p>
<p>Next, we will add the project dependencies. Run</p>
<p style="text-align: center;">
<span id="crayon-5a10fc1807cc5592727176" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-i">npm</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-v">mongojs</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">save</span><span class="crayon-o">-</span><span class="crayon-v">dev</span></span></span></p>
<p style="text-align: center;">
<span id="crayon-5a10fc1807ccb993377909" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-i">npm</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-v">dummy</span><span class="crayon-o">-</span><span class="crayon-v">json</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">save</span><span class="crayon-o">-</span><span class="crayon-v">dev</span></span></span></p>
<p>This will take care of installing dependencies and adding them to our <em>package.json</em>.</p>
<h2 id="generatedata">Generate Dummy Data</h2>
<p>Next, we are going to generate dummy data using the dummy-json module. Create a new file named <em>dataGen.js </em>at the root of the project. We will keep the data generation logic in a separate file. In future, if you need to add more data, you can run this file.</p>
<p>Copy the below contents to <em>dataGen.js</em></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a10fc1807cd2140795084" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">dataGen.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var mongojs = require('mongojs');
var db = mongojs('mapReduceDB', ['sourceData']);
var fs = require('fs');
var dummyjson = require('dummy-json');
var helpers = {
gender: function() {
return ""+ Math.random() &gt; 0.5 ? 'male' : 'female';
},
dob : function() {
var start = new Date(1900, 0, 1),
end = new Date();
return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
},
hobbies : function () {
var hobbysList = []; 
hobbysList[0] = [];
hobbysList[0][0] = ["Acrobatics", "Meditation", "Music"];
hobbysList[0][1] = ["Acrobatics", "Photography", "Papier-Mache"];
hobbysList[0][2] = [ "Papier-Mache"];
return hobbysList[0][Math.floor(Math.random() * hobbysList[0].length)];
}
};
console.log("Begin Parsing &gt;&gt;");
var template = fs.readFileSync('template.hbs', {encoding: 'utf8'});
var result = dummyjson.parse(template, {helpers: helpers});
console.log("Begin Database Insert &gt;&gt;");
db.sourceData.remove(function (argument) {
console.log("DB Cleanup Completd");
});
db.sourceData.insert(JSON.parse(result), function (err, docs) {
console.log("DB Insert Completed");
});</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-2">2</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-4">4</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-6">6</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-8">8</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-10">10</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-12">12</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-14">14</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-16">16</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-18">18</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-20">20</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-22">22</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-24">24</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-26">26</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-28">28</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-30">30</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-32">32</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-34">34</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-36">36</div><div class="crayon-num" data-line="crayon-5a10fc1807cd2140795084-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cd2140795084-38">38</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">mongojs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'mongojs'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">mongojs</span><span class="crayon-sy">(</span><span class="crayon-s">'mapReduceDB'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'sourceData'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-3"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">fs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'fs'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-4"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">dummyjson</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'dummy-json'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-6"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">helpers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-7"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">gender</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">random</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">0.5</span><span class="crayon-h"> </span><span class="crayon-sy">?</span><span class="crayon-h"> </span><span class="crayon-s">'male'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'female'</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-9"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">dob</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-11"><span class="crayon-h">	</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">start</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-r">Date</span><span class="crayon-sy">(</span><span class="crayon-cn">1900</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-12"><span class="crayon-h">		</span><span class="crayon-st">end</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-r">Date</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-13"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-r">Date</span><span class="crayon-sy">(</span><span class="crayon-v">start</span><span class="crayon-sy">.</span><span class="crayon-e">getTime</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">random</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-st">end</span><span class="crayon-sy">.</span><span class="crayon-e">getTime</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">start</span><span class="crayon-sy">.</span><span class="crayon-e">getTime</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-14"><span class="crayon-h">	</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-15"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">hobbies</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-16"><span class="crayon-h">&nbsp;&nbsp;	</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">hobbysList</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-17"><span class="crayon-h">&nbsp;&nbsp;	</span><span class="crayon-v">hobbysList</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-18"><span class="crayon-h">&nbsp;&nbsp;	</span><span class="crayon-v">hobbysList</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">"Acrobatics"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"Meditation"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"Music"</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-19"><span class="crayon-h">&nbsp;&nbsp;	</span><span class="crayon-v">hobbysList</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">"Acrobatics"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"Photography"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"Papier-Mache"</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-20"><span class="crayon-h">&nbsp;&nbsp;	</span><span class="crayon-v">hobbysList</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-h"> </span><span class="crayon-s">"Papier-Mache"</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-21"><span class="crayon-h">&nbsp;&nbsp;	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">hobbysList</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">floor</span><span class="crayon-sy">(</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">random</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">hobbysList</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">length</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-22"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-23"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-24">&nbsp;</div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-25"><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-s">"Begin Parsing &gt;&gt;"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-26">&nbsp;</div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-27"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">template</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">fs</span><span class="crayon-sy">.</span><span class="crayon-e">readFileSync</span><span class="crayon-sy">(</span><span class="crayon-s">'template.hbs'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">encoding</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'utf8'</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-28"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dummyjson</span><span class="crayon-sy">.</span><span class="crayon-e">parse</span><span class="crayon-sy">(</span><span class="crayon-v">template</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">helpers</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">helpers</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-29">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-30"><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-s">"Begin Database Insert &gt;&gt;"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-31">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-32"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">sourceData</span><span class="crayon-sy">.</span><span class="crayon-e">remove</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">argument</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-33"><span class="crayon-h">	</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-s">"DB Cleanup Completd"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-34"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-35">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-36"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">sourceData</span><span class="crayon-sy">.</span><span class="crayon-e">insert</span><span class="crayon-sy">(</span><span class="crayon-v">JSON</span><span class="crayon-sy">.</span><span class="crayon-e">parse</span><span class="crayon-sy">(</span><span class="crayon-v">result</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">docs</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807cd2140795084-37"><span class="crayon-h">	</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-s">"DB Insert Completed"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cd2140795084-38"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0135 seconds] -->
<p><strong>Lines 1 to 4</strong>, we include all the required packages.</p>
<p><strong>Line 2</strong>, we create a new database named <em>mapReduceDB. </em>Inside that, we create a new collection named <em>sourceData, </em>if either of them do not exist already.</p>
<p><strong>Lines 6 to 23</strong> is a Handlebar helper. You can know more about that on the dummy-json page</p>
<p><strong>Lines 27, 28</strong>, we read a <em>schema.hbs</em> file (which we will create in a moment) &amp; the parse it to generate the sample JSON.</p>
<p><strong>Line 32</strong>, we clean up the old data before dumping new data, Comment this out, incase you want to append to the existing collection</p>
<p><strong>Line 36</strong>, insert the generated data to the DB</p>
<p>Next, create a new file named <em>schema.hbs</em> at the root of the project. This will consist of the schema that will constitute one JSON document. Paste the below contents into it</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a10fc1807cde938541477" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">schema.hbs</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
[
{{#repeat 9999}}
{
"id": {{index}},
"name": "{{firstName}} {{lastName}}",
"email": "{{email}}",
"work": "{{company}}",
"dob" : "{{dob}}",
"age": {{number 1 99}},
"gender" : "{{gender}}",
"salary" : {{number 999 99999}},
"hobbies" : "{{hobbies}}"
}
{{/repeat}}
]</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a10fc1807cde938541477-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cde938541477-2">2</div><div class="crayon-num" data-line="crayon-5a10fc1807cde938541477-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cde938541477-4">4</div><div class="crayon-num" data-line="crayon-5a10fc1807cde938541477-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cde938541477-6">6</div><div class="crayon-num" data-line="crayon-5a10fc1807cde938541477-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cde938541477-8">8</div><div class="crayon-num" data-line="crayon-5a10fc1807cde938541477-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cde938541477-10">10</div><div class="crayon-num" data-line="crayon-5a10fc1807cde938541477-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cde938541477-12">12</div><div class="crayon-num" data-line="crayon-5a10fc1807cde938541477-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807cde938541477-14">14</div><div class="crayon-num" data-line="crayon-5a10fc1807cde938541477-15">15</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a10fc1807cde938541477-1"><span class="crayon-sy">[</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cde938541477-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span><span class="crayon-sy">{</span><span class="crayon-p">#repeat 9999}}</span></div><div class="crayon-line" id="crayon-5a10fc1807cde938541477-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cde938541477-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"id"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">{</span><span class="crayon-v">index</span><span class="crayon-sy">}</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a10fc1807cde938541477-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"name"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"{{firstName}} {{lastName}}"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cde938541477-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"email"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"{{email}}"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a10fc1807cde938541477-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"work"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"{{company}}"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cde938541477-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"dob"</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"{{dob}}"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a10fc1807cde938541477-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"age"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">{</span><span class="crayon-i">number</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-cn">99</span><span class="crayon-sy">}</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cde938541477-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"gender"</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"{{gender}}"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a10fc1807cde938541477-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"salary"</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">{</span><span class="crayon-i">number</span><span class="crayon-h"> </span><span class="crayon-cn">999</span><span class="crayon-h"> </span><span class="crayon-cn">99999</span><span class="crayon-sy">}</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cde938541477-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"hobbies"</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"{{hobbies}}"</span></div><div class="crayon-line" id="crayon-5a10fc1807cde938541477-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807cde938541477-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">{</span><span class="crayon-sy">{</span><span class="crayon-o">/</span><span class="crayon-v">repeat</span><span class="crayon-sy">}</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a10fc1807cde938541477-15"><span class="crayon-sy">]</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0028 seconds] -->
<p>Do notice on <strong>line 2</strong>, we are going to generate 9999 documents. Thats is it, we are all set to generate some data.</p>
<p>Open a <em>new</em> terminal/prompt and run</p>
<p style="text-align: center;">
<span id="crayon-5a10fc1807cec837206705" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">mongod</span></span></span></p>
<p style="text-align: left;">This will start the MongoDB service. Now back to our other terminal/prompt, run</p>
<p class="p1" style="text-align: center;">
<span id="crayon-5a10fc1807cf2438822760" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">node </span><span class="crayon-v">dataGen</span><span class="crayon-sy">.</span><span class="crayon-i">js</span> </span></span></p>
<p> The result should be</p>
<p><a href="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.43.35-pm.png" data-rel="lightbox-1" title=""><img class="size-medium wp-image-1211 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.43.35-pm.png?resize=451%2C63" alt="Screen Shot 2014-04-23 at 3.43.35 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-1211 aligncenter" src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.43.35-pm.png?resize=451%2C63" alt="Screen Shot 2014-04-23 at 3.43.35 pm" data-recalc-dims="1" /></noscript></a>Kill the node program by pressing ctrl + c.</p>
<p>To verify, you can open up a new terminal/prompt, run 
<span id="crayon-5a10fc1807cf9996258429" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">mongo</span></span></span>  command and check the data. You should see<br />
<a href="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.45.49-pm.png" data-rel="lightbox-2" title=""><img class="size-medium wp-image-1212 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.45.49-pm.png?resize=451%2C225" alt="Screen Shot 2014-04-23 at 3.45.49 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-1212 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-3.45.49-pm.png?resize=451%2C225" alt="Screen Shot 2014-04-23 at 3.45.49 pm" data-recalc-dims="1" /></noscript></a></p>
<h2 id="makesense">Make sense of the data</h2>
<p>Okay, we have dumped in 9999 documents of user data. Let try and make sense of it.</p>
<h3 id="ex1">Example 1 : Get the count of Males and Females</h3>
<p>First, create a new file named <em>example1.js</em> at the root of the project. We will write a MapReduce job, to fetch the count of Males and Females.</p>
<h4 id="ex1mapper">Mapper Logic</h4>
<p>The only thing we are expecting from Mapper is that, it will extract the gender as key and value as 1. One because, every user is either a male or a female. So the output of the mapper will be</p>
<div class="table-responsive"><table  style="width:100%; "  class="easy-table easy-table-default" border="0">
<thead>
<tr><th >Key</th>
<th > Value</th>
</tr>
</thead>
<tbody>
<tr><td >Male</td>
<td >[1,1,1,1,1,1,1,1&#8230;..]</td>
</tr>
<tr><td >Female</td>
<td >[1,1,1,1,1,1,1,1,1,&#8230;.]</td>
</tr>
</tbody></table></div>
<h4 id="ex1reducer">Reducer Logic</h4>
<p>In reducer, we get the above 2 rows. All we need to do is sum up all the values for one row, that will result in the sum of that gender. And the final output of Reducer would be</p>
<div class="table-responsive"><table  style="width:100%; "  class="easy-table easy-table-default" border="0">
<thead>
<tr><th >Key</th>
<th > Value</th>
</tr>
</thead>
<tbody>
<tr><td >Male</td>
<td > 5031</td>
</tr>
<tr><td >Female</td>
<td > 4968</td>
</tr>
</tbody></table></div>
<h4 id="ex1code">Code</h4>
<p>Now, lets write some code to achieve this. In <em>example1.js</em>, first we will require all our dependencies.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a10fc1807d03501408808" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">example1.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">JavaScript</span></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var mongojs = require('mongojs');
var db = mongojs('mapReduceDB', ['sourceData', 'example1_results']);</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a10fc1807d03501408808-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d03501408808-2">2</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a10fc1807d03501408808-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">mongojs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'mongojs'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d03501408808-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">mongojs</span><span class="crayon-sy">(</span><span class="crayon-s">'mapReduceDB'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'sourceData'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'example1_results'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0010 seconds] -->
<p>Do notice on<strong> Line 2</strong>, the first argument is the name of the database and second argument is an Array of collection that we are going to query. <em>example1_results</em> is the collection which we are going to generate with our result.</p>
<p>Next, Lets add the mapper and reducer functions</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a10fc1807d13776040070" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">exampl1.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var mapper = function () {
emit(this.gender, 1);
};
var reducer = function(gender, count){
return Array.sum(count);
};</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a10fc1807d13776040070-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d13776040070-2">2</div><div class="crayon-num" data-line="crayon-5a10fc1807d13776040070-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d13776040070-4">4</div><div class="crayon-num" data-line="crayon-5a10fc1807d13776040070-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d13776040070-6">6</div><div class="crayon-num" data-line="crayon-5a10fc1807d13776040070-7">7</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a10fc1807d13776040070-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">mapper</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d13776040070-2"><span class="crayon-h">	</span><span class="crayon-e">emit</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">gender</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d13776040070-3"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d13776040070-4">&nbsp;</div><div class="crayon-line" id="crayon-5a10fc1807d13776040070-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reducer</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">gender</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d13776040070-6"><span class="crayon-h"> 	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">Array</span><span class="crayon-sy">.</span><span class="crayon-e">sum</span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d13776040070-7"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0016 seconds] -->
<p>On <strong>line 2</strong>, 
<span id="crayon-5a10fc1807d1a014442068" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-r">this</span></span></span> will be populated with the current document. And 
<span id="crayon-5a10fc1807d20878241339" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">gender</span></span></span>  will be either a male or a female, which would be our key. And 
<span id="crayon-5a10fc1807d25272423328" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">emit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> will push the data to a temporary hash table, that will store the mapper results.</p>
<p>On <strong>line 5</strong>, we simply add up add all the values for a gender.</p>
<p>Finally, add the logic to execute the mapReduce</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a10fc1807d2c312286425" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">mapReduce command</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
db.sourceData.mapReduce(
mapper,
reducer,
{
out : "example1_results"
}
);
db.example1_results.find(function (err, docs) {
if(err) console.log(err);
console.log(docs);
});</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a10fc1807d2c312286425-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d2c312286425-2">2</div><div class="crayon-num" data-line="crayon-5a10fc1807d2c312286425-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d2c312286425-4">4</div><div class="crayon-num" data-line="crayon-5a10fc1807d2c312286425-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d2c312286425-6">6</div><div class="crayon-num" data-line="crayon-5a10fc1807d2c312286425-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d2c312286425-8">8</div><div class="crayon-num" data-line="crayon-5a10fc1807d2c312286425-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d2c312286425-10">10</div><div class="crayon-num" data-line="crayon-5a10fc1807d2c312286425-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d2c312286425-12">12</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a10fc1807d2c312286425-1"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">sourceData</span><span class="crayon-sy">.</span><span class="crayon-e">mapReduce</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d2c312286425-2"><span class="crayon-h">	</span><span class="crayon-v">mapper</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a10fc1807d2c312286425-3"><span class="crayon-h">	</span><span class="crayon-v">reducer</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d2c312286425-4"><span class="crayon-h">	</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807d2c312286425-5"><span class="crayon-h">		</span><span class="crayon-v">out</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"example1_results"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d2c312286425-6"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a10fc1807d2c312286425-7"><span class="crayon-h"> </span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d2c312286425-8">&nbsp;</div><div class="crayon-line" id="crayon-5a10fc1807d2c312286425-9"><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">example1_results</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">docs</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d2c312286425-10"><span class="crayon-h"> 	</span><span class="crayon-st">if</span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d2c312286425-11"><span class="crayon-h"> 	</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">docs</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d2c312286425-12"><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0020 seconds] -->
<p>On <strong>line 5</strong>, we set the output collection name and on <strong>line 9</strong>, we will fetch the results from <em>example1_results</em> collection and display it.</p>
<p>Back to terminal/prompt and run</p>
<p style="text-align: center;">
<span id="crayon-5a10fc1807d32116269009" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">node </span><span class="crayon-v">example1</span><span class="crayon-sy">.</span><span class="crayon-v">js</span></span></span></p>
<p>and the result will be</p>
<p><a href="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-4.27.22-pm.png" data-rel="lightbox-3" title=""><img class="size-medium wp-image-1214 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-4.27.22-pm.png?resize=451%2C45" alt="Screen Shot 2014-04-23 at 4.27.22 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-1214 aligncenter" src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-4.27.22-pm.png?resize=451%2C45" alt="Screen Shot 2014-04-23 at 4.27.22 pm" data-recalc-dims="1" /></noscript></a></p>
<p>My count may not match with yours, but the sum of males and females should be 9999 (<em>Duh!</em>).</p>
<h4 id="mongoshell">Mongo Shell code</h4>
<p>If you want to run the above in mongo shell, you can do by pasting the following into the terminal/prompt</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a10fc1807d39309097566" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">mongo shell code</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
mapper = function () {
emit(this.gender, 1);
};
reducer = function(gender, count){
return Array.sum(count);
};
db.sourceData.mapReduce(
mapper,
reducer,
{
out : "example1_results"
}
);
db.example1_results.find()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a10fc1807d39309097566-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d39309097566-2">2</div><div class="crayon-num" data-line="crayon-5a10fc1807d39309097566-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d39309097566-4">4</div><div class="crayon-num" data-line="crayon-5a10fc1807d39309097566-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d39309097566-6">6</div><div class="crayon-num" data-line="crayon-5a10fc1807d39309097566-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d39309097566-8">8</div><div class="crayon-num" data-line="crayon-5a10fc1807d39309097566-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d39309097566-10">10</div><div class="crayon-num" data-line="crayon-5a10fc1807d39309097566-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d39309097566-12">12</div><div class="crayon-num" data-line="crayon-5a10fc1807d39309097566-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d39309097566-14">14</div><div class="crayon-num" data-line="crayon-5a10fc1807d39309097566-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d39309097566-16">16</div><div class="crayon-num" data-line="crayon-5a10fc1807d39309097566-17">17</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a10fc1807d39309097566-1"><span class="crayon-v">mapper</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d39309097566-2"><span class="crayon-h">	</span><span class="crayon-e">emit</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">gender</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d39309097566-3"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d39309097566-4">&nbsp;</div><div class="crayon-line" id="crayon-5a10fc1807d39309097566-5"><span class="crayon-v">reducer</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">gender</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d39309097566-6"><span class="crayon-h"> 	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">Array</span><span class="crayon-sy">.</span><span class="crayon-e">sum</span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d39309097566-7"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d39309097566-8">&nbsp;</div><div class="crayon-line" id="crayon-5a10fc1807d39309097566-9"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">sourceData</span><span class="crayon-sy">.</span><span class="crayon-e">mapReduce</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d39309097566-10"><span class="crayon-h">	</span><span class="crayon-v">mapper</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a10fc1807d39309097566-11"><span class="crayon-h">	</span><span class="crayon-v">reducer</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d39309097566-12"><span class="crayon-h">	</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807d39309097566-13"><span class="crayon-h">		</span><span class="crayon-v">out</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"example1_results"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d39309097566-14"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a10fc1807d39309097566-15"><span class="crayon-h"> </span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d39309097566-16">&nbsp;</div><div class="crayon-line" id="crayon-5a10fc1807d39309097566-17"><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">example1_results</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0024 seconds] -->
<p>And you should see</p>
<p><a href="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-4.31.19-pm.png" data-rel="lightbox-4" title=""><img class="size-medium wp-image-1215 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-4.31.19-pm.png?resize=442%2C300" alt="Screen Shot 2014-04-23 at 4.31.19 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-1215 aligncenter" src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-4.31.19-pm.png?resize=442%2C300" alt="Screen Shot 2014-04-23 at 4.31.19 pm" data-recalc-dims="1" /></noscript></a>Simple right?</p>
<h3 id="ex2">Example 2 : Get the Eldest and Youngest Person in each gender</h3>
<p>For this example, create a new file named <em>example2.js </em>at the root of the project. Here, we will group all the users based on gender &amp; pull out the eldest and youngest in each gender.  A bit more complex than the earlier example.</p>
<h4 id="ex2mapper">Mapper Logic</h4>
<p>In mapper, we will return the gender as key and we will return an object as value. The object will hold the user&#8217;s age and user&#8217;s name. Age will be used for calculation where as the name is only for display purposes.</p>
<div class="table-responsive"><table  style="width:100%; "  class="easy-table easy-table-default" border="0">
<thead>
<tr><th >Key</th>
<th > Value</th>
</tr>
</thead>
<tbody>
<tr><td >Male</td>
<td >[{age : 9, name : John}, {}, {} ,{}&#8230;]</td>
</tr>
<tr><td >Female</td>
<td >[{age : 19, name : Rita}, {}, {} ,{}&#8230;]</td>
</tr>
</tbody></table></div>
<h4 id="ex2reducer">Reducer Logic</h4>
<p>Our reducer will be a bit more complex than the last example. Here we will perform a check on all the ages corresponding to a gender and sort the based on eldest or youngest. And the final result should look something like</p>
<div class="table-responsive"><table  style="width:100%; "  class="easy-table easy-table-default" border="0">
<thead>
<tr><th >Key</th>
<th > Value</th>
</tr>
</thead>
<tbody>
<tr><td >Male</td>
<td >{'min':{'name':'Haydee Milligan','age':1},'max':{'name':'Darrell Sprowl','age':99}}</td>
</tr>
<tr><td >Female</td>
<td >{'min':{'name':'Cory Hollis','age':1},'max':{'name':'Shea Mercer','age':99}}</td>
</tr>
<tr><td ><span style="font-size: 18px;"></td>
</tr>
</tbody></table></div></span></p>
<h4 id="ex2code">Code</h4>
<p>Now, open example2.js and paste the below code.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a10fc1807d44957793301" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">example2.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var mongojs = require('mongojs');
var db = mongojs('mapReduceDB', ['sourceData', 'example2_results']);
var mapper = function () {
var x = {age : this.age, name : this.name};
emit(this.gender, {min : x , max : x});
};
var reducer = function(key, values){
var res = values[0];
for (var i = 1; i &lt; values.length; i++) {
if(values[i].min.age &lt; res.min.age)
res.min = {name : values[i].min.name, age : values[i].min.age};
if (values[i].max.age &gt; res.max.age) 
res.max = {name : values[i].max.name, age : values[i].max.age};
};
return res;
};
db.sourceData.mapReduce(
mapper,
reducer,
{
out : "example2_results"
}
);
db.example2_results.find(function (err, docs) {
if(err) console.log(err);
console.log(JSON.stringify(docs));
});</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-2">2</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-4">4</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-6">6</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-8">8</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-10">10</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-12">12</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-14">14</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-16">16</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-18">18</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-20">20</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-22">22</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-24">24</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-26">26</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-28">28</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-30">30</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-32">32</div><div class="crayon-num" data-line="crayon-5a10fc1807d44957793301-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d44957793301-34">34</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a10fc1807d44957793301-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">mongojs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'mongojs'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">mongojs</span><span class="crayon-sy">(</span><span class="crayon-s">'mapReduceDB'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'sourceData'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'example2_results'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-4"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">mapper</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-6"><span class="crayon-h">	</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">age</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">age</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-7"><span class="crayon-h">	</span><span class="crayon-e">emit</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">gender</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">min</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">max</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-8"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-10">&nbsp;</div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-11"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reducer</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">key</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-12"><span class="crayon-h"> 	</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-13"><span class="crayon-h"> 	</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">.</span><span class="crayon-v">length</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">++</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-14"><span class="crayon-h"> 		</span><span class="crayon-st">if</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">min</span><span class="crayon-sy">.</span><span class="crayon-v">age</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-v">min</span><span class="crayon-sy">.</span><span class="crayon-v">age</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-15"><span class="crayon-h"> 			</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-v">min</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">min</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">age</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">min</span><span class="crayon-sy">.</span><span class="crayon-v">age</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">max</span><span class="crayon-sy">.</span><span class="crayon-v">age</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-v">max</span><span class="crayon-sy">.</span><span class="crayon-v">age</span><span class="crayon-sy">)</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-v">max</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">max</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">age</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">max</span><span class="crayon-sy">.</span><span class="crayon-v">age</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-18"><span class="crayon-h"> 	</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-19"><span class="crayon-h"> 	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-20"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-22">&nbsp;</div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-23"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">sourceData</span><span class="crayon-sy">.</span><span class="crayon-e">mapReduce</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-24"><span class="crayon-h">	</span><span class="crayon-v">mapper</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-25"><span class="crayon-h">	</span><span class="crayon-v">reducer</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-26"><span class="crayon-h">	</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-27"><span class="crayon-h">		</span><span class="crayon-v">out</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"example2_results"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-28"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-29"><span class="crayon-h"> </span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-30">&nbsp;</div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-31"><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">example2_results</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">docs</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-32"><span class="crayon-h"> 	</span><span class="crayon-st">if</span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d44957793301-33"><span class="crayon-h"> 	</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">JSON</span><span class="crayon-sy">.</span><span class="crayon-e">stringify</span><span class="crayon-sy">(</span><span class="crayon-v">docs</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d44957793301-34"><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0095 seconds] -->
<p>On <strong>line 6</strong>, we build an object and send it as part of the value. <strong>Lines 13 to 18</strong>, we iterate through all the objects and check if the current value object&#8217;s age is greater than the previous or less and update the res.max value. And similarly, the min value. FInally on <strong>line 27</strong>, we push the result set into a new collection named <em>example2_results. </em></p>
<p>To run this example, back to terminal/prompt and run</p>
<p style="text-align: center;">
<span id="crayon-5a10fc1807d51393209312" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">node </span><span class="crayon-v">example2</span><span class="crayon-sy">.</span><span class="crayon-i">js</span> </span></span></p>
<p>And you should see something like</p>
<p><a href="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-9.00.09-pm.png" data-rel="lightbox-5" title=""><img class="size-medium wp-image-1221 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-9.00.09-pm.png?resize=451%2C54" alt="Screen Shot 2014-04-23 at 9.00.09 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-1221 aligncenter" src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-9.00.09-pm.png?resize=451%2C54" alt="Screen Shot 2014-04-23 at 9.00.09 pm" data-recalc-dims="1" /></noscript></a>Since our dataset is huge and there is a high chance that all the numbers from 1 to 99 are used. You can change this in <em>schema.hbs</em> <strong>line no 9</strong>. Then re run the <em>dataGen.js</em>. Now, you can run the above example and check the values.</p>
<h3>Example 3 : Count the number of users in each hobby</h3>
<p>In our final example, we will see how many users have similar hobbies. For that, lets first create a new file named <em>example3.js</em> at the root of the project. Data for one user would be</p>
<p><a href="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-8.34.35-pm.png" data-rel="lightbox-6" title=""><img class="size-medium wp-image-1219 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-8.34.35-pm.png?resize=451%2C168" alt="Screen Shot 2014-04-23 at 8.34.35 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-1219 aligncenter" src="http://i2.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-8.34.35-pm.png?resize=451%2C168" alt="Screen Shot 2014-04-23 at 8.34.35 pm" data-recalc-dims="1" /></noscript></a>As you can see, every user has a list of hobbies separated by comma. We will find out how many users have <em>Acrobatics</em> as a hobby and so on.</p>
<h4 id="ex3mapper">Mapper Logic</h4>
<p>Our mapper is a bit complex for this scenario. We will emit a new key value pair for each hobby of a user. This way, we will fire 1 count for each hobby per user. By the end of the mapper, we will end up with something like</p>
<div class="table-responsive"><table  style="width:100%; "  class="easy-table easy-table-default" border="0">
<thead>
<tr><th >Key</th>
<th > Value</th>
</tr>
</thead>
<tbody>
<tr><td >Acrobatics</td>
<td >[1,1,1,1,1,1,&#8230;.]</td>
</tr>
<tr><td >Meditation</td>
<td >[1,1,1,1,1,1,&#8230;.]</td>
</tr>
<tr><td >Music</td>
<td >[1,1,1,1,1,1,&#8230;.]</td>
</tr>
<tr><td >Photography</td>
<td >[1,1,1,1,1,1,&#8230;.]</td>
</tr>
<tr><td >Papier-Mache</td>
<td >[1,1,1,1,1,1,&#8230;.]</td>
</tr>
</tbody></table></div>
<h4 id="ex3reducer">Reducer Logic</h4>
<p>Here, we simply count each of the values for a hobby. And finally we will have</p>
<div class="table-responsive"><table  style="width:100%; "  class="easy-table easy-table-default" border="0">
<thead>
<tr><th >Key</th>
<th > Value</th>
</tr>
</thead>
<tbody>
<tr><td >Acrobatics</td>
<td > 6641</td>
</tr>
<tr><td >Meditation</td>
<td > 3338</td>
</tr>
<tr><td >Music</td>
<td > 3338</td>
</tr>
<tr><td >Photography</td>
<td > 3303</td>
</tr>
<tr><td >Papier-Mache</td>
<td > 6661</td>
</tr>
</tbody></table></div>
<h4 id="ex3code">Code</h4>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a10fc1807d5c851960241" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">example3.js</span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var mongojs = require('mongojs');
var db = mongojs('mapReduceDB', ['sourceData', 'example3_results']);
var mapper = function () {
var hobbys = this.hobbies.split(',');
for (i in hobbys) {
emit(hobbys[i], 1);
}
};
var reducer = function (key, values) {
var count = 0;
for (index in values) {
count += values[index];
}
return count;
};
db.sourceData.mapReduce(
mapper,
reducer,
{
out : "example3_results"
}
);
db.example3_results.find(function (err, docs) {
if(err) console.log(err);
console.log(docs);
});</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-2">2</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-4">4</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-6">6</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-8">8</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-10">10</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-12">12</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-14">14</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-16">16</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-18">18</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-20">20</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-22">22</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-24">24</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-26">26</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-28">28</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-30">30</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc1807d5c851960241-32">32</div><div class="crayon-num" data-line="crayon-5a10fc1807d5c851960241-33">33</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">mongojs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">'mongojs'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">mongojs</span><span class="crayon-sy">(</span><span class="crayon-s">'mapReduceDB'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'sourceData'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'example3_results'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-4"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">mapper</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-6"><span class="crayon-h">	 </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">hobbys</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">hobbies</span><span class="crayon-sy">.</span><span class="crayon-e">split</span><span class="crayon-sy">(</span><span class="crayon-s">','</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-7"><span class="crayon-h">	&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">hobbys</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">emit</span><span class="crayon-sy">(</span><span class="crayon-v">hobbys</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-10"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-12"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">reducer</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">key</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-13"><span class="crayon-h">	</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">index </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">index</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-17">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-19"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-20">&nbsp;</div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-22"><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">sourceData</span><span class="crayon-sy">.</span><span class="crayon-e">mapReduce</span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-23"><span class="crayon-h">	</span><span class="crayon-v">mapper</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-24"><span class="crayon-h">	</span><span class="crayon-v">reducer</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-25"><span class="crayon-h">	</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-26"><span class="crayon-h">		</span><span class="crayon-v">out</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"example3_results"</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-27"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-28"><span class="crayon-h"> </span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-29">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-30"><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">example3_results</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">docs</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-31"><span class="crayon-h"> 	</span><span class="crayon-st">if</span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc1807d5c851960241-32"><span class="crayon-h"> 	</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">docs</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc1807d5c851960241-33"><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0061 seconds] -->
<p>Do notice on <strong>lines 7 to 9</strong>, we iterate through each hobby and emit one count of it. <strong>Lines 13 to 18</strong> can replaced with a simple  
<span id="crayon-5a10fc1807d69780335960" class="crayon-syntax crayon-syntax-inline  crayon-theme-arduino-ide crayon-theme-arduino-ide-inline crayon-font-droid-sans-mono" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 15px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-t">Array</span><span class="crayon-sy">.</span><span class="crayon-e">sum</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></span></span> , but this is another way of doing the same. And the finally we run the job and the result would be</p>
<p><a href="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-8.59.23-pm.png" data-rel="lightbox-7" title=""><img class="size-medium wp-image-1220 aligncenter" src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-8.59.23-pm.png?resize=451%2C90" alt="Screen Shot 2014-04-23 at 8.59.23 pm" data-recalc-dims="1" /><noscript><img class="size-medium wp-image-1220 aligncenter" src="http://i1.wp.com/thejackalofjavascript.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-23-at-8.59.23-pm.png?resize=451%2C90" alt="Screen Shot 2014-04-23 at 8.59.23 pm" data-recalc-dims="1" /></noscript></a></p>
<p>If you did notice, the collection will get overridden when you run a new query on an existing collection.</p>
<p>So, this is how we can run MapReduce jobs in MongoDB. But do remember that sometimes a simple query can get the job done.</p>
<hr style="color: #333333;" />
<p style="color: #333333;">Thanks for reading! Do comment.<br />
@arvindr21</p>
<!-- Simple Share Buttons Adder (6.1.5) simplesharebuttons.com --><div class="ssba ssba-wrap"><div style="text-align:left"><a href="http://twitter.com/share?url=/mapreduce-in-mongodb/&amp;text=MapReduce+in+MongoDB+From+The+Jackal+of+Javascript+by+%40arvindr21" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/share?url=/mapreduce-in-mongodb/&amp;text=MapReduce+in+MongoDB+From+The+Jackal+of+Javascript+by+%40arvindr21', '');" data-site="" class="ssba_twitter_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png?w=646" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter" data-recalc-dims="1" /><noscript><img src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png?w=646" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter" data-recalc-dims="1" /></noscript></a><a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=/mapreduce-in-mongodb/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.linkedin.com/shareArticle?mini=true&amp;url=/mapreduce-in-mongodb/', '');" data-site="linkedin" class="ssba_linkedin_share ssba_share_link"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png?w=646" title="LinkedIn" class="ssba ssba-img" alt="Share on LinkedIn" data-recalc-dims="1" /><noscript><img src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png?w=646" title="LinkedIn" class="ssba ssba-img" alt="Share on LinkedIn" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">18</span><a href="https://plus.google.com/share?url=/mapreduce-in-mongodb/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://plus.google.com/share?url=/mapreduce-in-mongodb/', '');" data-site="" class="ssba_google_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/google.png?w=646" title="Google+" class="ssba ssba-img" alt="Share on Google+" data-recalc-dims="1" /><noscript><img src="http://i2.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/google.png?w=646" title="Google+" class="ssba ssba-img" alt="Share on Google+" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">0</span><a href="http://reddit.com/submit?url=/mapreduce-in-mongodb/&amp;title=MapReduce in MongoDB" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://reddit.com/submit?url=/mapreduce-in-mongodb/&amp;title=MapReduce in MongoDB', '');" data-site="reddit" class="ssba_reddit_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/reddit.png?w=646" title="Reddit" class="ssba ssba-img" alt="Share on Reddit" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/reddit.png?w=646" title="Reddit" class="ssba ssba-img" alt="Share on Reddit" data-recalc-dims="1" /></noscript></a><span class="ssba_sharecount">0</span><a href="https://bufferapp.com/add?url=/mapreduce-in-mongodb/&amp;text=From The Jackal of Javascript MapReduce in MongoDB" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://bufferapp.com/add?url=/mapreduce-in-mongodb/&amp;text=From The Jackal of Javascript MapReduce in MongoDB', '');" data-site="buffer" class="ssba_buffer_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/buffer.png?w=646" title="Buffer" class="ssba ssba-img" alt="Buffer this page" data-recalc-dims="1" /><noscript><img src="http://i1.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/buffer.png?w=646" title="Buffer" class="ssba ssba-img" alt="Buffer this page" data-recalc-dims="1" /></noscript></a><a href="https://flattr.com/submit/auto?user_id=arvindr21&amp;title=MapReduce in MongoDB&amp;url=https://flattr.com/profile/arvindr21" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://flattr.com/submit/auto?user_id=arvindr21&amp;title=MapReduce in MongoDB&amp;url=https://flattr.com/profile/arvindr21', '');" data-site="flattr" class="ssba_flattr_share"   target="_blank"  rel="nofollow"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/flattr.png?w=646" title="Flattr" class="ssba ssba-img" alt="Flattr the author" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/flattr.png?w=646" title="Flattr" class="ssba ssba-img" alt="Flattr the author" data-recalc-dims="1" /></noscript></a><a data-site="email" class="ssba_email_share" href="/cdn-cgi/l/email-protection#27185452454d4244531a6a4657754243524442074e49076a48494048636501464a571c4548435e1a6155484a07734f42076d46444c464b074841076d4651465444554e57530215174f5353571d0808534f424d46444c464b48414d4651465444554e57530944484a084a46575542435244420a4e490a4a48494048434508"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/email.png?w=646" title="Email" class="ssba ssba-img" alt="Email this to someone" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/email.png?w=646" title="Email" class="ssba ssba-img" alt="Email this to someone" data-recalc-dims="1" /></noscript></a><a data-site="print" class="ssba_print ssba_share_link" href="#" onclick="window.print()"><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/lazy-load/images/1x1.trans.gif" data-lazy-src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/print.png?w=646" title="Print" class="ssba ssba-img" alt="Print this page" data-recalc-dims="1" /><noscript><img src="http://i0.wp.com/thejackalofjavascript.com/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/print.png?w=646" title="Print" class="ssba ssba-img" alt="Print this page" data-recalc-dims="1" /></noscript></a></div></div><div class='sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded' id='like-post-wrapper-70838519-1200-5a10fc18ec41b' data-src='//widgets.wp.com/likes/#blog_id=70838519&amp;post_id=1200&amp;origin=thejackalofjavascript.com&amp;obj_id=70838519-1200-5a10fc18ec41b' data-name='like-post-frame-70838519-1200-5a10fc18ec41b'><h3 class='sd-title'>Like this:</h3><div class='likes-widget-placeholder post-likes-widget-placeholder' style='height:55px'><span class='button'><span>Like</span></span> <span class="loading">Loading...</span></div><span class='sd-text-color'></span><a class='sd-link-color'></a></div>
<div id='jp-relatedposts' class='jp-relatedposts' >
<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</div>
<div class="entry-content">
</div><!-- .entry-content -->
<footer class="entry-meta">
<span class="post-date"><a href="/mapreduce-in-mongodb/" title="10:58 pm" rel="bookmark"><time class="entry-date" datetime="2014-04-23T22:58:21+00:00">April 23, 2014</time></a></span><span class="byline"><span class="author vcard"><a class="url fn n" href="/author/arvind-ravulavaru/" title="View all posts by Arvind Ravulavaru" rel="author">Arvind Ravulavaru</a></span></span>					</footer><!-- .entry-meta -->
</article><!-- #post-## -->
<nav class="navigation post-navigation" role="navigation">
<h1 class="screen-reader-text">Post navigation</h1>
<div class="nav-links">
<div class="nav-previous"><a href="/nodejs-restify-mongolab-build-rest-api/" rel="prev"><span class="meta-nav screen-reader-text">&larr;</span></a></div><div class="nav-next"><a href="/journey-of-a-firefox-os-app/" rel="next"><span class="meta-nav screen-reader-text">&rarr;</span></a></div>		</div><!-- .nav-links -->
</nav><!-- .navigation -->
<div id="disqus_thread">
<div id="dsq-content">
<ul id="dsq-comments">
<li class="comment even thread-even depth-1" id="dsq-comment-3386">
<div id="dsq-comment-header-3386" class="dsq-comment-header">
<cite id="dsq-cite-3386">
<span id="dsq-author-user-3386">muhammad zubair</span>
</cite>
</div>
<div id="dsq-comment-body-3386" class="dsq-comment-body">
<div id="dsq-comment-message-3386" class="dsq-comment-message"><p>New working of map reduce in MongoDB on proframmershelper<br />
<a href="http://programmershelper.com/mongodb-map-reduce/" onclick="__gaTracker('send', 'event', 'outbound-comment', 'http://programmershelper.com/mongodb-map-reduce/', 'http://programmershelper.com/mongodb-map-reduce/');" rel="nofollow">http://programmershelper.com/mongodb-map-reduce/</a></p>
</div>
</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-3379">
<div id="dsq-comment-header-3379" class="dsq-comment-header">
<cite id="dsq-cite-3379">
<span id="dsq-author-user-3379">Mallik Arjun</span>
</cite>
</div>
<div id="dsq-comment-body-3379" class="dsq-comment-body">
<div id="dsq-comment-message-3379" class="dsq-comment-message"><p>Mongodb mapreduce explained. <a href="https://arjunjs.wordpress.com/2017/07/10/mongodb-mapreduce-introduction/" onclick="__gaTracker('send', 'event', 'outbound-comment', 'https://arjunjs.wordpress.com/2017/07/10/mongodb-mapreduce-introduction/', 'https://arjunjs.wordpress.com/2017/07/10/mongodb-mapreduce-introduction/');" rel="nofollow">https://arjunjs.wordpress.com/2017/07/10/mongodb-mapreduce-introduction/</a></p>
</div>
</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="dsq-comment-3164">
<div id="dsq-comment-header-3164" class="dsq-comment-header">
<cite id="dsq-cite-3164">
<span id="dsq-author-user-3164">KristinaGronis .</span>
</cite>
</div>
<div id="dsq-comment-body-3164" class="dsq-comment-body">
<div id="dsq-comment-message-3164" class="dsq-comment-message"><p>Seems like the tutorial is broken?<br />
After running node dataGen.js I get this error in my terminal. Double checked that everything in both Schema.hbs and dataGen.js is exactly as written&#8230; What is wrong?</p>
<p>Begin Parsing &gt;&gt;</p>
<p>/Users/krgpth/www/mean-apps/mongoDBMapReduce/node_modules/handlebars/dist/cjs/handlebars/helpers/helper-missing.js:19</p>
<p>      throw new _exception2[&#8216;default&#8217;](&#8216;Missing helper: &#8220;&#8216; + arguments[arguments.length &#8211; 1].name + &#8216;&#8221;&#8216;);</p>
<p>      ^</p>
<p>Error: Missing helper: &#8220;number&#8221;</p>
<p>    at Object. (/Users/krgpth/www/mean-apps/mongoDBMapReduce/node_modules/handlebars/dist/cjs/handlebars/helpers/helper-missing.js:19:13)</p>
<p>    at eval (eval at createFunctionContext (/Users/krgpth/www/mean-apps/mongoDBMapReduce/node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js:254:23), :10:70)</p>
<p>    at Object.prog [as fn] (/Users/krgpth/www/mean-apps/mongoDBMapReduce/node_modules/handlebars/dist/cjs/handlebars/runtime.js:219:12)</p>
<p>    at Object.helpers.repeat (/Users/krgpth/www/mean-apps/mongoDBMapReduce/node_modules/dummy-json/lib/helpers.js:142:27)</p>
<p>    at Object.eval (eval at createFunctionContext (/Users/krgpth/www/mean-apps/mongoDBMapReduce/node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js:254:23), :6:89)</p>
<p>    at main (/Users/krgpth/www/mean-apps/mongoDBMapReduce/node_modules/handlebars/dist/cjs/handlebars/runtime.js:173:32)</p>
<p>    at ret (/Users/krgpth/www/mean-apps/mongoDBMapReduce/node_modules/handlebars/dist/cjs/handlebars/runtime.js:176:12)</p>
<p>    at ret (/Users/krgpth/www/mean-apps/mongoDBMapReduce/node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js:525:21)</p>
<p>    at Object.dummyjson.parse (/Users/krgpth/www/mean-apps/mongoDBMapReduce/node_modules/dummy-json/index.js:26:38)</p>
<p>    at Object. (/Users/krgpth/www/mean-apps/mongoDBMapReduce/dataGen.js:21:24)</p>
</div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="dsq-comment-3169">
<div id="dsq-comment-header-3169" class="dsq-comment-header">
<cite id="dsq-cite-3169">
<span id="dsq-author-user-3169">Knowapp</span>
</cite>
</div>
<div id="dsq-comment-body-3169" class="dsq-comment-body">
<div id="dsq-comment-message-3169" class="dsq-comment-message"><p>As a temporary solution, I removed all of the handlebars template items with &#8220;number&#8221; as a requirement. I assume I will figure out these features as I go through the tutorial and be able to add them back in and solve the problem shortly.</p>
<p>Example schema.hbs:</p>
<p>[<br />
{{#repeat 9999}}<br />
{<br />
&#8220;id&#8221;: {{index}},<br />
&#8220;name&#8221;: &#8220;{{firstName}} {{lastName}}&#8221;,<br />
&#8220;email&#8221;: &#8220;{{email}}&#8221;,<br />
&#8220;work&#8221;: &#8220;{{company}}&#8221;,<br />
&#8220;dob&#8221; : &#8220;{{dob}}&#8221;,<br />
&#8220;age&#8221;: {{number 1 99}}, &lt;&#8212; DELETE THIS LINE<br />
&quot;gender&quot; : &quot;{{gender}}&quot;,<br />
&quot;salary&quot; : {{number 999 99999}}, &lt;&#8212; DELETE THIS LINE<br />
&quot;hobbies&quot; : &quot;{{hobbies}}&quot;<br />
}<br />
{{/repeat}}<br />
]</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-3" id="dsq-comment-3336">
<div id="dsq-comment-header-3336" class="dsq-comment-header">
<cite id="dsq-cite-3336">
<span id="dsq-author-user-3336">Bharani Amarnath</span>
</cite>
</div>
<div id="dsq-comment-body-3336" class="dsq-comment-body">
<div id="dsq-comment-message-3336" class="dsq-comment-message"><p>Yes, the codes used in this tutorial is a bit incompleted, but with little modifications, the code works good on version 3.0</p>
<p>Might try this for data generation &#8211;&gt;</p>
<p>var mongojs = require(&#8216;mongojs&#8217;);<br />
var db = mongojs(&#8216;mapreducedb&#8217;,[&#8216;sourceData&#8217;]);<br />
var fs = require(&#8216;fs&#8217;);<br />
var dummyjson = require(&#8216;dummy-json&#8217;);</p>
<p>var helpers = {<br />
name: function(){<br />
var firstnames = [&#8220;Alan&#8221;,&#8221;Bradley&#8221;,&#8221;Chris&#8221;,&#8221;Donald&#8221;,&#8221;Frank&#8221;];<br />
var lastnames = [&#8220;Goodman&#8221;,&#8221;Stewart&#8221;,&#8221;Harper&#8221;,&#8221;Jackson&#8221;,&#8221;Smith&#8221;];<br />
var rfn = firstnames[Math.floor(Math.random()*firstnames.length)];<br />
var rln = lastnames[Math.floor(Math.random()*lastnames.length)];<br />
var rn = rfn + &#8221; &#8221; + rln;<br />
return rn;<br />
},<br />
age: function(){<br />
var max = 99;<br />
var min = 18;<br />
return Math.floor(Math.random()*(max-min+1)+min);<br />
},<br />
gender: function(){<br />
return &#8220;&#8221; + Math.random() &gt; 0.5 ? &#8216;male&#8217; : &#8216;female';<br />
},<br />
dob: function(){<br />
var start = new Date(1950,0,1),<br />
end = new Date();<br />
return new Date(start.getTime() + Math.random() * (end.getTime() &#8211; start.getTime()));<br />
},<br />
hobbies: function(){<br />
var hobbiesList = [];<br />
hobbiesList[0] = [];<br />
hobbiesList[0][0] = [&#8220;Reading&#8221;,&#8221;Music&#8221;,&#8221;Movies&#8221;];<br />
hobbiesList[0][1] = [&#8220;Reading&#8221;,&#8221;Gardening&#8221;,&#8221;Writing&#8221;];<br />
hobbiesList[0][2] = [&#8220;Reading&#8221;];<br />
return hobbiesList[0][Math.floor(Math.random()*hobbiesList[0].length)];<br />
}<br />
};</p>
<p>console.log(&#8220;Begin parsing&#8221;);</p>
<p>var template = fs.readFileSync(&#8216;schema.hbs&#8217;,{encoding:&#8217;utf-8&#8242;});<br />
var result = dummyjson.parse(template,{helpers: helpers});</p>
<p>console.log(&#8220;Begin database insert&#8221;);</p>
<p>db.sourceData.remove(function(argument){<br />
console.log(&#8220;DB cleanup complete&#8221;);<br />
});<br />
db.sourceData.insert(JSON.parse(result),function(err,docs){<br />
console.log(&#8220;DB insert complete&#8221;);<br />
});</p>
<p>And modify the template hbs something like this &#8211;&gt;</p>
<p>[<br />
{{#repeat 9999}}<br />
{<br />
&#8220;name&#8221;:&#8221;{{name}}&#8221;,<br />
&#8220;age&#8221;:{{age}},<br />
&#8220;gender&#8221;: &#8220;{{gender}}&#8221;,<br />
&#8220;dob&#8221;: &#8220;{{dob}}&#8221;,<br />
&#8220;hobbies&#8221;: &#8220;{{hobbies}}&#8221;<br />
}<br />
{{/repeat}}<br />
]</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-2640">
<div id="dsq-comment-header-2640" class="dsq-comment-header">
<cite id="dsq-cite-2640">
<span id="dsq-author-user-2640">Peter Boot</span>
</cite>
</div>
<div id="dsq-comment-body-2640" class="dsq-comment-body">
<div id="dsq-comment-message-2640" class="dsq-comment-message"><p>What is the correct format for template.hbs ?</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-2" id="dsq-comment-2676">
<div id="dsq-comment-header-2676" class="dsq-comment-header">
<cite id="dsq-cite-2676">
/                <span id="dsq-author-user-2676">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-2676" class="dsq-comment-body">
<div id="dsq-comment-message-2676" class="dsq-comment-message"><p>Correct format as in?</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="dsq-comment-2594">
<div id="dsq-comment-header-2594" class="dsq-comment-header">
<cite id="dsq-cite-2594">
<span id="dsq-author-user-2594">Logic Town</span>
</cite>
</div>
<div id="dsq-comment-body-2594" class="dsq-comment-body">
<div id="dsq-comment-message-2594" class="dsq-comment-message"><p>Do you know if it&#8217;s possible to invoke a function provided by an npm module inside the mapper or reducer functions?</p>
<p>For instance </p>
<p>var mymod = require(&#8216;mymod&#8217;);</p>
<p>var mapper = function(){<br />
emit(this.key, mymod.apply(this));<br />
}</p>
<p>&#8230;</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-2" id="dsq-comment-2606">
<div id="dsq-comment-header-2606" class="dsq-comment-header">
<cite id="dsq-cite-2606">
/                <span id="dsq-author-user-2606">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-2606" class="dsq-comment-body">
<div id="dsq-comment-message-2606" class="dsq-comment-message"><p>I have not tried but it should be possible. Did you try it?</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-2593">
<div id="dsq-comment-header-2593" class="dsq-comment-header">
<cite id="dsq-cite-2593">
<span id="dsq-author-user-2593">Logic Town</span>
</cite>
</div>
<div id="dsq-comment-body-2593" class="dsq-comment-body">
<div id="dsq-comment-message-2593" class="dsq-comment-message"><p>I reckon the functions such as</p>
<p>db.example3_results.find(function (err, docs) {<br />
if(err) console.log(err);<br />
console.log(docs);<br />
});</p>
<p>should be passed as a callback to the mapReduce command, otherwise they will be invoked before the job completes.</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-2" id="dsq-comment-2605">
<div id="dsq-comment-header-2605" class="dsq-comment-header">
<cite id="dsq-cite-2605">
/                <span id="dsq-author-user-2605">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-2605" class="dsq-comment-body">
<div id="dsq-comment-message-2605" class="dsq-comment-message"><p>I am not sure if Mongojs API has a callback for <code>mapreduce()</code>, if it does then that is the place to put it. But I think <code>mapreduce()</code> in a blocking way here. Not sure though.</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="dsq-comment-2231">
<div id="dsq-comment-header-2231" class="dsq-comment-header">
<cite id="dsq-cite-2231">
<span id="dsq-author-user-2231">Harshavardhan Reddy</span>
</cite>
</div>
<div id="dsq-comment-body-2231" class="dsq-comment-body">
<div id="dsq-comment-message-2231" class="dsq-comment-message"><p>Hey Aravind,<br />
I want to do with multiple collections.<br />
Can you please help with that?<br />
Thank you.</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-2" id="dsq-comment-2233">
<div id="dsq-comment-header-2233" class="dsq-comment-header">
<cite id="dsq-cite-2233">
/                <span id="dsq-author-user-2233">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-2233" class="dsq-comment-body">
<div id="dsq-comment-message-2233" class="dsq-comment-message"><p>Hello Harsha,</p>
<p>Take a look at : <a href="http://stackoverflow.com/a/3837773/1015046" onclick="__gaTracker('send', 'event', 'outbound-comment', 'http://stackoverflow.com/a/3837773/1015046', 'http://stackoverflow.com/a/3837773/1015046');" rel="nofollow">http://stackoverflow.com/a/3837773/1015046</a></p>
<p>Thanks,<br />
Arvind.</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-2009">
<div id="dsq-comment-header-2009" class="dsq-comment-header">
<cite id="dsq-cite-2009">
<span id="dsq-author-user-2009">acveer</span>
</cite>
</div>
<div id="dsq-comment-body-2009" class="dsq-comment-body">
<div id="dsq-comment-message-2009" class="dsq-comment-message"><p>Aravind,<br />
Excellent tutorial. Well-written. It help me get started with mapReduce. I have tried your examples with mongoDB aggregate framework &amp; thought these might help someone. My intention here is share what I have learned and to seek expertise on the aggregation framework.<br />
Below queries can be run on mongo shell to get the same results with aggregate framework.<br />
Example1 :<br />
db.sourceData.aggregate( {$group: {_id: &#8220;$gender&#8221;, total: {$sum: 1}}});</p>
<p>Example2 was a little complicated for me, still learning/trying. If you know how to achieve this, please help.</p>
<p>Example3:</p>
<p>The dummy-json template + custom helper logic above is returning hobbies like below:<br />
&#8220;hobbies&#8221; : &#8220;[Acrobatics,Meditation,Music]&#8221;<br />
which was not a valid array for using $unwind in the aggregation framework. So I changed the template(schema.hbs) for hobbies from<br />
&#8220;hobbies&#8221; : &#8220;{{hobbies}}&#8221;<br />
to<br />
&#8220;hobbies&#8221; : [&#8220;{{hobbies}}&#8221;]<br />
Which resulted in valid array, but with all the hobbies comma seperated (not ideal, but will work for the example)<br />
&#8220;hobbies&#8221; : [ &#8220;Painting,Cooking,Reading&#8221;]</p>
<p>so the below aggregate query:<br />
db.sourceData5.aggregate([<br />
{$unwind: &#8220;$hobbies&#8221;},<br />
{$group: {_id:&#8221;$hobbies&#8221;, total: {$sum: 1}}}<br />
])<br />
resulted in:<br />
{ &#8220;_id&#8221; : &#8220;Papier-Mache&#8221;, &#8220;total&#8221; : 3313 }<br />
{ &#8220;_id&#8221; : &#8220;Acrobatics,Meditation,Music&#8221;, &#8220;total&#8221; : 3370 }<br />
{ &#8220;_id&#8221; : &#8220;Acrobatics,Photography,Papier-Mache&#8221;, &#8220;total&#8221; : 3316 }</p>
<p>Do you know how to generate a valid sub-array with dummy-JSON like below:<br />
&#8220;hobbies&#8221; : [ &#8220;Painting&#8221;,&#8221;Cooking&#8221;,&#8221;Reading&#8221;]</p>
<p>It took me sometime, but realized slowly how powerful and handy mongodb aggregation framework is.<br />
Thank you again for such an awesome effort.</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-2" id="dsq-comment-2010">
<div id="dsq-comment-header-2010" class="dsq-comment-header">
<cite id="dsq-cite-2010">
/                <span id="dsq-author-user-2010">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-2010" class="dsq-comment-body">
<div id="dsq-comment-message-2010" class="dsq-comment-message"><p>Hello acveer. Thanks! And Thanks for sharing your solutions. </p>
<p>I guess you can tweak the <code>dataGen.js</code> to give you the array you want from inside the <code>hobby()</code>. Let me know if it works. </p>
<p>A few days ago I was planning to do a comparison between AF and MR, never got to it though. Did you try anything in that space? </p>
<p>Thanks.</p>
</div>
</div>
<ul class="children">
<li class="comment odd alt depth-3" id="dsq-comment-2039">
<div id="dsq-comment-header-2039" class="dsq-comment-header">
<cite id="dsq-cite-2039">
<span id="dsq-author-user-2039">acveer</span>
</cite>
</div>
<div id="dsq-comment-body-2039" class="dsq-comment-body">
<div id="dsq-comment-message-2039" class="dsq-comment-message"><p>Arvind, </p>
<p>I have not done enough MP or AF for the detailed comparision, but here is what I understood so far.</p>
<p>1. AF is much faster than MP.<br />
2. Both are targeted to be used in batch operations in background mode (not real-time). (so convenience/control ).<br />
3. Both have respective limitations in terms of document size, max documents in process (100MB) and sharding support.<br />
4. MongoDB 2.6 has more handy features added for AF.</p>
<p>I could not figure out how to insert hobbies array by changing the template or helpers function. The array needs to be this way &#8220;&#8221;hobbies&#8221; : [ &#8220;Painting&#8221;,&#8221;Cooking&#8221;,&#8221;Reading&#8221;]. So I just inserted empty hobbies array from datagen.js and written another script to update hobbies array separately.</p>
<p>Will post solution for example 2, once I make progress.</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-4" id="dsq-comment-2044">
<div id="dsq-comment-header-2044" class="dsq-comment-header">
<cite id="dsq-cite-2044">
/                <span id="dsq-author-user-2044">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-2044" class="dsq-comment-body">
<div id="dsq-comment-message-2044" class="dsq-comment-message"><p>Thanks for sharing your findings. I will also take a look at hobbies array and get back.</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="dsq-comment-1952">
<div id="dsq-comment-header-1952" class="dsq-comment-header">
<cite id="dsq-cite-1952">
<span id="dsq-author-user-1952">rajkumar</span>
</cite>
</div>
<div id="dsq-comment-body-1952" class="dsq-comment-body">
<div id="dsq-comment-message-1952" class="dsq-comment-message"><p>Hi i have json like this.</p>
<p>&#8220;marks&#8221;:{<br />
&#8220;sem1&#8243; :{<br />
&#8220;mark1&#8243;:10,<br />
&#8220;total&#8221;:100<br />
},<br />
&#8220;sem2&#8243;:{<br />
&#8220;mark2&#8243;:20,<br />
&#8220;total&#8221;:200<br />
},<br />
&#8220;sem3&#8243;:{<br />
&#8220;mark2&#8243;:30,<br />
&#8220;total&#8221;:300<br />
}<br />
}</p>
<p>I need result  like </p>
<p>mark  total   sem</p>
<p>10    100     sem1<br />
20    200     sem2<br />
30    300     sem3</p>
<p>how can i achive above format using monogodb query.query is jaspersoft related means very useful</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-2" id="dsq-comment-1953">
<div id="dsq-comment-header-1953" class="dsq-comment-header">
<cite id="dsq-cite-1953">
/                <span id="dsq-author-user-1953">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-1953" class="dsq-comment-body">
<div id="dsq-comment-message-1953" class="dsq-comment-message"><p>I have not worked on jaspersoft so I am not sure how the query needs to written. If you want to return an object and compare a value refer example 2 in the post. &#8212; Thanks.</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-1937">
<div id="dsq-comment-header-1937" class="dsq-comment-header">
<cite id="dsq-cite-1937">
<span id="dsq-author-user-1937">syd</span>
</cite>
</div>
<div id="dsq-comment-body-1937" class="dsq-comment-body">
<div id="dsq-comment-message-1937" class="dsq-comment-message"><p>and thanks for your quick response.</p>
</div>
</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="dsq-comment-1936">
<div id="dsq-comment-header-1936" class="dsq-comment-header">
<cite id="dsq-cite-1936">
<span id="dsq-author-user-1936">syd</span>
</cite>
</div>
<div id="dsq-comment-body-1936" class="dsq-comment-body">
<div id="dsq-comment-message-1936" class="dsq-comment-message"><p>can you explain a little briefly please, as i am doing a project to calculate the time taken by mongoDB and hadoop in mapReduce algorithm when they store or retrieve different types of bulk data.</p>
</div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="dsq-comment-1954">
<div id="dsq-comment-header-1954" class="dsq-comment-header">
<cite id="dsq-cite-1954">
/                <span id="dsq-author-user-1954">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-1954" class="dsq-comment-body">
<div id="dsq-comment-message-1954" class="dsq-comment-message"><p>I have not dug deeper into the algorithms, so I am not aware of it. You can look for more info here : <a href="https://github.com/mongodb" onclick="__gaTracker('send', 'event', 'outbound-comment', 'https://github.com/mongodb', 'https://github.com/mongodb');" rel="nofollow">https://github.com/mongodb</a></p>
</div>
</div>
<ul class="children">
<li class="comment even depth-3" id="dsq-comment-1986">
<div id="dsq-comment-header-1986" class="dsq-comment-header">
<cite id="dsq-cite-1986">
<span id="dsq-author-user-1986">syd</span>
</cite>
</div>
<div id="dsq-comment-body-1986" class="dsq-comment-body">
<div id="dsq-comment-message-1986" class="dsq-comment-message"><p>Thank you</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-1934">
<div id="dsq-comment-header-1934" class="dsq-comment-header">
<cite id="dsq-cite-1934">
<span id="dsq-author-user-1934">syd</span>
</cite>
</div>
<div id="dsq-comment-body-1934" class="dsq-comment-body">
<div id="dsq-comment-message-1934" class="dsq-comment-message"><p>what are the different techniques to find the time taken by my query to fetch output in mapReduce</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-2" id="dsq-comment-1935">
<div id="dsq-comment-header-1935" class="dsq-comment-header">
<cite id="dsq-cite-1935">
/                <span id="dsq-author-user-1935">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-1935" class="dsq-comment-body">
<div id="dsq-comment-message-1935" class="dsq-comment-message"><p>AFAIK, there is no official benchmarking tool for MongoDB. You can track the time taken from within the node application. Try this :  <a href="http://blog.nodejs.org/2012/04/25/profiling-node-js" onclick="__gaTracker('send', 'event', 'outbound-comment', 'http://blog.nodejs.org/2012/04/25/profiling-node-js', 'http://blog.nodejs.org/2012/04/25/profiling-node-js');" rel="nofollow">http://blog.nodejs.org/2012/04/25/profiling-node-js</a></p>
<p>Or you can try</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div id="crayon-5a10fc180a57b411459811" class="crayon-syntax crayon-theme-arduino-ide crayon-font-droid-sans-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
console.time('myJob');
// your job
console.timeEnd('myJob');
</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums" data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a10fc180a57b411459811-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc180a57b411459811-2">2</div><div class="crayon-num" data-line="crayon-5a10fc180a57b411459811-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a10fc180a57b411459811-4">4</div><div class="crayon-num" data-line="crayon-5a10fc180a57b411459811-5">5</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a10fc180a57b411459811-1">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc180a57b411459811-2"><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-s">'myJob'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc180a57b411459811-3"><span class="crayon-c">// your job</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a10fc180a57b411459811-4"><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">timeEnd</span><span class="crayon-sy">(</span><span class="crayon-s">'myJob'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a10fc180a57b411459811-5">&nbsp;</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0007 seconds] -->
<p></p>
<p>This should give a fair idea.</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="dsq-comment-78">
<div id="dsq-comment-header-78" class="dsq-comment-header">
<cite id="dsq-cite-78">
<span id="dsq-author-user-78">sppericat</span>
</cite>
</div>
<div id="dsq-comment-body-78" class="dsq-comment-body">
<div id="dsq-comment-message-78" class="dsq-comment-message"><p>This is nice, but why don&#8217;t you use the the aggregation framework instead ?</p>
</div>
</div>
<ul class="children">
<li class="comment even depth-2" id="dsq-comment-80">
<div id="dsq-comment-header-80" class="dsq-comment-header">
<cite id="dsq-cite-80">
/                <span id="dsq-author-user-80">Arvind Ravulavaru</span>
</cite>
</div>
<div id="dsq-comment-body-80" class="dsq-comment-body">
<div id="dsq-comment-message-80" class="dsq-comment-message"><p>Thanks sppericat,</p>
<p>No argument there. You can use an aggregation framework to do the same. I wanted to throw some light on aggregating data using MapReduce. </p>
<p>IMO, MapReduce is a verbose version of the aggregation framework &amp; is also an alternative. The only key difference I see between MapReduce &amp; Aggregation Framework is the built in pipe operators like $geoNear. $sum, $gte etc. In a MapReduce paradigm, you end up writing these on your own.</p>
<p>Thanks,<br />
Arvind.</p>
</div>
</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul>
</div>
</div>
<script src="/cdn-cgi/scripts/0e574bed/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">
var disqus_url = '/mapreduce-in-mongodb/';
var disqus_identifier = '1200 /?p=1200';
var disqus_container_id = 'disqus_thread';
var disqus_shortname = 'thejackalofjavascriptcom';
var disqus_title = "MapReduce in MongoDB";
var disqus_config_custom = window.disqus_config;
var disqus_config = function () {
/*
All currently supported events:
onReady: fires when everything is ready,
onNewComment: fires when a new comment is posted,
onIdentify: fires when user is authenticated
*/
this.language = '';
this.callbacks.onReady.push(function () {
// sync comments in the background so we don't block the page
var script = document.createElement('script');
script.async = true;
script.src = '?cf_action=sync_comments&post_id=1200';
var firstScript = document.getElementsByTagName('script')[0];
firstScript.parentNode.insertBefore(script, firstScript);
});
if (disqus_config_custom) {
disqus_config_custom.call(this);
}
};
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript';
dsq.async = true;
dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
</main><!-- #main -->
</div><!-- #primary -->
<div id="secondary" class="widget-area" role="complementary">
<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="/">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s">
</label>
<input type="submit" class="search-submit" value="Search">
</form>
</aside><aside id="text-2" class="widget widget_text"><h1 class="widget-title">This is me!!</h1>			<div class="textwidget"><style>
.socl-btn
{
padding: 3px;
background: #f45145;
border-radius: 3px;
color: rgba(255, 255, 255, 0.6) !important;
margin-top: 9px;
display: inline-block;
text-align: center;
width:100%;
-webkit-transition: all 0.2s ease-in-out;
-moz-transition: all 0.2s ease-in-out;
-o-transition: all 0.2s ease-in-out;
transition: all 0.2s ease-in-out;
}
.socl-btn:hover{
color:#fff !important;
}
.lkdin{
background-image: url(/wp-content/uploads/2014/08/l.png);
background-repeat: no-repeat;
background-position: left;
}
.gplus{
background-image: url(/wp-content/uploads/2014/08/g.png);
background-repeat: no-repeat;
background-position: left;
}
.mongodir{
background-image: url(/wp-content/uploads/2014/08/m.png);
background-repeat: no-repeat;
background-position: left;
}
.sitept{
background-image: url(/wp-content/uploads/2014/08/s.png);
background-repeat: no-repeat;
background-position: left;
}
</style>
<img src="/wp-content/uploads/2014/02/030a49b.jpg" alt="Arvind Ravulavaru" style="width: 81px; margin: 0px auto;display: block;border-radius: 45px;"/>
<br/>
<label>
Hello.. I am Arvind Ravulavaru a Full Stack Consultant based out of Hyderabad, India. This blog is my way of giving back to the Javascript Community!</label>
<br/>
<div style="text-align:center;" ><a  href="/portfolio/">Know more about me</a></div>
<br/>
<div  style="text-align:center;">
<a href="https://twitter.com/arvindr21" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://twitter.com/arvindr21', 'Follow @arvindr21');" class="twitter-follow-button" data-show-count="false">Follow @arvindr21</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> 
<iframe src="http://ghbtns.com/github-btn.html?user=arvindr21&type=follow"
allowtransparency="true" frameborder="0" scrolling="0" width="132" height="20"></iframe><br/><br/>
<a href="http://in.linkedin.com/in/arvindravulavaru" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://in.linkedin.com/in/arvindravulavaru', 'Linked In');" target="_blank"  class="socl-btn lkdin">Linked In</a>
<a href="https://plus.google.com/+ArvindRavulavaru" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://plus.google.com/+ArvindRavulavaru', 'Google Plus');" target="_blank"  class="socl-btn gplus">Google Plus</a><br/>
<a href="http://blog.mongodirector.com/author/arvindr" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://blog.mongodirector.com/author/arvindr', 'Mongo Director');" target="_blank"  class="socl-btn mongodir">Mongo Director</a> <a href="http://www.sitepoint.com/author/aravulavaru/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.sitepoint.com/author/aravulavaru/', 'Site Point');" target="_blank"  class="socl-btn sitept">Site Point</a> <br/><br/>
<a href="https://paper.li/arvindr21/1409328222#!headlines/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://paper.li/arvindr21/1409328222#!headlines/', 'Chronicles of the Jackal of Javascript');" target="_blank"  class="socl-btn">Chronicles of the Jackal of Javascript</a>
</div></div>
</aside><aside id="text-5" class="widget widget_text">			<div class="textwidget"><style>
.crm-app, .crm-ext
{
padding: 9px;
background: #787878;
border-radius: 45px;
color: #EFEFEE !important;
margin-top: 9px;
display: inline-block;
text-align: center;
}
</style>
<a href="https://chrome.google.com/webstore/detail/the-jackal-of-javascript/oiaebkkgbicadojhdipjajkhjkeencdm" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://chrome.google.com/webstore/detail/the-jackal-of-javascript/oiaebkkgbicadojhdipjajkhjkeencdm', 'Chrome App');" target ="_blank" class="crm-app">Chrome App</a>
<a href="https://chrome.google.com/webstore/detail/the-jackal-of-javascript/dokdjofgoglghfljkpmmkgfpipgcmjme" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://chrome.google.com/webstore/detail/the-jackal-of-javascript/dokdjofgoglghfljkpmmkgfpipgcmjme', 'Chrome Extension');" target ="_blank" class="crm-ext">Chrome Extension</a></div>
</aside><aside id="text-7" class="widget widget_text"><h1 class="widget-title">Workshops</h1>			<div class="textwidget"><ul>
<li><a href="http://mean-workshop.herokuapp.com/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://mean-workshop.herokuapp.com', 'o/ M.E.A.N. Workshop');" target="_blank">\o/ M.E.A.N. Workshop</a>
</li>
</ul></div>
</aside><aside id="text-6" class="widget widget_text"><h1 class="widget-title">Presentations</h1>			<div class="textwidget"><ul>
<li><a href="http://arvindr21.github.io/ng-overview" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/ng-overview', 'Overview of Angularjs');" target="_blank">Overview of Angularjs</a>
</li>
<li><a href="http://arvindr21.github.io/howBrowserWorks" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/howBrowserWorks', 'How Browser Works');" target="_blank">How Browser Works</a>
</li>
<li><a href="http://arvindr21.github.io/WebComponents" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/WebComponents', 'Web Components');" target="_blank">Web Components</a>
</li>
<li><a href="http://arvindr21.github.io/building-n-Scaffolding" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/building-n-Scaffolding', 'Modern UI Build Systems and Scaffolding Tools');" target="_blank">Modern UI Build Systems and Scaffolding Tools</a>
</li>
<li><a href="http://arvindr21.github.io/backbonejs" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/backbonejs', 'Backbonejs');" target="_blank">Backbonejs</a>
</li>
<li><a href="http://arvindr21.github.io/rwd" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/rwd', 'Responsive Web Design');" target="_blank">Responsive Web Design</a>
</li>
</ul></div>
</aside><aside id="text-3" class="widget widget_text"><h1 class="widget-title">Projects</h1>			<div class="textwidget"><ul><li><a href="/rotten-tomatoes-jquery-rest-client/" target="_blank">Rotten Tomatoes jQuery Rest Client</a>
</li>
<li>
<a href="/uploading-files-made-fun/" target="_blank">blueimp-file-upload-expressjs</a> - A Node Package
</li>
<li>
<a href="http://arvindr21.github.io/lazyboy/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/lazyboy/', 'lazyboy');" target="_blank">lazyboy</a> - Command line laziness redefined
</li>
<li>
<a href="http://arvindr21.github.io/diskDB/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://arvindr21.github.io/diskDB/', 'diskDB');" target="_blank">diskDB</a> - A Light Weight Disk based JSON Database - A Node Package
</li>
<li>
<a href="https://github.com/search?utf8=%E2%9C%93&q=user%3Aarvindr21+slush&type=Repositories&ref=searchresults" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://github.com/search?utf8=%E2%9C%93&amp;q=user%3Aarvindr21+slush&amp;type=Repositories&amp;ref=searchresults', 'My Slush Generators');" target="_blank">My Slush Generators</a>
</li>
<li>
<a href="https://github.com/search?utf8=%E2%9C%93&q=user%3Aarvindr21+yeoman&type=Repositories&ref=searchresults" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://github.com/search?utf8=%E2%9C%93&amp;q=user%3Aarvindr21+yeoman&amp;type=Repositories&amp;ref=searchresults', 'My Yeoman Generators');" target="_blank">My Yeoman Generators</a>
</li>
<li>
<a href="https://github.com/arvindr21/myWebComponents#mywebcomponents" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://github.com/arvindr21/myWebComponents#mywebcomponents', 'My Web Components');" target="_blank">My Web Components</a>
</li>
<li>
<a href="http://bower.io/search/?q=owner:arvindr21" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://bower.io/search/?q=owner:arvindr21', 'My Bower Packages');" target="_blank">My Bower Packages</a>
</li>
</ul></div>
</aside><aside id="latestseries-2" class="widget widget_latestseries"><h1 class="widget-title">Series</h1>			<ul>
<div class="latest-series"><ul><li><a href="/series/a-reminder-app/" class="series-145" title="Ionic, Twilio and Node Scheduler – A Reminder App">Ionic, Twilio and Node Scheduler – A Reminder App</a></li><li><a href="/series/node-webkit-apps/" class="series-150" title="Node Webkit Apps">Node Webkit Apps</a></li><li><a href="/series/rpi/" class="series-148" title="Raspberry Pi">Raspberry Pi</a></li></ul></div>			</ul>
</aside><aside id="text-4" class="widget widget_text"><h1 class="widget-title">Guest Posts</h1>			<div class="textwidget"><ul>
<li><a href="http://www.sitepoint.com/building-chat-app-node-webkit-firebase-angularjs/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.sitepoint.com/building-chat-app-node-webkit-firebase-angularjs/', 'Building a Chat App with node-webkit, Firebase, and AngularJS');" target="_blank">Building a Chat App with node-webkit, Firebase, and AngularJS</a></li>
<li><a href="http://www.sitepoint.com/creating-sentiment-analysis-application-using-node-js/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.sitepoint.com/creating-sentiment-analysis-application-using-node-js/', 'Creating a Sentiment Analysis Application Using Node.js');" target="_blank">Creating a Sentiment Analysis Application Using Node.js</a></li>
<li><a href="http://blog.mongodirector.com/implementing-pagination-with-mongodb-express-js-slush/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://blog.mongodirector.com/implementing-pagination-with-mongodb-express-js-slush/', 'Implementing pagination with MongoDB, Express.js &amp; Slush');" target="_blank">Implementing pagination with MongoDB, Express.js & Slush</a></li>
<li><a href="http://www.sitepoint.com/creating-firebase-powered-end-end-ionic-application/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://www.sitepoint.com/creating-firebase-powered-end-end-ionic-application/', 'Creating a Firebase Powered End to End Ionic Application');" target="_blank">Creating a Firebase Powered End to End Ionic Application</a></li>
<li><a href="http://blog.mongodirector.com/getting-started-with-mongodb-and-mongoose/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://blog.mongodirector.com/getting-started-with-mongodb-and-mongoose/', 'Getting started with MongoDB and Mongoose');" target="_blank">Getting started with MongoDB and Mongoose</a></li>
<li><a href="http://blog.mongodirector.com/yeoman-mongoose-and-mongodb/" onclick="__gaTracker('send', 'event', 'outbound-widget', 'http://blog.mongodirector.com/yeoman-mongoose-and-mongodb/', 'Yeoman, Mongoose and MongoDB');" target="_blank">Yeoman, Mongoose and MongoDB</a></li>
</ul></div>
</aside><aside id="views-2" class="widget widget_views"><h1 class="widget-title">Top5 Posts</h1><ul>
<li><a href="/architecting-a-restful-node-js-app/"  title="Architecting a Secure RESTful Node.js app">Architecting a Secure RESTful Node.js app</a> - 215,396 views</li><li><a href="/getting-started-with-angular-2-0/"  title="Getting Started with Angular 2.0">Getting Started with Angular 2.0</a> - 177,588 views</li><li><a href="/developing-a-mean-app-with-angular-2-0/"  title="Developing a MEAN app with Angular 2.0">Developing a MEAN app with Angular 2.0</a> - 149,730 views</li><li><a href="/getting-started-with-node-webkit-apps/"  title="Node Webkit &ndash; Build Desktop Apps with Node and Web Technologies">Node Webkit &ndash; Build Desktop Apps with Node and Web Technologies</a> - 93,577 views</li><li><a href="/rpi-live-streaming/"  title="Raspberry Pi, Camera and Node.js &ndash; Live Streaming with Websockets #IoT">Raspberry Pi, Camera and Node.js &ndash; Live Streaming with Websockets #IoT</a> - 92,015 views</li></ul>
</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h1 class="widget-title">Recent Posts</h1>		<ul>
<li>
<a href="/learning-ionic/">Learning Ionic</a>
</li>
<li>
<a href="/electron-wordpress-angular-material-an-offline-viewer/">Electron, WordPress &#038; Angular Material &#8211; An Offline Viewer</a>
</li>
<li>
<a href="/developing-a-mean-app-with-angular-2-0/">Developing a MEAN app with Angular 2.0</a>
</li>
<li>
<a href="/pushbots-and-cordova/">Pushbots and Cordova &#8211; Easy Push Notifications for your app</a>
</li>
<li>
<a href="/getting-started-with-client-side-storage/">Getting Started with Client Side Storage</a>
</li>
</ul>
</aside><aside id="categories-2" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
<li class="cat-item cat-item-141"><a href="/architecture/" >Architecture</a> (8)
</li>
<li class="cat-item cat-item-3"><a href="/css/" >CSS</a> (9)
<ul class='children'>
<li class="cat-item cat-item-5"><a href="/css/css3/" >CSS3</a> (6)
</li>
<li class="cat-item cat-item-26"><a href="/css/less/" >LESS</a> (3)
</li>
<li class="cat-item cat-item-55"><a href="/css/sass/" >SASS</a> (1)
</li>
</ul>
</li>
<li class="cat-item cat-item-117"><a href="/database/" >Database</a> (17)
<ul class='children'>
<li class="cat-item cat-item-136"><a href="/database/disk-db/" >Disk DB</a> (6)
</li>
<li class="cat-item cat-item-131"><a href="/database/firebase/" >Firebase</a> (4)
</li>
<li class="cat-item cat-item-118"><a href="/database/mongodb/" >MongoDB</a> (8)
<ul class='children'>
<li class="cat-item cat-item-119"><a href="/database/mongodb/mongolab/" >MongoLab</a> (3)
</li>
<li class="cat-item cat-item-123"><a href="/database/mongodb/monk/" >Monk</a> (1)
</li>
</ul>
</li>
</ul>
</li>
<li class="cat-item cat-item-125"><a href="/deployments/" >Deployments</a> (4)
<ul class='children'>
<li class="cat-item cat-item-126"><a href="/deployments/heroku/" >Heroku</a> (2)
</li>
</ul>
</li>
<li class="cat-item cat-item-135"><a href="/desktop-apps/" >Desktop Apps</a> (8)
</li>
<li class="cat-item cat-item-155"><a href="/dna-analysis/" >DNA Analysis</a> (1)
</li>
<li class="cat-item cat-item-112"><a href="/es6/" >ECMAScript 6</a> (3)
</li>
<li class="cat-item cat-item-162"><a href="/electron-atom-shell/" >Electron (atom shell)</a> (1)
</li>
<li class="cat-item cat-item-25"><a href="/frameworks/" >Frameworks</a> (42)
<ul class='children'>
<li class="cat-item cat-item-160"><a href="/frameworks/angular-2-0/" >Angular 2.0</a> (2)
</li>
<li class="cat-item cat-item-108"><a href="/frameworks/angularjs/" >Angularjs</a> (21)
</li>
<li class="cat-item cat-item-132"><a href="/frameworks/backbonejs/" >Backbonejs</a> (1)
</li>
<li class="cat-item cat-item-105"><a href="/frameworks/bootstrap/" >Bootstrap</a> (9)
</li>
<li class="cat-item cat-item-159"><a href="/frameworks/emberjs/" >Emberjs</a> (1)
</li>
<li class="cat-item cat-item-56"><a href="/frameworks/foundation/" >Foundation</a> (3)
</li>
<li class="cat-item cat-item-110"><a href="/frameworks/framework7/" >Framework7</a> (1)
</li>
<li class="cat-item cat-item-107"><a href="/frameworks/ionic/" >Ionic</a> (11)
</li>
<li class="cat-item cat-item-157"><a href="/frameworks/lumx/" >Lumx</a> (1)
</li>
<li class="cat-item cat-item-138"><a href="/frameworks/mean/" >MEAN</a> (4)
</li>
<li class="cat-item cat-item-116"><a href="/frameworks/meteorjs/" >Meteorjs</a> (1)
</li>
<li class="cat-item cat-item-122"><a href="/frameworks/onsen-ui/" >Onsen UI</a> (2)
</li>
</ul>
</li>
<li class="cat-item cat-item-101"><a href="/git/" >Git</a> (12)
<ul class='children'>
<li class="cat-item cat-item-102"><a href="/git/github/" >GitHub</a> (10)
</li>
</ul>
</li>
<li class="cat-item cat-item-2"><a href="/html/" >HTML</a> (22)
<ul class='children'>
<li class="cat-item cat-item-4"><a href="/html/html5/" >HTML5</a> (21)
<ul class='children'>
<li class="cat-item cat-item-158"><a href="/html/html5/webrtc/" >WebRTC</a> (1)
</li>
<li class="cat-item cat-item-106"><a href="/html/html5/websockets/" >WebSockets</a> (6)
</li>
</ul>
</li>
</ul>
</li>
<li class="cat-item cat-item-137"><a href="/intels-app-ui/" >Intel&#039;s App UI</a> (1)
</li>
<li class="cat-item cat-item-143"><a href="/iot/" >IoT</a> (6)
</li>
<li class="cat-item cat-item-1"><a href="/javascript/" >Javascript</a> (75)
<ul class='children'>
<li class="cat-item cat-item-6"><a href="/javascript/jquery/" >jQuery</a> (14)
</li>
</ul>
</li>
<li class="cat-item cat-item-151"><a href="/material-design/" >Material Design</a> (3)
</li>
<li class="cat-item cat-item-99"><a href="/mobile/" >Mobile</a> (21)
<ul class='children'>
<li class="cat-item cat-item-103"><a href="/mobile/android/" >Android</a> (15)
</li>
<li class="cat-item cat-item-113"><a href="/mobile/firefox-os/" >Firefox OS</a> (2)
</li>
<li class="cat-item cat-item-104"><a href="/mobile/ios/" >iOS</a> (11)
</li>
<li class="cat-item cat-item-100"><a href="/mobile/phonegap/" >PhoneGap</a> (16)
</li>
</ul>
</li>
<li class="cat-item cat-item-149"><a href="/mqtt/" >MQTT</a> (1)
</li>
<li class="cat-item cat-item-163"><a href="/my-books/" >My Books</a> (1)
</li>
<li class="cat-item cat-item-45"><a href="/node/" >Node</a> (60)
<ul class='children'>
<li class="cat-item cat-item-152"><a href="/node/cli/" >CLI</a> (3)
</li>
<li class="cat-item cat-item-121"><a href="/node/expressjs/" >Expressjs</a> (18)
</li>
<li class="cat-item cat-item-156"><a href="/node/genome/" >Genome</a> (1)
</li>
<li class="cat-item cat-item-62"><a href="/node/grunt/" >Grunt</a> (8)
</li>
<li class="cat-item cat-item-124"><a href="/node/koa/" >Koa</a> (1)
</li>
<li class="cat-item cat-item-134"><a href="/node/node-webkit/" >Node Webkit</a> (7)
</li>
<li class="cat-item cat-item-54"><a href="/node/npm/" >NPM</a> (15)
</li>
<li class="cat-item cat-item-120"><a href="/node/restify/" >Restify</a> (3)
</li>
</ul>
</li>
<li class="cat-item cat-item-161"><a href="/push-notifications/" >Push Notifications</a> (1)
</li>
<li class="cat-item cat-item-59"><a href="/quick-and-dirty/" >Quick and Dirty</a> (42)
</li>
<li class="cat-item cat-item-142"><a href="/raspberry-pi/" >Raspberry Pi</a> (9)
</li>
<li class="cat-item cat-item-60"><a href="/setup/" >Setup</a> (60)
</li>
<li class="cat-item cat-item-61"><a href="/testing/" >Testing</a> (5)
<ul class='children'>
<li class="cat-item cat-item-129"><a href="/testing/jasmine/" >Jasmine</a> (1)
</li>
<li class="cat-item cat-item-128"><a href="/testing/protractor/" >Protractor</a> (1)
</li>
<li class="cat-item cat-item-98"><a href="/testing/test-automation/" >Test Automation</a> (1)
</li>
<li class="cat-item cat-item-41"><a href="/testing/tdd/" >Test Driven Developement</a> (2)
</li>
</ul>
</li>
<li class="cat-item cat-item-139"><a href="/third-party-products/" >Third Party Products</a> (4)
<ul class='children'>
<li class="cat-item cat-item-140"><a href="/third-party-products/twilio/" >Twilio</a> (4)
</li>
</ul>
</li>
<li class="cat-item cat-item-58"><a href="/tutorial/" >Tutorial</a> (79)
</li>
<li class="cat-item cat-item-130"><a href="/performance-analysis/" >UI Performance</a> (1)
</li>
<li class="cat-item cat-item-109"><a href="/web-components/" >Web Components</a> (3)
</li>
<li class="cat-item cat-item-133"><a href="/google-web-starter-kit/" >Web Starter Kit</a> (1)
</li>
</ul>
</aside><aside id="archives-2" class="widget widget_archive"><h1 class="widget-title">Archives</h1>		<ul>
<li><a href='/2015/07/'>July 2015</a></li>
<li><a href='/2015/05/'>May 2015</a></li>
<li><a href='/2015/04/'>April 2015</a></li>
<li><a href='/2015/03/'>March 2015</a></li>
<li><a href='/2015/02/'>February 2015</a></li>
<li><a href='/2015/01/'>January 2015</a></li>
<li><a href='/2014/12/'>December 2014</a></li>
<li><a href='/2014/11/'>November 2014</a></li>
<li><a href='/2014/10/'>October 2014</a></li>
<li><a href='/2014/09/'>September 2014</a></li>
<li><a href='/2014/08/'>August 2014</a></li>
<li><a href='/2014/07/'>July 2014</a></li>
<li><a href='/2014/06/'>June 2014</a></li>
<li><a href='/2014/05/'>May 2014</a></li>
<li><a href='/2014/04/'>April 2014</a></li>
<li><a href='/2014/03/'>March 2014</a></li>
<li><a href='/2014/02/'>February 2014</a></li>
</ul>
</aside><aside id="wysija-3" class="widget widget_wysija"><h1 class="widget-title">Inform me about new posts</h1><div class="widget_wysija_cont"><div id="msg-form-wysija-3" class="wysija-msg ajax"></div><form id="form-wysija-3" method="post" action="#wysija" class="widget_wysija">
<p class="wysija-paragraph">
<label>Email <span class="wysija-required">*</span></label>
<input type="text" name="wysija[user][email]" class="wysija-input validate[required,custom[email]]" title="Email"  value="" />
<span class="abs-req">
<input type="text" name="wysija[user][abs][email]" class="wysija-input validated[abs][email]" value="" />
</span>
</p>
<input class="wysija-submit wysija-submit-field" type="submit" value="Subscribe!" />
<input type="hidden" name="form_id" value="1" />
<input type="hidden" name="action" value="save" />
<input type="hidden" name="controller" value="subscribers" />
<input type="hidden" value="1" name="wysija-page" />
<input type="hidden" name="wysija[user_list][list_ids]" value="3" />
</form></div></aside>	</div><!-- #secondary -->
	<script>
var _prum = [['id', '544090ababe53d0e3e76d6ce'],
['mark', 'firstbyte', (new Date()).getTime()]];
(function() {
var s = document.getElementsByTagName('script')[0]
, p = document.createElement('script');
p.async = 'async';
p.src = '//rum-static.pingdom.net/prum.min.js';
s.parentNode.insertBefore(p, s);
})();
</script>
</div><!-- #content -->
<footer id="colophon" class="site-footer" role="contentinfo">
<div class="site-info">
All Rights Reserved
<span class="sep"> | </span>
The Jackal of Javascript
</div><!-- .site-info -->
<div class="rnd-circle" style="background: black;width: 10px;height: 10px;border-radius: 50%;"></div>
</footer><!-- #colophon -->
</div><!-- #page -->
<script type='text/javascript'><!--
var seriesdropdown = document.getElementById("orgseries_dropdown");
if (seriesdropdown) {
function onSeriesChange() {
if ( seriesdropdown.options[seriesdropdown.selectedIndex].value != ( 0 || -1 ) ) {
location.href = "/series/"+seriesdropdown.options[seriesdropdown.selectedIndex].value;
}
}
seriesdropdown.onchange = onSeriesChange;
}
--></script>
<script type="text/javascript">
// <![CDATA[
var disqus_shortname = 'thejackalofjavascriptcom';
(function () {
var nodes = document.getElementsByTagName('span');
for (var i = 0, url; i < nodes.length; i++) {
if (nodes[i].className.indexOf('dsq-postid') != -1) {
nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
url = nodes[i].parentNode.href.split('#', 1);
if (url.length == 1) { url = url[0]; }
else { url = url[1]; }
nodes[i].parentNode.href = url + '#disqus_thread';
}
}
var s = document.createElement('script'); 
s.async = true;
s.type = 'text/javascript';
s.src = '//' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
// ]]>
</script>
<div class="scroll-back-to-top-wrapper">
<span class="scroll-back-to-top-inner">
<i class="fa fa-2x fa-arrow-circle-up"></i>
</span>
</div>
<style type="text/css">
#wpfront-notification-bar 
{
background: #242d36;
background: -moz-linear-gradient(top, #242d36 0%, #242d36 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#242d36), color-stop(100%,#242d36));
background: -webkit-linear-gradient(top, #242d36 0%,#242d36 100%);
background: -o-linear-gradient(top, #242d36 0%,#242d36 100%);
background: -ms-linear-gradient(top, #242d36 0%,#242d36 100%);
background: linear-gradient(to bottom, #242d36 0%, #242d36 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#242d36', endColorstr='#242d36',GradientType=0 );
}
#wpfront-notification-bar div.wpfront-message
{
color: #ffffff;
}
#wpfront-notification-bar a.wpfront-button
{
background: #f45145;
background: -moz-linear-gradient(top, #f45145 0%, #f45145 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f45145), color-stop(100%,#f45145));
background: -webkit-linear-gradient(top, #f45145 0%,#f45145 100%);
background: -o-linear-gradient(top, #f45145 0%,#f45145 100%);
background: -ms-linear-gradient(top, #f45145 0%,#f45145 100%);
background: linear-gradient(to bottom, #f45145 0%, #f45145 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f45145', endColorstr='#f45145',GradientType=0 );
color: #ffffff;
}
#wpfront-notification-bar-open-button
{
background-color: #00b7ea;
}
#wpfront-notification-bar  div.wpfront-close 
{
border: 1px solid #555555;
background-color: #555555;
color: #000000;
}
#wpfront-notification-bar  div.wpfront-close:hover 
{
border: 1px solid #aaaaaa;
background-color: #aaaaaa;
}
</style>
<div id="wpfront-notification-bar-spacer"  style="display: none;">
<div id="wpfront-notification-bar-open-button" class="top wpfront-bottom-shadow"></div>
<div id="wpfront-notification-bar" class="wpfront-fixed">
<div class="wpfront-close">X</div>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td>
<div class="wpfront-message">
Interested in building IoT Solutions using only JavaScript?<br>Checkout my new book:                    </div>
<div>
<a class="wpfront-button" href="https://www.packtpub.com/hardware-and-creative/advanced-iot-javascript"  target="_blank" >Advanced IoT with JavaScript</a>
</div>
</td>
</tr>
</table>
</div>
</div>
<style type="text/css">
#wpfront-notification-bar  div{display:inline;}</style>
<script type="text/javascript">if(typeof wpfront_notification_bar == "function") wpfront_notification_bar({"position":1,"height":0,"fixed_position":"on","animate_delay":0.5,"close_button":true,"button_action_close_bar":false,"auto_close_after":0,"display_after":1,"is_admin_bar_showing":false,"display_open_button":false,"keep_closed":"on","keep_closed_for":1,"position_offset":0,"display_scroll":"on","display_scroll_offset":100});</script><script type='text/javascript' src='/wp-content/plugins/jetpack/modules/photon/photon.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var scrollBackToTop = {"scrollDuration":"500","fadeDuration":"0.5"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/scroll-back-to-top/assets/js/scroll-back-to-top.js'></script>
<script type='text/javascript' src='/wp-content/plugins/simple-share-buttons-adder/js/ssba.min.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"\/wp-admin\/admin-ajax.php","post_id":"1200"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/wp-postviews/postviews-cache.js'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js'></script>
<script type='text/javascript' src='/wp-content/themes/sorbet/js/menus.js'></script>
<script type='text/javascript' src='/wp-content/themes/sorbet/js/skip-link-focus-fix.js'></script>
<script type='text/javascript' src='/wp-includes/js/comment-reply.min.js'></script>
<script type='text/javascript' src='/wp-content/plugins/lazy-load/js/jquery.sonar.min.js'></script>
<script type='text/javascript' src='/wp-content/plugins/lazy-load/js/lazy-load.js'></script>
<script type='text/javascript' src='/wp-content/plugins/jetpack/_inc/postmessage.js'></script>
<script type='text/javascript' src='/wp-content/plugins/jetpack/_inc/jquery.jetpack-resize.js'></script>
<script type='text/javascript' src='/wp-content/plugins/jetpack/_inc/jquery.inview.js'></script>
<script type='text/javascript' src='/wp-content/plugins/jetpack/modules/likes/queuehandler.js'></script>
<script type='text/javascript' src='/wp-content/plugins/wysija-newsletters/js/validate/languages/jquery.validationEngine-en.js'></script>
<script type='text/javascript' src='/wp-content/plugins/wysija-newsletters/js/validate/jquery.validationEngine.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var wysijaAJAX = {"action":"wysija_ajax","controller":"subscribers","ajaxurl":"\/wp-admin\/admin-ajax.php","loadingTrans":"Loading...","is_rtl":""};
var wysijaAJAX = {"action":"wysija_ajax","controller":"subscribers","ajaxurl":"\/wp-admin\/admin-ajax.php","loadingTrans":"Loading...","is_rtl":""};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/wysija-newsletters/js/front-subscribers.js'></script>
<iframe src='http://widgets.wp.com/likes/master.html?ver=20141028#ver=20141028' scrolling='no' id='likes-master' name='likes-master' style='display:none;'></iframe>
<div id='likes-other-gravatars'><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
<script type="text/javascript">
jQuery.noConflict();
(function( $ ) {
$(function() {
// More code using $ as alias to jQuery
$("area[href*=#],a[href*=#]:not([href=#]):not([href^='#tab']):not([href^='#quicktab']):not([href^='#pane'])").click(function() {
if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
var target = $(this.hash);
target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
if (target.length) {
$('html,body').animate({
scrollTop: target.offset().top - 20  
},900 ,'easeOutQuint');
return false;
}
}
});
});
})(jQuery);	
</script>				
<script type='text/javascript' src='http://stats.wp.com/e-201746.js' async defer></script>
<script type='text/javascript'>
_stq = window._stq || [];
_stq.push([ 'view', {v:'ext',j:'1:3.7',blog:'70838519',post:'1200',tz:'5.5',srv:'thejackalofjavascript.com'} ]);
_stq.push([ 'clickTrackerInit', '70838519', '1200' ]);
</script>
<div id="upprev_box"><h6>Read previous post:</h6><div class="upprev_excerpt"><h5><a href="/nodejs-restify-mongolab-build-rest-api/" rel="MapReduce in MongoDB">Nodejs Restify MongoDB &#8211; Build your own REST API</a></h5><p>Nodejs Restify MongoDB - Build your own REST API Nodejs Restify MongoDB tutorial Restify GET PUT DELETE POST MongoDB Mongojs...</p></div><a id="upprev_close" href="#" rel="close">Close</a></div><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47881846-1', 'auto');
ga('send', 'pageview');
</script>
<a style="display:none;" href="http://www.alexa.com/siteinfo//"><script type="text/javascript" src="http://xslt.alexa.com/site_stats/js/t/a?url=/"></script></a>
</body>
</html><script>if(document.getElementById('to-contents') == null){ } else {var a = document.getElementById('to-contents').getElementsByTagName('a'); for(var i=0; i< a.length;i++){var b = a[i].getAttribute('href').split('#');if(b.length >=2)a[i].setAttribute('href', '#'+b[1]);}}</script>
<script>if(typeof jQuery == 'function'){jQuery('.widgetGuts.shortcode h3').html('Inform Me About New Posts')}</script><!-- WP Fastest Cache file was created in 3.68849086761 seconds, on 19-11-17 3:35:55 -->